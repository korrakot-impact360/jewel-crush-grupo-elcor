!function(b,c){"object"==typeof module&&"object"==typeof module.exports?module.exports=b.document?c(b,!0):function(b){if(!b.document)throw Error("jQuery requires a window with a document");return c(b)}:c(b)}("undefined"!=typeof window?window:this,function(b,c){function d(b,c){c=c||T;var d=c.createElement("script");d.text=b;c.head.appendChild(d).parentNode.removeChild(d)}function e(b){var c=!!b&&"length"in b&&b.length,d=n.type(b);return"function"!==d&&!n.isWindow(b)&&("array"===d||0===c||"number"==
typeof c&&0<c&&c-1 in b)}function f(b,c){return b.nodeName&&b.nodeName.toLowerCase()===c.toLowerCase()}function g(b,c,d){return n.isFunction(c)?n.grep(b,function(b,V){return!!c.call(b,V,b)!==d}):c.nodeType?n.grep(b,function(b){return b===c!==d}):"string"!=typeof c?n.grep(b,function(b){return-1<Oa.call(c,b)!==d}):Bc.test(c)?n.filter(c,b,d):(c=n.filter(c,b),n.grep(b,function(b){return-1<Oa.call(c,b)!==d&&1===b.nodeType}))}function l(b,c){for(;(b=b[c])&&1!==b.nodeType;);return b}function p(b){return b}
function j(b){throw b;}function q(b,c,d,f){var e;try{b&&n.isFunction(e=b.promise)?e.call(b).done(c).fail(d):b&&n.isFunction(e=b.then)?e.call(b,c,d):c.apply(void 0,[b].slice(f))}catch(j){d.apply(void 0,[j])}}function m(){T.removeEventListener("DOMContentLoaded",m);b.removeEventListener("load",m);n.ready()}function s(){this.expando=n.expando+s.uid++}function r(b,c,d){var f;if(void 0===d&&1===b.nodeType)if(f="data-"+c.replace(Cc,"-$&").toLowerCase(),d=b.getAttribute(f),"string"==typeof d){try{d="true"===
d||"false"!==d&&("null"===d?null:d===+d+""?+d:Dc.test(d)?JSON.parse(d):d)}catch(e){}ea.set(b,c,d)}else d=void 0;return d}function u(b,c,d,f){var e,j=1,g=20,m=f?function(){return f.cur()}:function(){return n.css(b,c,"")},l=m(),q=d&&d[3]||(n.cssNumber[c]?"":"px"),r=(n.cssNumber[c]||"px"!==q&&+l)&&Pa.exec(n.css(b,c));if(r&&r[3]!==q){q=q||r[3];d=d||[];r=+l||1;do j=j||".5",r/=j,n.style(b,c,r+q);while(j!==(j=m()/l)&&1!==j&&--g)}return d&&(r=+r||+l||0,e=d[1]?r+(d[1]+1)*d[2]:+d[2],f&&(f.unit=q,f.start=r,
f.end=e)),e}function t(b,c){for(var d,f,e=[],j=0,g=b.length;j<g;j++)if(f=b[j],f.style)if(d=f.style.display,c){if("none"===d&&(e[j]=N.get(f,"display")||null,e[j]||(f.style.display="")),""===f.style.display&&Wa(f)){d=e;var m=j,q,l=void 0;q=f.ownerDocument;var r=f.nodeName;q=(f=Jb[r])?f:(l=q.body.appendChild(q.createElement(r)),f=n.css(l,"display"),l.parentNode.removeChild(l),"none"===f&&(f="block"),Jb[r]=f,f);d[m]=q}}else"none"!==d&&(e[j]="none",N.set(f,"display",d));for(j=0;j<g;j++)null!=e[j]&&(b[j].style.display=
e[j]);return b}function D(b,c){var d;return d="undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(c||"*"):"undefined"!=typeof b.querySelectorAll?b.querySelectorAll(c||"*"):[],void 0===c||c&&f(b,c)?n.merge([b],d):d}function F(b,c){for(var d=0,f=b.length;d<f;d++)N.set(b[d],"globalEval",!c||N.get(c[d],"globalEval"))}function H(b,c,d,f,e){for(var j,g,q,m,l=c.createDocumentFragment(),r=[],p=0,s=b.length;p<s;p++)if(j=b[p],j||0===j)if("object"===n.type(j))n.merge(r,j.nodeType?[j]:j);else if(Ec.test(j)){g=
g||l.appendChild(c.createElement("div"));q=(Kb.exec(j)||["",""])[1].toLowerCase();q=fa[q]||fa._default;g.innerHTML=q[1]+n.htmlPrefilter(j)+q[2];for(q=q[0];q--;)g=g.lastChild;n.merge(r,g.childNodes);g=l.firstChild;g.textContent=""}else r.push(c.createTextNode(j));l.textContent="";for(p=0;j=r[p++];)if(f&&-1<n.inArray(j,f))e&&e.push(j);else if(m=n.contains(j.ownerDocument,j),g=D(l.appendChild(j),"script"),m&&F(g),d)for(q=0;j=g[q++];)Lb.test(j.type||"")&&d.push(j);return l}function I(){return!0}function v(){return!1}
function G(){try{return T.activeElement}catch(b){}}function M(b,c,d,f,e,j){var g,q;if("object"==typeof c){"string"!=typeof d&&(f=f||d,d=void 0);for(q in c)M(b,q,d,f,c[q],j);return b}if(null==f&&null==e?(e=d,f=d=void 0):null==e&&("string"==typeof d?(e=f,f=void 0):(e=f,f=d,d=void 0)),!1===e)e=v;else if(!e)return b;return 1===j&&(g=e,e=function(b){return n().off(b),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),b.each(function(){n.event.add(this,c,e,f,d)})}function L(b,c){return f(b,"table")&&
f(11!==c.nodeType?c:c.firstChild,"tr")?n(">tbody",b)[0]||b:b}function O(b){return b.type=(null!==b.getAttribute("type"))+"/"+b.type,b}function Q(b){var c=Fc.exec(b.type);return c?b.type=c[1]:b.removeAttribute("type"),b}function P(b,c){var d,f,e,j,g,q;if(1===c.nodeType){if(N.hasData(b)&&(d=N.access(b),f=N.set(c,d),q=d.events))for(e in delete f.handle,f.events={},q){d=0;for(f=q[e].length;d<f;d++)n.event.add(c,e,q[e][d])}ea.hasData(b)&&(j=ea.access(b),g=n.extend({},j),ea.set(c,g))}}function J(b,c,f,
e){c=Mb.apply([],c);var j,g,q,l,m=0,r=b.length,p=r-1,s=c[0],t=n.isFunction(s);if(t||1<r&&"string"==typeof s&&!X.checkClone&&Gc.test(s))return b.each(function(d){var j=b.eq(d);t&&(c[0]=s.call(this,d,j.html()));J(j,c,f,e)});if(r&&(j=H(c,b[0].ownerDocument,!1,b,e),g=j.firstChild,1===j.childNodes.length&&(j=g),g||e)){g=n.map(D(j,"script"),O);for(q=g.length;m<r;m++)l=j,m!==p&&(l=n.clone(l,!0,!0),q&&n.merge(g,D(l,"script"))),f.call(b[m],l,m);if(q){j=g[g.length-1].ownerDocument;n.map(g,Q);for(m=0;m<q;m++)l=
g[m],Lb.test(l.type||"")&&!N.access(l,"globalEval")&&n.contains(j,l)&&(l.src?n._evalUrl&&n._evalUrl(l.src):d(l.textContent.replace(Ic,""),j))}}return b}function B(b,c,d){for(var f=c?n.filter(c,b):b,e=0;null!=(c=f[e]);e++)d||1!==c.nodeType||n.cleanData(D(c)),c.parentNode&&(d&&n.contains(c.ownerDocument,c)&&F(D(c,"script")),c.parentNode.removeChild(c));return b}function K(b,c,d){var f,e,j,g,q=b.style;return d=d||Xa(b),d&&(g=d.getPropertyValue(c)||d[c],""!==g||n.contains(b.ownerDocument,b)||(g=n.style(b,
c)),!X.pixelMarginRight()&&qb.test(g)&&Nb.test(c)&&(f=q.width,e=q.minWidth,j=q.maxWidth,q.minWidth=q.maxWidth=q.width=g,g=d.width,q.width=f,q.minWidth=e,q.maxWidth=j)),void 0!==g?g+"":g}function xa(b,c){return{get:function(){return b()?void delete this.get:(this.get=c).apply(this,arguments)}}}function ya(b){var c=n.cssProps[b];if(!c){var c=n.cssProps,d;a:if(d=b,!(d in Ob)){for(var f=d[0].toUpperCase()+d.slice(1),e=Pb.length;e--;)if(d=Pb[e]+f,d in Ob)break a;d=void 0}c=c[b]=d||b}return c}function za(b,
c,d){return(b=Pa.exec(c))?Math.max(0,b[2]-(d||0))+(b[3]||"px"):c}function ca(b,c,d,f,e){var j=0;for(c=d===(f?"border":"content")?4:"width"===c?1:0;4>c;c+=2)"margin"===d&&(j+=n.css(b,d+Aa[c],!0,e)),f?("content"===d&&(j-=n.css(b,"padding"+Aa[c],!0,e)),"margin"!==d&&(j-=n.css(b,"border"+Aa[c]+"Width",!0,e))):(j+=n.css(b,"padding"+Aa[c],!0,e),"padding"!==d&&(j+=n.css(b,"border"+Aa[c]+"Width",!0,e)));return j}function ga(b,c,d){var f,e=Xa(b),j=K(b,c,e),g="border-box"===n.css(b,"boxSizing",!1,e);return qb.test(j)?
j:(f=g&&(X.boxSizingReliable()||j===b.style[c]),"auto"===j&&(j=b["offset"+c[0].toUpperCase()+c.slice(1)]),j=parseFloat(j)||0,j+ca(b,c,d||(g?"border":"content"),f,e)+"px")}function Z(b,c,d,f,e){return new Z.prototype.init(b,c,d,f,e)}function C(){Ya&&(!1===T.hidden&&b.requestAnimationFrame?b.requestAnimationFrame(C):b.setTimeout(C,n.fx.interval),n.fx.tick())}function A(){return b.setTimeout(function(){Ja=void 0}),Ja=n.now()}function z(b,c){var d,f=0,e={height:b};for(c=c?1:0;4>f;f+=2-c)d=Aa[f],e["margin"+
d]=e["padding"+d]=b;return c&&(e.opacity=e.width=b),e}function E(b,c,d){for(var f,e=(la.tweeners[c]||[]).concat(la.tweeners["*"]),j=0,g=e.length;j<g;j++)if(f=e[j].call(d,c,b))return f}function la(b,c,d){var f,e,j=0,g=la.prefilters.length,q=n.Deferred().always(function(){delete l.elem}),l=function(){if(e)return!1;for(var c=Ja||A(),c=Math.max(0,m.startTime+m.duration-c),d=1-(c/m.duration||0),f=0,j=m.tweens.length;f<j;f++)m.tweens[f].run(d);return q.notifyWith(b,[m,d,c]),1>d&&j?c:(j||q.notifyWith(b,
[m,1,0]),q.resolveWith(b,[m]),!1)},m=q.promise({elem:b,props:n.extend({},c),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},d),originalProperties:c,originalOptions:d,startTime:Ja||A(),duration:d.duration,tweens:[],createTween:function(c,d){var f=n.Tween(b,m.opts,c,d,m.opts.specialEasing[c]||m.opts.easing);return m.tweens.push(f),f},stop:function(c){var d=0,f=c?m.tweens.length:0;if(e)return this;for(e=!0;d<f;d++)m.tweens[d].run(1);return c?(q.notifyWith(b,[m,1,0]),q.resolveWith(b,[m,c])):
q.rejectWith(b,[m,c]),this}});c=m.props;d=m.opts.specialEasing;var r,p,s,t;for(f in c)if(r=n.camelCase(f),p=d[r],s=c[f],Array.isArray(s)&&(p=s[1],s=c[f]=s[0]),f!==r&&(c[r]=s,delete c[f]),t=n.cssHooks[r],t&&"expand"in t)for(f in s=t.expand(s),delete c[r],s)f in c||(c[f]=s[f],d[f]=p);else d[r]=p;for(;j<g;j++)if(f=la.prefilters[j].call(m,b,c,m.opts))return n.isFunction(f.stop)&&(n._queueHooks(m.elem,m.opts.queue).stop=n.proxy(f.stop,f)),f;return n.map(c,E,m),n.isFunction(m.opts.start)&&m.opts.start.call(b,
m),m.progress(m.opts.progress).done(m.opts.done,m.opts.complete).fail(m.opts.fail).always(m.opts.always),n.fx.timer(n.extend(l,{elem:b,anim:m,queue:m.opts.queue})),m}function Ba(b){return(b.match(ha)||[]).join(" ")}function Ca(b){return b.getAttribute&&b.getAttribute("class")||""}function rb(b,c,d,f){var e;if(Array.isArray(c))n.each(c,function(c,e){d||Jc.test(b)?f(b,e):rb(b+"["+("object"==typeof e&&null!=e?c:"")+"]",e,d,f)});else if(d||"object"!==n.type(c))f(b,c);else for(e in c)rb(b+"["+e+"]",c[e],
d,f)}function Qb(b){return function(c,d){"string"!=typeof c&&(d=c,c="*");var f,e=0,j=c.toLowerCase().match(ha)||[];if(n.isFunction(d))for(;f=j[e++];)"+"===f[0]?(f=f.slice(1)||"*",(b[f]=b[f]||[]).unshift(d)):(b[f]=b[f]||[]).push(d)}}function Rb(b,c,d,f){function e(m){var q;return j[m]=!0,n.each(b[m]||[],function(b,V){var m=V(c,d,f);return"string"!=typeof m||g||j[m]?g?!(q=m):void 0:(c.dataTypes.unshift(m),e(m),!1)}),q}var j={},g=b===sb;return e(c.dataTypes[0])||!j["*"]&&e("*")}function tb(b,c){var d,
f,e=n.ajaxSettings.flatOptions||{};for(d in c)void 0!==c[d]&&((e[d]?b:f||(f={}))[d]=c[d]);return f&&n.extend(!0,b,f),b}var Da=[],T=b.document,Kc=Object.getPrototypeOf,Ea=Da.slice,Mb=Da.concat,ub=Da.push,Oa=Da.indexOf,Za={},Sb=Za.toString,$a=Za.hasOwnProperty,Tb=$a.toString,Lc=Tb.call(Object),X={},n=function(b,c){return new n.fn.init(b,c)},Mc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Nc=/^-ms-/,Oc=/-([a-z])/g,Pc=function(b,c){return c.toUpperCase()};n.fn=n.prototype={jquery:"3.2.1",constructor:n,length:0,
toArray:function(){return Ea.call(this)},get:function(b){return null==b?Ea.call(this):0>b?this[b+this.length]:this[b]},pushStack:function(b){b=n.merge(this.constructor(),b);return b.prevObject=this,b},each:function(b){return n.each(this,b)},map:function(b){return this.pushStack(n.map(this,function(c,d){return b.call(c,d,c)}))},slice:function(){return this.pushStack(Ea.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b){var c=this.length;b=
+b+(0>b?c:0);return this.pushStack(0<=b&&b<c?[this[b]]:[])},end:function(){return this.prevObject||this.constructor()},push:ub,sort:Da.sort,splice:Da.splice};n.extend=n.fn.extend=function(){var b,c,d,f,e,j,g=arguments[0]||{},m=1,q=arguments.length,l=!1;"boolean"==typeof g&&(l=g,g=arguments[m]||{},m++);"object"==typeof g||n.isFunction(g)||(g={});for(m===q&&(g=this,m--);m<q;m++)if(null!=(b=arguments[m]))for(c in b)d=g[c],f=b[c],g!==f&&(l&&f&&(n.isPlainObject(f)||(e=Array.isArray(f)))?(e?(e=!1,j=d&&
Array.isArray(d)?d:[]):j=d&&n.isPlainObject(d)?d:{},g[c]=n.extend(l,j,f)):void 0!==f&&(g[c]=f));return g};n.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw Error(b);},noop:function(){},isFunction:function(b){return"function"===n.type(b)},isWindow:function(b){return null!=b&&b===b.window},isNumeric:function(b){var c=n.type(b);return("number"===c||"string"===c)&&!isNaN(b-parseFloat(b))},isPlainObject:function(b){var c,d;return!(!b||"[object Object]"!==
Sb.call(b))&&(!(c=Kc(b))||(d=$a.call(c,"constructor")&&c.constructor,"function"==typeof d&&Tb.call(d)===Lc))},isEmptyObject:function(b){for(var c in b)return!1;return!0},type:function(b){return null==b?b+"":"object"==typeof b||"function"==typeof b?Za[Sb.call(b)]||"object":typeof b},globalEval:function(b){d(b)},camelCase:function(b){return b.replace(Nc,"ms-").replace(Oc,Pc)},each:function(b,c){var d,f=0;if(e(b))for(d=b.length;f<d&&!1!==c.call(b[f],f,b[f]);f++);else for(f in b)if(!1===c.call(b[f],f,
b[f]))break;return b},trim:function(b){return null==b?"":(b+"").replace(Mc,"")},makeArray:function(b,c){var d=c||[];return null!=b&&(e(Object(b))?n.merge(d,"string"==typeof b?[b]:b):ub.call(d,b)),d},inArray:function(b,c,d){return null==c?-1:Oa.call(c,b,d)},merge:function(b,c){for(var d=+c.length,f=0,e=b.length;f<d;f++)b[e++]=c[f];return b.length=e,b},grep:function(b,c,d){for(var f=[],e=0,j=b.length,g=!d;e<j;e++)d=!c(b[e],e),d!==g&&f.push(b[e]);return f},map:function(b,c,d){var f,j,g=0,m=[];if(e(b))for(f=
b.length;g<f;g++)j=c(b[g],g,d),null!=j&&m.push(j);else for(g in b)j=c(b[g],g,d),null!=j&&m.push(j);return Mb.apply([],m)},guid:1,proxy:function(b,c){var d,f,e;if("string"==typeof c&&(d=b[c],c=b,b=d),n.isFunction(b))return f=Ea.call(arguments,2),e=function(){return b.apply(c||this,f.concat(Ea.call(arguments)))},e.guid=b.guid=b.guid||n.guid++,e},now:Date.now,support:X});"function"==typeof Symbol&&(n.fn[Symbol.iterator]=Da[Symbol.iterator]);n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),
function(b,c){Za["[object "+c+"]"]=c.toLowerCase()});var ta,vb=b,W=function(b,c,d,f){var e,j,g,m,q,l=c&&c.ownerDocument,r=c?c.nodeType:9;if(d=d||[],"string"!=typeof b||!b||1!==r&&9!==r&&11!==r)return d;if(!f&&((c?c.ownerDocument||c:ia)!==U&&ua(c),c=c||U,ja)){if(11!==r&&(m=Qc.exec(b)))if(e=m[1])if(9===r){if(!(j=c.getElementById(e)))return d;if(j.id===e)return d.push(j),d}else{if(l&&(j=l.getElementById(e))&&Qa(c,j)&&j.id===e)return d.push(j),d}else{if(m[2])return va.apply(d,c.getElementsByTagName(b)),
d;if((e=m[3])&&aa.getElementsByClassName&&c.getElementsByClassName)return va.apply(d,c.getElementsByClassName(e)),d}if(aa.qsa&&!ab[b+" "]&&(!da||!da.test(b))){if(1!==r)l=c,q=b;else if("object"!==c.nodeName.toLowerCase()){(g=c.getAttribute("id"))?g=g.replace(Ub,Vb):c.setAttribute("id",g=Y);j=Ra(b);for(e=j.length;e--;)j[e]="#"+g+" "+bb(j[e]);q=j.join(",");l=wb.test(b)&&xb(c.parentNode)||c}if(q)try{return va.apply(d,l.querySelectorAll(q)),d}catch(p){}finally{g===Y&&c.removeAttribute("id")}}}return Wb(b.replace(cb,
"$1"),c,d,f)},yb=function(){function b(d,f){return c.push(d+" ")>R.cacheLength&&delete b[c.shift()],b[d+" "]=f}var c=[];return b},ma=function(b){return b[Y]=!0,b},oa=function(b){var c=U.createElement("fieldset");try{return!!b(c)}catch(d){return!1}finally{c.parentNode&&c.parentNode.removeChild(c)}},zb=function(b,c){for(var d=b.split("|"),f=d.length;f--;)R.attrHandle[d[f]]=c},Xb=function(b,c){var d=c&&b,f=d&&1===b.nodeType&&1===c.nodeType&&b.sourceIndex-c.sourceIndex;if(f)return f;if(d)for(;d=d.nextSibling;)if(d===
c)return-1;return b?1:-1},Rc=function(b){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===b}},Sc=function(b){return function(c){var d=c.nodeName.toLowerCase();return("input"===d||"button"===d)&&c.type===b}},Yb=function(b){return function(c){return"form"in c?c.parentNode&&!1===c.disabled?"label"in c?"label"in c.parentNode?c.parentNode.disabled===b:c.disabled===b:c.isDisabled===b||c.isDisabled!==!b&&Tc(c)===b:c.disabled===b:"label"in c&&c.disabled===b}},Fa=function(b){return ma(function(c){return c=
+c,ma(function(d,f){for(var e,j=b([],d.length,c),g=j.length;g--;)d[e=j[g]]&&(d[e]=!(f[e]=d[e]))})})},xb=function(b){return b&&"undefined"!=typeof b.getElementsByTagName&&b},Zb=function(){},bb=function(b){for(var c=0,d=b.length,f="";c<d;c++)f+=b[c].value;return f},db=function(b,c,d){var f=c.dir,e=c.next,j=e||f,g=d&&"parentNode"===j,m=Uc++;return c.first?function(c,d,e){for(;c=c[f];)if(1===c.nodeType||g)return b(c,d,e);return!1}:function(c,d,q){var S,l,r,ba=[pa,m];if(q)for(;c=c[f];){if((1===c.nodeType||
g)&&b(c,d,q))return!0}else for(;c=c[f];)if(1===c.nodeType||g)if(r=c[Y]||(c[Y]={}),l=r[c.uniqueID]||(r[c.uniqueID]={}),e&&e===c.nodeName.toLowerCase())c=c[f]||c;else{if((S=l[j])&&S[0]===pa&&S[1]===m)return ba[2]=S[2];if(l[j]=ba,ba[2]=b(c,d,q))return!0}return!1}},Ab=function(b){return 1<b.length?function(c,d,f){for(var e=b.length;e--;)if(!b[e](c,d,f))return!1;return!0}:b[0]},eb=function(b,c,d,f,e){for(var j,g=[],m=0,q=b.length,l=null!=c;m<q;m++)(j=b[m])&&(d&&!d(j,f,e)||(g.push(j),l&&c.push(m)));return g},
Bb=function(b,c,d,f,e,j){return f&&!f[Y]&&(f=Bb(f)),e&&!e[Y]&&(e=Bb(e,j)),ma(function(j,g,m,q){var l,r,p=[],n=[],s=g.length,t;if(!(t=j)){t=c||"*";for(var u=m.nodeType?[m]:m,v=[],pb=0,I=u.length;pb<I;pb++)W(t,u[pb],v);t=v}t=!b||!j&&c?t:eb(t,p,b,m,q);u=d?e||(j?b:s||f)?[]:g:t;if(d&&d(t,u,m,q),f){l=eb(u,n);f(l,[],m,q);for(m=l.length;m--;)(r=l[m])&&(u[n[m]]=!(t[n[m]]=r))}if(j){if(e||b){if(e){l=[];for(m=u.length;m--;)(r=u[m])&&l.push(t[m]=r);e(null,u=[],l,q)}for(m=u.length;m--;)(r=u[m])&&-1<(l=e?Ga(j,r):
p[m])&&(j[l]=!(g[l]=r))}}else u=eb(u===g?u.splice(s,u.length):u),e?e(null,g,u,q):va.apply(g,u)})},Cb=function(b){var c,d,f,e=b.length,j=R.relative[b[0].type];d=j||R.relative[" "];for(var g=j?1:0,m=db(function(b){return b===c},d,!0),q=db(function(b){return-1<Ga(c,b)},d,!0),l=[function(b,d,f){b=!j&&(f||d!==fb)||((c=d).nodeType?m(b,d,f):q(b,d,f));return c=null,b}];g<e;g++)if(d=R.relative[b[g].type])l=[db(Ab(l),d)];else{if(d=R.filter[b[g].type].apply(null,b[g].matches),d[Y]){for(f=++g;f<e&&!R.relative[b[f].type];f++);
return Bb(1<g&&Ab(l),1<g&&bb(b.slice(0,g-1).concat({value:" "===b[g-2].type?"*":""})).replace(cb,"$1"),d,g<f&&Cb(b.slice(g,f)),f<e&&Cb(b=b.slice(f)),f<e&&bb(b))}l.push(d)}return Ab(l)},Ka,aa,R,gb,$b,Ra,Db,Wb,fb,wa,La,ua,U,ka,ja,da,Ha,hb,Qa,Y="sizzle"+1*new Date,ia=vb.document,pa=0,Uc=0,ac=yb(),bc=yb(),ab=yb(),Eb=function(b,c){return b===c&&(La=!0),0},Vc={}.hasOwnProperty,Ia=[],Wc=Ia.pop,Xc=Ia.push,va=Ia.push,cc=Ia.slice,Ga=function(b,c){for(var d=0,f=b.length;d<f;d++)if(b[d]===c)return d;return-1},
Yc=/[\x20\t\r\n\f]+/g,cb=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Zc=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,$c=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ad=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,bd=RegExp(":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
cd=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,ib={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\]"),PSEUDO:RegExp("^:((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},dd=/^(?:input|select|textarea|button)$/i,ed=/^h\d$/i,Sa=/^[^{]+\{\s*\[native \w/,Qc=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,wb=/[+~]/,qa=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,ra=function(b,c,d){b="0x"+c-65536;return b!==b||d?c:0>b?String.fromCharCode(b+65536):String.fromCharCode(b>>10|55296,1023&b|56320)},Ub=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Vb=function(b,c){return c?"\x00"===b?"\ufffd":b.slice(0,-1)+"\\"+b.charCodeAt(b.length-1).toString(16)+" ":"\\"+b},dc=function(){ua()},
Tc=db(function(b){return!0===b.disabled&&("form"in b||"label"in b)},{dir:"parentNode",next:"legend"});try{va.apply(Ia=cc.call(ia.childNodes),ia.childNodes),Ia[ia.childNodes.length].nodeType}catch(Hd){va={apply:Ia.length?function(b,c){Xc.apply(b,cc.call(c))}:function(b,c){for(var d=b.length,f=0;b[d++]=c[f++];);b.length=d-1}}}aa=W.support={};$b=W.isXML=function(b){b=b&&(b.ownerDocument||b).documentElement;return!!b&&"HTML"!==b.nodeName};ua=W.setDocument=function(b){var c,d;b=b?b.ownerDocument||b:ia;
return b!==U&&9===b.nodeType&&b.documentElement?(U=b,ka=U.documentElement,ja=!$b(U),ia!==U&&(d=U.defaultView)&&d.top!==d&&(d.addEventListener?d.addEventListener("unload",dc,!1):d.attachEvent&&d.attachEvent("onunload",dc)),aa.attributes=oa(function(b){return b.className="i",!b.getAttribute("className")}),aa.getElementsByTagName=oa(function(b){return b.appendChild(U.createComment("")),!b.getElementsByTagName("*").length}),aa.getElementsByClassName=Sa.test(U.getElementsByClassName),aa.getById=oa(function(b){return ka.appendChild(b).id=
Y,!U.getElementsByName||!U.getElementsByName(Y).length}),aa.getById?(R.filter.ID=function(b){var c=b.replace(qa,ra);return function(b){return b.getAttribute("id")===c}},R.find.ID=function(b,c){if("undefined"!=typeof c.getElementById&&ja){var d=c.getElementById(b);return d?[d]:[]}}):(R.filter.ID=function(b){var c=b.replace(qa,ra);return function(b){return(b="undefined"!=typeof b.getAttributeNode&&b.getAttributeNode("id"))&&b.value===c}},R.find.ID=function(b,c){if("undefined"!=typeof c.getElementById&&
ja){var d,f,e,j=c.getElementById(b);if(j){if(d=j.getAttributeNode("id"),d&&d.value===b)return[j];e=c.getElementsByName(b);for(f=0;j=e[f++];)if(d=j.getAttributeNode("id"),d&&d.value===b)return[j]}return[]}}),R.find.TAG=aa.getElementsByTagName?function(b,c){return"undefined"!=typeof c.getElementsByTagName?c.getElementsByTagName(b):aa.qsa?c.querySelectorAll(b):void 0}:function(b,c){var d,f=[],e=0,j=c.getElementsByTagName(b);if("*"===b){for(;d=j[e++];)1===d.nodeType&&f.push(d);return f}return j},R.find.CLASS=
aa.getElementsByClassName&&function(b,c){if("undefined"!=typeof c.getElementsByClassName&&ja)return c.getElementsByClassName(b)},Ha=[],da=[],(aa.qsa=Sa.test(U.querySelectorAll))&&(oa(function(b){ka.appendChild(b).innerHTML="<a id='"+Y+"'></a><select id='"+Y+"-\r\\' msallowcapture=''><option selected=''></option></select>";b.querySelectorAll("[msallowcapture^='']").length&&da.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");b.querySelectorAll("[selected]").length||da.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
b.querySelectorAll("[id~="+Y+"-]").length||da.push("~=");b.querySelectorAll(":checked").length||da.push(":checked");b.querySelectorAll("a#"+Y+"+*").length||da.push(".#.+[+~]")}),oa(function(b){b.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var c=U.createElement("input");c.setAttribute("type","hidden");b.appendChild(c).setAttribute("name","D");b.querySelectorAll("[name=d]").length&&da.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==b.querySelectorAll(":enabled").length&&
da.push(":enabled",":disabled");ka.appendChild(b).disabled=!0;2!==b.querySelectorAll(":disabled").length&&da.push(":enabled",":disabled");b.querySelectorAll("*,:x");da.push(",.*:")})),(aa.matchesSelector=Sa.test(hb=ka.matches||ka.webkitMatchesSelector||ka.mozMatchesSelector||ka.oMatchesSelector||ka.msMatchesSelector))&&oa(function(b){aa.disconnectedMatch=hb.call(b,"*");hb.call(b,"[s!='']:x");Ha.push("!=",":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
da=da.length&&RegExp(da.join("|")),Ha=Ha.length&&RegExp(Ha.join("|")),c=Sa.test(ka.compareDocumentPosition),Qa=c||Sa.test(ka.contains)?function(b,c){var d=9===b.nodeType?b.documentElement:b,f=c&&c.parentNode;return b===f||!(!f||1!==f.nodeType||!(d.contains?d.contains(f):b.compareDocumentPosition&&16&b.compareDocumentPosition(f)))}:function(b,c){if(c)for(;c=c.parentNode;)if(c===b)return!0;return!1},Eb=c?function(b,c){if(b===c)return La=!0,0;var d=!b.compareDocumentPosition-!c.compareDocumentPosition;
return d?d:(d=(b.ownerDocument||b)===(c.ownerDocument||c)?b.compareDocumentPosition(c):1,1&d||!aa.sortDetached&&c.compareDocumentPosition(b)===d?b===U||b.ownerDocument===ia&&Qa(ia,b)?-1:c===U||c.ownerDocument===ia&&Qa(ia,c)?1:wa?Ga(wa,b)-Ga(wa,c):0:4&d?-1:1)}:function(b,c){if(b===c)return La=!0,0;var d,f=0;d=b.parentNode;var e=c.parentNode,j=[b],V=[c];if(!d||!e)return b===U?-1:c===U?1:d?-1:e?1:wa?Ga(wa,b)-Ga(wa,c):0;if(d===e)return Xb(b,c);for(d=b;d=d.parentNode;)j.unshift(d);for(d=c;d=d.parentNode;)V.unshift(d);
for(;j[f]===V[f];)f++;return f?Xb(j[f],V[f]):j[f]===ia?-1:V[f]===ia?1:0},U):U};W.matches=function(b,c){return W(b,null,null,c)};W.matchesSelector=function(b,c){if((b.ownerDocument||b)!==U&&ua(b),c=c.replace(ad,"='$1']"),aa.matchesSelector&&ja&&!ab[c+" "]&&(!Ha||!Ha.test(c))&&(!da||!da.test(c)))try{var d=hb.call(b,c);if(d||aa.disconnectedMatch||b.document&&11!==b.document.nodeType)return d}catch(f){}return 0<W(c,U,null,[b]).length};W.contains=function(b,c){return(b.ownerDocument||b)!==U&&ua(b),Qa(b,
c)};W.attr=function(b,c){(b.ownerDocument||b)!==U&&ua(b);var d=R.attrHandle[c.toLowerCase()],d=d&&Vc.call(R.attrHandle,c.toLowerCase())?d(b,c,!ja):void 0;return void 0!==d?d:aa.attributes||!ja?b.getAttribute(c):(d=b.getAttributeNode(c))&&d.specified?d.value:null};W.escape=function(b){return(b+"").replace(Ub,Vb)};W.error=function(b){throw Error("Syntax error, unrecognized expression: "+b);};W.uniqueSort=function(b){var c,d=[],f=0,e=0;if(La=!aa.detectDuplicates,wa=!aa.sortStable&&b.slice(0),b.sort(Eb),
La){for(;c=b[e++];)c===b[e]&&(f=d.push(e));for(;f--;)b.splice(d[f],1)}return wa=null,b};gb=W.getText=function(b){var c,d="",f=0;if(c=b.nodeType)if(1===c||9===c||11===c){if("string"==typeof b.textContent)return b.textContent;for(b=b.firstChild;b;b=b.nextSibling)d+=gb(b)}else{if(3===c||4===c)return b.nodeValue}else for(;c=b[f++];)d+=gb(c);return d};R=W.selectors={cacheLength:50,createPseudo:ma,match:ib,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",
first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(b){return b[1]=b[1].replace(qa,ra),b[3]=(b[3]||b[4]||b[5]||"").replace(qa,ra),"~="===b[2]&&(b[3]=" "+b[3]+" "),b.slice(0,4)},CHILD:function(b){return b[1]=b[1].toLowerCase(),"nth"===b[1].slice(0,3)?(b[3]||W.error(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*("even"===b[3]||"odd"===b[3])),b[5]=+(b[7]+b[8]||"odd"===b[3])):b[3]&&W.error(b[0]),b},PSEUDO:function(b){var c,d=!b[6]&&b[2];return ib.CHILD.test(b[0])?null:(b[3]?b[2]=b[4]||b[5]||"":d&&bd.test(d)&&
(c=Ra(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(b[0]=b[0].slice(0,c),b[2]=d.slice(0,c)),b.slice(0,3))}},filter:{TAG:function(b){var c=b.replace(qa,ra).toLowerCase();return"*"===b?function(){return!0}:function(b){return b.nodeName&&b.nodeName.toLowerCase()===c}},CLASS:function(b){var c=ac[b+" "];return c||(c=RegExp("(^|[\\x20\\t\\r\\n\\f])"+b+"([\\x20\\t\\r\\n\\f]|$)"))&&ac(b,function(b){return c.test("string"==typeof b.className&&b.className||"undefined"!=typeof b.getAttribute&&b.getAttribute("class")||
"")})},ATTR:function(b,c,d){return function(f){f=W.attr(f,b);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&-1<f.indexOf(d):"$="===c?d&&f.slice(-d.length)===d:"~="===c?-1<(" "+f.replace(Yc," ")+" ").indexOf(d):"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(b,c,d,f,e){var j="nth"!==b.slice(0,3),g="last"!==b.slice(-4),m="of-type"===c;return 1===f&&0===e?function(b){return!!b.parentNode}:function(c,d,q){var l,S,r,p,n,s;d=j!==
g?"nextSibling":"previousSibling";var ba=c.parentNode,t=m&&c.nodeName.toLowerCase();q=!q&&!m;var u=!1;if(ba){if(j){for(;d;){for(p=c;p=p[d];)if(m?p.nodeName.toLowerCase()===t:1===p.nodeType)return!1;s=d="only"===b&&!s&&"nextSibling"}return!0}if(s=[g?ba.firstChild:ba.lastChild],g&&q){p=ba;r=p[Y]||(p[Y]={});S=r[p.uniqueID]||(r[p.uniqueID]={});l=S[b]||[];u=(n=l[0]===pa&&l[1])&&l[2];for(p=n&&ba.childNodes[n];p=++n&&p&&p[d]||(u=n=0)||s.pop();)if(1===p.nodeType&&++u&&p===c){S[b]=[pa,n,u];break}}else if(q&&
(p=c,r=p[Y]||(p[Y]={}),S=r[p.uniqueID]||(r[p.uniqueID]={}),l=S[b]||[],n=l[0]===pa&&l[1],u=n),!1===u)for(;(p=++n&&p&&p[d]||(u=n=0)||s.pop())&&(!(m?p.nodeName.toLowerCase()===t:1===p.nodeType)||!++u||!(q&&(r=p[Y]||(p[Y]={}),S=r[p.uniqueID]||(r[p.uniqueID]={}),S[b]=[pa,u]),p===c)););return u-=e,u===f||0===u%f&&0<=u/f}}},PSEUDO:function(b,c){var d,f=R.pseudos[b]||R.setFilters[b.toLowerCase()]||W.error("unsupported pseudo: "+b);return f[Y]?f(c):1<f.length?(d=[b,b,"",c],R.setFilters.hasOwnProperty(b.toLowerCase())?
ma(function(b,d){for(var e,j=f(b,c),g=j.length;g--;)e=Ga(b,j[g]),b[e]=!(d[e]=j[g])}):function(b){return f(b,0,d)}):f}},pseudos:{not:ma(function(b){var c=[],d=[],f=Db(b.replace(cb,"$1"));return f[Y]?ma(function(b,c,d,e){var j;d=f(b,null,e,[]);for(e=b.length;e--;)(j=d[e])&&(b[e]=!(c[e]=j))}):function(b,e,j){return c[0]=b,f(c,null,j,d),c[0]=null,!d.pop()}}),has:ma(function(b){return function(c){return 0<W(b,c).length}}),contains:ma(function(b){return b=b.replace(qa,ra),function(c){return-1<(c.textContent||
c.innerText||gb(c)).indexOf(b)}}),lang:ma(function(b){return cd.test(b||"")||W.error("unsupported lang: "+b),b=b.replace(qa,ra).toLowerCase(),function(c){var d;do if(d=ja?c.lang:c.getAttribute("xml:lang")||c.getAttribute("lang"))return d=d.toLowerCase(),d===b||0===d.indexOf(b+"-");while((c=c.parentNode)&&1===c.nodeType);return!1}}),target:function(b){var c=vb.location&&vb.location.hash;return c&&c.slice(1)===b.id},root:function(b){return b===ka},focus:function(b){return b===U.activeElement&&(!U.hasFocus||
U.hasFocus())&&!(!b.type&&!b.href&&!~b.tabIndex)},enabled:Yb(!1),disabled:Yb(!0),checked:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&!!b.checked||"option"===c&&!!b.selected},selected:function(b){return b.parentNode&&b.parentNode.selectedIndex,!0===b.selected},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling)if(6>b.nodeType)return!1;return!0},parent:function(b){return!R.pseudos.empty(b)},header:function(b){return ed.test(b.nodeName)},input:function(b){return dd.test(b.nodeName)},
button:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&"button"===b.type||"button"===c},text:function(b){var c;return"input"===b.nodeName.toLowerCase()&&"text"===b.type&&(null==(c=b.getAttribute("type"))||"text"===c.toLowerCase())},first:Fa(function(){return[0]}),last:Fa(function(b,c){return[c-1]}),eq:Fa(function(b,c,d){return[0>d?d+c:d]}),even:Fa(function(b,c){for(var d=0;d<c;d+=2)b.push(d);return b}),odd:Fa(function(b,c){for(var d=1;d<c;d+=2)b.push(d);return b}),lt:Fa(function(b,c,
d){for(c=0>d?d+c:d;0<=--c;)b.push(c);return b}),gt:Fa(function(b,c,d){for(d=0>d?d+c:d;++d<c;)b.push(d);return b})}};R.pseudos.nth=R.pseudos.eq;for(Ka in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})R.pseudos[Ka]=Rc(Ka);for(Ka in{submit:!0,reset:!0})R.pseudos[Ka]=Sc(Ka);Zb.prototype=R.filters=R.pseudos;R.setFilters=new Zb;Ra=W.tokenize=function(b,c){var d,f,e,j,g,m,q;if(g=bc[b+" "])return c?0:g.slice(0);g=b;m=[];for(q=R.preFilter;g;){d&&!(f=Zc.exec(g))||(f&&(g=g.slice(f[0].length)||g),m.push(e=
[]));d=!1;(f=$c.exec(g))&&(d=f.shift(),e.push({value:d,type:f[0].replace(cb," ")}),g=g.slice(d.length));for(j in R.filter)!(f=ib[j].exec(g))||q[j]&&!(f=q[j](f))||(d=f.shift(),e.push({value:d,type:j,matches:f}),g=g.slice(d.length));if(!d)break}return c?g.length:g?W.error(b):bc(b,m).slice(0)};ta=(Db=W.compile=function(b,c){var d,f=[],e=[],j=ab[b+" "];if(!j){c||(c=Ra(b));for(d=c.length;d--;)j=Cb(c[d]),j[Y]?f.push(j):e.push(j);d=ab;var g=0<f.length,m=0<e.length,j=function(b,c,d,j,V){var q,l,r,S=0,p="0",
n=b&&[],s=[],u=fb,ba=b||m&&R.find.TAG("*",V),t=pa+=null==u?1:Math.random()||0.1,v=ba.length;for(V&&(fb=c===U||c||V);p!==v&&null!=(q=ba[p]);p++){if(m&&q){l=0;for(c||q.ownerDocument===U||(ua(q),d=!ja);r=e[l++];)if(r(q,c||U,d)){j.push(q);break}V&&(pa=t)}g&&((q=!r&&q)&&S--,b&&n.push(q))}if(S+=p,g&&p!==S){for(l=0;r=f[l++];)r(n,s,c,d);if(b){if(0<S)for(;p--;)n[p]||s[p]||(s[p]=Wc.call(j));s=eb(s)}va.apply(j,s);V&&!b&&0<s.length&&1<S+f.length&&W.uniqueSort(j)}return V&&(pa=t,fb=u),n},j=g?ma(j):j,j=d(b,j);
j.selector=b}return j},Wb=W.select=function(b,c,d,f){var e,j,g,m,q,l="function"==typeof b&&b,r=!f&&Ra(b=l.selector||b);if(d=d||[],1===r.length){if(j=r[0]=r[0].slice(0),2<j.length&&"ID"===(g=j[0]).type&&9===c.nodeType&&ja&&R.relative[j[1].type]){if(c=(R.find.ID(g.matches[0].replace(qa,ra),c)||[])[0],!c)return d;l&&(c=c.parentNode);b=b.slice(j.shift().value.length)}for(e=ib.needsContext.test(b)?0:j.length;e--&&!(g=j[e],R.relative[m=g.type]);)if((q=R.find[m])&&(f=q(g.matches[0].replace(qa,ra),wb.test(j[0].type)&&
xb(c.parentNode)||c))){if(j.splice(e,1),b=f.length&&bb(j),!b)return va.apply(d,f),d;break}}return(l||Db(b,r))(f,c,!ja,d,!c||wb.test(b)&&xb(c.parentNode)||c),d},aa.sortStable=Y.split("").sort(Eb).join("")===Y,aa.detectDuplicates=!!La,ua(),aa.sortDetached=oa(function(b){return 1&b.compareDocumentPosition(U.createElement("fieldset"))}),oa(function(b){return b.innerHTML="<a href='#'></a>","#"===b.firstChild.getAttribute("href")})||zb("type|href|height|width",function(b,c,d){if(!d)return b.getAttribute(c,
"type"===c.toLowerCase()?1:2)}),aa.attributes&&oa(function(b){return b.innerHTML="<input/>",b.firstChild.setAttribute("value",""),""===b.firstChild.getAttribute("value")})||zb("value",function(b,c,d){if(!d&&"input"===b.nodeName.toLowerCase())return b.defaultValue}),oa(function(b){return null==b.getAttribute("disabled")})||zb("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(b,c,d){var f;if(!d)return!0===b[c]?c.toLowerCase():
(f=b.getAttributeNode(c))&&f.specified?f.value:null}),W);n.find=ta;n.expr=ta.selectors;n.expr[":"]=n.expr.pseudos;n.uniqueSort=n.unique=ta.uniqueSort;n.text=ta.getText;n.isXMLDoc=ta.isXML;n.contains=ta.contains;n.escapeSelector=ta.escape;var Ma=function(b,c,d){for(var f=[],e=void 0!==d;(b=b[c])&&9!==b.nodeType;)if(1===b.nodeType){if(e&&n(b).is(d))break;f.push(b)}return f},ec=function(b,c){for(var d=[];b;b=b.nextSibling)1===b.nodeType&&b!==c&&d.push(b);return d},fc=n.expr.match.needsContext,gc=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,
Bc=/^.[^:#\[\.,]*$/;n.filter=function(b,c,d){var f=c[0];return d&&(b=":not("+b+")"),1===c.length&&1===f.nodeType?n.find.matchesSelector(f,b)?[f]:[]:n.find.matches(b,n.grep(c,function(b){return 1===b.nodeType}))};n.fn.extend({find:function(b){var c,d,f=this.length,e=this;if("string"!=typeof b)return this.pushStack(n(b).filter(function(){for(c=0;c<f;c++)if(n.contains(e[c],this))return!0}));d=this.pushStack([]);for(c=0;c<f;c++)n.find(b,e[c],d);return 1<f?n.uniqueSort(d):d},filter:function(b){return this.pushStack(g(this,
b||[],!1))},not:function(b){return this.pushStack(g(this,b||[],!0))},is:function(b){return!!g(this,"string"==typeof b&&fc.test(b)?n(b):b||[],!1).length}});var hc,fd=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(n.fn.init=function(b,c,d){var f,e;if(!b)return this;if(d=d||hc,"string"==typeof b){if(f="<"===b[0]&&">"===b[b.length-1]&&3<=b.length?[null,b,null]:fd.exec(b),!f||!f[1]&&c)return!c||c.jquery?(c||d).find(b):this.constructor(c).find(b);if(f[1]){if(c=c instanceof n?c[0]:c,n.merge(this,n.parseHTML(f[1],
c&&c.nodeType?c.ownerDocument||c:T,!0)),gc.test(f[1])&&n.isPlainObject(c))for(f in c)n.isFunction(this[f])?this[f](c[f]):this.attr(f,c[f]);return this}return e=T.getElementById(f[2]),e&&(this[0]=e,this.length=1),this}return b.nodeType?(this[0]=b,this.length=1,this):n.isFunction(b)?void 0!==d.ready?d.ready(b):b(n):n.makeArray(b,this)}).prototype=n.fn;hc=n(T);var gd=/^(?:parents|prev(?:Until|All))/,hd={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(b){var c=n(b,this),d=c.length;
return this.filter(function(){for(var b=0;b<d;b++)if(n.contains(this,c[b]))return!0})},closest:function(b,c){var d,f=0,e=this.length,j=[],g="string"!=typeof b&&n(b);if(!fc.test(b))for(;f<e;f++)for(d=this[f];d&&d!==c;d=d.parentNode)if(11>d.nodeType&&(g?-1<g.index(d):1===d.nodeType&&n.find.matchesSelector(d,b))){j.push(d);break}return this.pushStack(1<j.length?n.uniqueSort(j):j)},index:function(b){return b?"string"==typeof b?Oa.call(n(b),this[0]):Oa.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?
this.first().prevAll().length:-1},add:function(b,c){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(b,c))))},addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});n.each({parent:function(b){return(b=b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return Ma(b,"parentNode")},parentsUntil:function(b,c,d){return Ma(b,"parentNode",d)},next:function(b){return l(b,"nextSibling")},prev:function(b){return l(b,"previousSibling")},nextAll:function(b){return Ma(b,
"nextSibling")},prevAll:function(b){return Ma(b,"previousSibling")},nextUntil:function(b,c,d){return Ma(b,"nextSibling",d)},prevUntil:function(b,c,d){return Ma(b,"previousSibling",d)},siblings:function(b){return ec((b.parentNode||{}).firstChild,b)},children:function(b){return ec(b.firstChild)},contents:function(b){return f(b,"iframe")?b.contentDocument:(f(b,"template")&&(b=b.content||b),n.merge([],b.childNodes))}},function(b,c){n.fn[b]=function(d,f){var e=n.map(this,c,d);return"Until"!==b.slice(-5)&&
(f=d),f&&"string"==typeof f&&(e=n.filter(f,e)),1<this.length&&(hd[b]||n.uniqueSort(e),gd.test(b)&&e.reverse()),this.pushStack(e)}});var ha=/[^\x20\t\r\n\f]+/g;n.Callbacks=function(b){var c;if("string"==typeof b){var d={};c=(n.each(b.match(ha)||[],function(b,c){d[c]=!0}),d)}else c=n.extend({},b);b=c;var f,e,j,g,m=[],q=[],l=-1,r=function(){g=g||b.once;for(j=f=!0;q.length;l=-1)for(e=q.shift();++l<m.length;)!1===m[l].apply(e[0],e[1])&&b.stopOnFalse&&(l=m.length,e=!1);b.memory||(e=!1);f=!1;g&&(m=e?[]:
"")},p={add:function(){return m&&(e&&!f&&(l=m.length-1,q.push(e)),function Hc(c){n.each(c,function(c,d){n.isFunction(d)?b.unique&&p.has(d)||m.push(d):d&&d.length&&"string"!==n.type(d)&&Hc(d)})}(arguments),e&&!f&&r()),this},remove:function(){return n.each(arguments,function(b,c){for(var d;-1<(d=n.inArray(c,m,d));)m.splice(d,1),d<=l&&l--}),this},has:function(b){return b?-1<n.inArray(b,m):0<m.length},empty:function(){return m&&(m=[]),this},disable:function(){return g=q=[],m=e="",this},disabled:function(){return!m},
lock:function(){return g=q=[],e||f||(m=e=""),this},locked:function(){return!!g},fireWith:function(b,c){return g||(c=c||[],c=[b,c.slice?c.slice():c],q.push(c),f||r()),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!j}};return p};n.extend({Deferred:function(c){var d=[["notify","progress",n.Callbacks("memory"),n.Callbacks("memory"),2],["resolve","done",n.Callbacks("once memory"),n.Callbacks("once memory"),0,"resolved"],["reject","fail",n.Callbacks("once memory"),
n.Callbacks("once memory"),1,"rejected"]],f="pending",e={state:function(){return f},always:function(){return g.done(arguments).fail(arguments),this},"catch":function(b){return e.then(null,b)},pipe:function(){var b=arguments;return n.Deferred(function(c){n.each(d,function(d,f){var e=n.isFunction(b[f[4]])&&b[f[4]];g[f[1]](function(){var b=e&&e.apply(this,arguments);b&&n.isFunction(b.promise)?b.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this,e?[b]:arguments)})});b=null}).promise()},
then:function(c,f,e){function g(c,d,f,e){return function(){var q=this,l=arguments,V=function(){var b,V;if(!(c<m)){if(b=f.apply(q,l),b===d.promise())throw new TypeError("Thenable self-resolution");V=b&&("object"==typeof b||"function"==typeof b)&&b.then;n.isFunction(V)?e?V.call(b,g(m,d,p,e),g(m,d,j,e)):(m++,V.call(b,g(m,d,p,e),g(m,d,j,e),g(m,d,p,d.notifyWith))):(f!==p&&(q=void 0,l=[b]),(e||d.resolveWith)(q,l))}},r=e?V:function(){try{V()}catch(b){n.Deferred.exceptionHook&&n.Deferred.exceptionHook(b,
r.stackTrace),c+1>=m&&(f!==j&&(q=void 0,l=[b]),d.rejectWith(q,l))}};c?r():(n.Deferred.getStackHook&&(r.stackTrace=n.Deferred.getStackHook()),b.setTimeout(r))}}var m=0;return n.Deferred(function(b){d[0][3].add(g(0,b,n.isFunction(e)?e:p,b.notifyWith));d[1][3].add(g(0,b,n.isFunction(c)?c:p));d[2][3].add(g(0,b,n.isFunction(f)?f:j))}).promise()},promise:function(b){return null!=b?n.extend(b,e):e}},g={};return n.each(d,function(b,c){var j=c[2],m=c[5];e[c[1]]=j.add;m&&j.add(function(){f=m},d[3-b][2].disable,
d[0][2].lock);j.add(c[3].fire);g[c[0]]=function(){return g[c[0]+"With"](this===g?void 0:this,arguments),this};g[c[0]+"With"]=j.fireWith}),e.promise(g),c&&c.call(g,g),g},when:function(b){var c=arguments.length,d=c,f=Array(d),e=Ea.call(arguments),j=n.Deferred(),g=function(b){return function(d){f[b]=this;e[b]=1<arguments.length?Ea.call(arguments):d;--c||j.resolveWith(f,e)}};if(1>=c&&(q(b,j.done(g(d)).resolve,j.reject,!c),"pending"===j.state()||n.isFunction(e[d]&&e[d].then)))return j.then();for(;d--;)q(e[d],
g(d),j.reject);return j.promise()}});var id=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;n.Deferred.exceptionHook=function(c,d){b.console&&b.console.warn&&c&&id.test(c.name)&&b.console.warn("jQuery.Deferred exception: "+c.message,c.stack,d)};n.readyException=function(c){b.setTimeout(function(){throw c;})};var Fb=n.Deferred();n.fn.ready=function(b){return Fb.then(b)["catch"](function(b){n.readyException(b)}),this};n.extend({isReady:!1,readyWait:1,ready:function(b){(!0===b?--n.readyWait:
n.isReady)||(n.isReady=!0,!0!==b&&0<--n.readyWait||Fb.resolveWith(T,[n]))}});n.ready.then=Fb.then;"complete"===T.readyState||"loading"!==T.readyState&&!T.documentElement.doScroll?b.setTimeout(n.ready):(T.addEventListener("DOMContentLoaded",m),b.addEventListener("load",m));var sa=function(b,c,d,f,e,j,g){var m=0,q=b.length,l=null==d;if("object"===n.type(d))for(m in e=!0,d)sa(b,c,m,d[m],!0,j,g);else if(void 0!==f&&(e=!0,n.isFunction(f)||(g=!0),l&&(g?(c.call(b,f),c=null):(l=c,c=function(b,c,d){return l.call(n(b),
d)})),c))for(;m<q;m++)c(b[m],d,g?f:f.call(b[m],m,c(b[m],d)));return e?b:l?c.call(b):q?c(b[0],d):j},jb=function(b){return 1===b.nodeType||9===b.nodeType||!+b.nodeType};s.uid=1;s.prototype={cache:function(b){var c=b[this.expando];return c||(c={},jb(b)&&(b.nodeType?b[this.expando]=c:Object.defineProperty(b,this.expando,{value:c,configurable:!0}))),c},set:function(b,c,d){var f;b=this.cache(b);if("string"==typeof c)b[n.camelCase(c)]=d;else for(f in c)b[n.camelCase(f)]=c[f];return b},get:function(b,c){return void 0===
c?this.cache(b):b[this.expando]&&b[this.expando][n.camelCase(c)]},access:function(b,c,d){return void 0===c||c&&"string"==typeof c&&void 0===d?this.get(b,c):(this.set(b,c,d),void 0!==d?d:c)},remove:function(b,c){var d,f=b[this.expando];if(void 0!==f){if(void 0!==c){Array.isArray(c)?c=c.map(n.camelCase):(c=n.camelCase(c),c=c in f?[c]:c.match(ha)||[]);for(d=c.length;d--;)delete f[c[d]]}(void 0===c||n.isEmptyObject(f))&&(b.nodeType?b[this.expando]=void 0:delete b[this.expando])}},hasData:function(b){b=
b[this.expando];return void 0!==b&&!n.isEmptyObject(b)}};var N=new s,ea=new s,Dc=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Cc=/[A-Z]/g;n.extend({hasData:function(b){return ea.hasData(b)||N.hasData(b)},data:function(b,c,d){return ea.access(b,c,d)},removeData:function(b,c){ea.remove(b,c)},_data:function(b,c,d){return N.access(b,c,d)},_removeData:function(b,c){N.remove(b,c)}});n.fn.extend({data:function(b,c){var d,f,e,j=this[0],g=j&&j.attributes;if(void 0===b){if(this.length&&(e=ea.get(j),1===j.nodeType&&!N.get(j,
"hasDataAttrs"))){for(d=g.length;d--;)g[d]&&(f=g[d].name,0===f.indexOf("data-")&&(f=n.camelCase(f.slice(5)),r(j,f,e[f])));N.set(j,"hasDataAttrs",!0)}return e}return"object"==typeof b?this.each(function(){ea.set(this,b)}):sa(this,function(c){var d;if(j&&void 0===c){if((d=ea.get(j,b),void 0!==d)||(d=r(j,b),void 0!==d))return d}else this.each(function(){ea.set(this,b,c)})},null,c,1<arguments.length,null,!0)},removeData:function(b){return this.each(function(){ea.remove(this,b)})}});n.extend({queue:function(b,
c,d){var f;if(b)return c=(c||"fx")+"queue",f=N.get(b,c),d&&(!f||Array.isArray(d)?f=N.access(b,c,n.makeArray(d)):f.push(d)),f||[]},dequeue:function(b,c){c=c||"fx";var d=n.queue(b,c),f=d.length,e=d.shift(),j=n._queueHooks(b,c),g=function(){n.dequeue(b,c)};"inprogress"===e&&(e=d.shift(),f--);e&&("fx"===c&&d.unshift("inprogress"),delete j.stop,e.call(b,g,j));!f&&j&&j.empty.fire()},_queueHooks:function(b,c){var d=c+"queueHooks";return N.get(b,d)||N.access(b,d,{empty:n.Callbacks("once memory").add(function(){N.remove(b,
[c+"queue",d])})})}});n.fn.extend({queue:function(b,c){var d=2;return"string"!=typeof b&&(c=b,b="fx",d--),arguments.length<d?n.queue(this[0],b):void 0===c?this:this.each(function(){var d=n.queue(this,b,c);n._queueHooks(this,b);"fx"===b&&"inprogress"!==d[0]&&n.dequeue(this,b)})},dequeue:function(b){return this.each(function(){n.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,c){var d,f=1,e=n.Deferred(),j=this,g=this.length,m=function(){--f||e.resolveWith(j,
[j])};"string"!=typeof b&&(c=b,b=void 0);for(b=b||"fx";g--;)(d=N.get(j[g],b+"queueHooks"))&&d.empty&&(f++,d.empty.add(m));return m(),e.promise(c)}});var ic=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Pa=RegExp("^(?:([+-])=|)("+ic+")([a-z%]*)$","i"),Aa=["Top","Right","Bottom","Left"],Wa=function(b,c){return b=c||b,"none"===b.style.display||""===b.style.display&&n.contains(b.ownerDocument,b)&&"none"===n.css(b,"display")},jc=function(b,c,d,f){var e,j={};for(e in c)j[e]=b.style[e],b.style[e]=c[e];d=
d.apply(b,f||[]);for(e in c)b.style[e]=j[e];return d},Jb={};n.fn.extend({show:function(){return t(this,!0)},hide:function(){return t(this)},toggle:function(b){return"boolean"==typeof b?b?this.show():this.hide():this.each(function(){Wa(this)?n(this).show():n(this).hide()})}});var kc=/^(?:checkbox|radio)$/i,Kb=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Lb=/^$|\/(?:java|ecma)script/i,fa={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};fa.optgroup=fa.option;fa.tbody=fa.tfoot=fa.colgroup=fa.caption=fa.thead;fa.th=fa.td;var Ec=/<|&#?\w+;/,kb=T.createDocumentFragment().appendChild(T.createElement("div")),lb=T.createElement("input");lb.setAttribute("type","radio");lb.setAttribute("checked","checked");lb.setAttribute("name","t");kb.appendChild(lb);X.checkClone=kb.cloneNode(!0).cloneNode(!0).lastChild.checked;kb.innerHTML=
"<textarea>x</textarea>";X.noCloneChecked=!!kb.cloneNode(!0).lastChild.defaultValue;!0;var mb=T.documentElement,jd=/^key/,kd=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,lc=/^([^.]*)(?:\.(.+)|)/;n.event={global:{},add:function(b,c,d,f,e){var j,g,m,q,l,r,p,s,u,t;if(l=N.get(b)){d.handler&&(j=d,d=j.handler,e=j.selector);e&&n.find.matchesSelector(mb,e);d.guid||(d.guid=n.guid++);(q=l.events)||(q=l.events={});(g=l.handle)||(g=l.handle=function(c){return"undefined"!=typeof n&&n.event.triggered!==c.type?
n.event.dispatch.apply(b,arguments):void 0});c=(c||"").match(ha)||[""];for(l=c.length;l--;)m=lc.exec(c[l])||[],u=t=m[1],m=(m[2]||"").split(".").sort(),u&&(p=n.event.special[u]||{},u=(e?p.delegateType:p.bindType)||u,p=n.event.special[u]||{},r=n.extend({type:u,origType:t,data:f,handler:d,guid:d.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:m.join(".")},j),(s=q[u])||(s=q[u]=[],s.delegateCount=0,p.setup&&!1!==p.setup.call(b,f,m,g)||b.addEventListener&&b.addEventListener(u,
g)),p.add&&(p.add.call(b,r),r.handler.guid||(r.handler.guid=d.guid)),e?s.splice(s.delegateCount++,0,r):s.push(r),n.event.global[u]=!0)}},remove:function(b,c,d,f,e){var j,g,m,q,l,r,p,s,u,t,v,I=N.hasData(b)&&N.get(b);if(I&&(q=I.events)){c=(c||"").match(ha)||[""];for(l=c.length;l--;)if(m=lc.exec(c[l])||[],u=v=m[1],t=(m[2]||"").split(".").sort(),u){p=n.event.special[u]||{};u=(f?p.delegateType:p.bindType)||u;s=q[u]||[];m=m[2]&&RegExp("(^|\\.)"+t.join("\\.(?:.*\\.|)")+"(\\.|$)");for(g=j=s.length;j--;)r=
s[j],!e&&v!==r.origType||d&&d.guid!==r.guid||m&&!m.test(r.namespace)||f&&f!==r.selector&&("**"!==f||!r.selector)||(s.splice(j,1),r.selector&&s.delegateCount--,p.remove&&p.remove.call(b,r));g&&!s.length&&(p.teardown&&!1!==p.teardown.call(b,t,I.handle)||n.removeEvent(b,u,I.handle),delete q[u])}else for(u in q)n.event.remove(b,u+c[l],d,f,!0);n.isEmptyObject(q)&&N.remove(b,"handle events")}},dispatch:function(b){var c=n.event.fix(b),d,f,e,j,g,m,q=Array(arguments.length);f=(N.get(this,"events")||{})[c.type]||
[];var l=n.event.special[c.type]||{};q[0]=c;for(d=1;d<arguments.length;d++)q[d]=arguments[d];if(c.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,c)){m=n.event.handlers.call(this,c,f);for(d=0;(j=m[d++])&&!c.isPropagationStopped();){c.currentTarget=j.elem;for(f=0;(g=j.handlers[f++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!c.rnamespace.test(g.namespace)||(c.handleObj=g,c.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(j.elem,q),void 0!==e&&!1===
(c.result=e)&&(c.preventDefault(),c.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,c),c.result}},handlers:function(b,c){var d,f,e,j,g,m=[],q=c.delegateCount,l=b.target;if(q&&l.nodeType&&!("click"===b.type&&1<=b.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==b.type||!0!==l.disabled)){j=[];g={};for(d=0;d<q;d++)f=c[d],e=f.selector+" ",void 0===g[e]&&(g[e]=f.needsContext?-1<n(e,this).index(l):n.find(e,this,null,[l]).length),g[e]&&j.push(f);j.length&&m.push({elem:l,
handlers:j})}return l=this,q<c.length&&m.push({elem:l,handlers:c.slice(q)}),m},addProp:function(b,c){Object.defineProperty(n.Event.prototype,b,{enumerable:!0,configurable:!0,get:n.isFunction(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[b]},set:function(c){Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:c})}})},fix:function(b){return b[n.expando]?b:new n.Event(b)},special:{load:{noBubble:!0},
focus:{trigger:function(){if(this!==G()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===G()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&f(this,"input"))return this.click(),!1},_default:function(b){return f(b.target,"a")}},beforeunload:{postDispatch:function(b){void 0!==b.result&&b.originalEvent&&(b.originalEvent.returnValue=b.result)}}}};n.removeEvent=function(b,c,d){b.removeEventListener&&
b.removeEventListener(c,d)};n.Event=function(b,c){return this instanceof n.Event?(b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||void 0===b.defaultPrevented&&!1===b.returnValue?I:v,this.target=b.target&&3===b.target.nodeType?b.target.parentNode:b.target,this.currentTarget=b.currentTarget,this.relatedTarget=b.relatedTarget):this.type=b,c&&n.extend(this,c),this.timeStamp=b&&b.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(b,c)};n.Event.prototype=
{constructor:n.Event,isDefaultPrevented:v,isPropagationStopped:v,isImmediatePropagationStopped:v,isSimulated:!1,preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=I;b&&!this.isSimulated&&b.preventDefault()},stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=I;b&&!this.isSimulated&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=I;b&&!this.isSimulated&&b.stopImmediatePropagation();
this.stopPropagation()}};n.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(b){var c=b.button;return null==b.which&&jd.test(b.type)?null!=b.charCode?b.charCode:b.keyCode:!b.which&&void 0!==c&&kd.test(b.type)?
1&c?1:2&c?3:4&c?2:0:b.which}},n.event.addProp);n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b,c){n.event.special[b]={delegateType:c,bindType:c,handle:function(b){var d,f=b.relatedTarget,e=b.handleObj;return f&&(f===this||n.contains(this,f))||(b.type=e.origType,d=e.handler.apply(this,arguments),b.type=c),d}}});n.fn.extend({on:function(b,c,d,f){return M(this,b,c,d,f)},one:function(b,c,d,f){return M(this,b,c,d,f,1)},off:function(b,
c,d){var f,e;if(b&&b.preventDefault&&b.handleObj)return f=b.handleObj,n(b.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if("object"==typeof b){for(e in b)this.off(e,c,b[e]);return this}return!1!==c&&"function"!=typeof c||(d=c,c=void 0),!1===d&&(d=v),this.each(function(){n.event.remove(this,b,d,c)})}});var ld=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,md=/<script|<style|<link/i,Gc=/checked\s*(?:[^=]|=\s*.checked.)/i,
Fc=/^true\/(.*)/,Ic=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;n.extend({htmlPrefilter:function(b){return b.replace(ld,"<$1></$2>")},clone:function(b,c,d){var f,e,j,g,m=b.cloneNode(!0),q=n.contains(b.ownerDocument,b);if(!X.noCloneChecked&&!(1!==b.nodeType&&11!==b.nodeType||n.isXMLDoc(b))){g=D(m);j=D(b);f=0;for(e=j.length;f<e;f++){var l=j[f],r=g[f],p=r.nodeName.toLowerCase();"input"===p&&kc.test(l.type)?r.checked=l.checked:"input"!==p&&"textarea"!==p||(r.defaultValue=l.defaultValue)}}if(c)if(d){j=
j||D(b);g=g||D(m);f=0;for(e=j.length;f<e;f++)P(j[f],g[f])}else P(b,m);return g=D(m,"script"),0<g.length&&F(g,!q&&D(b,"script")),m},cleanData:function(b){for(var c,d,f,e=n.event.special,j=0;void 0!==(d=b[j]);j++)if(jb(d)){if(c=d[N.expando]){if(c.events)for(f in c.events)e[f]?n.event.remove(d,f):n.removeEvent(d,f,c.handle);d[N.expando]=void 0}d[ea.expando]&&(d[ea.expando]=void 0)}}});n.fn.extend({detach:function(b){return B(this,b,!0)},remove:function(b){return B(this,b)},text:function(b){return sa(this,
function(b){return void 0===b?n.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=b)})},null,b,arguments.length)},append:function(){return J(this,arguments,function(b){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&L(this,b).appendChild(b)})},prepend:function(){return J(this,arguments,function(b){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=L(this,b);c.insertBefore(b,c.firstChild)}})},before:function(){return J(this,
arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return J(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},empty:function(){for(var b,c=0;null!=(b=this[c]);c++)1===b.nodeType&&(n.cleanData(D(b,!1)),b.textContent="");return this},clone:function(b,c){return b=null!=b&&b,c=null==c?b:c,this.map(function(){return n.clone(this,b,c)})},html:function(b){return sa(this,function(b){var c=this[0]||{},d=0,f=this.length;
if(void 0===b&&1===c.nodeType)return c.innerHTML;if("string"==typeof b&&!md.test(b)&&!fa[(Kb.exec(b)||["",""])[1].toLowerCase()]){b=n.htmlPrefilter(b);try{for(;d<f;d++)c=this[d]||{},1===c.nodeType&&(n.cleanData(D(c,!1)),c.innerHTML=b);c=0}catch(e){}}c&&this.empty().append(b)},null,b,arguments.length)},replaceWith:function(){var b=[];return J(this,arguments,function(c){var d=this.parentNode;0>n.inArray(this,b)&&(n.cleanData(D(this)),d&&d.replaceChild(c,this))},b)}});n.each({appendTo:"append",prependTo:"prepend",
insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,c){n.fn[b]=function(b){for(var d=[],f=n(b),e=f.length-1,j=0;j<=e;j++)b=j===e?this:this.clone(!0),n(f[j])[c](b),ub.apply(d,b.get());return this.pushStack(d)}});var Nb=/^margin/,qb=RegExp("^("+ic+")(?!px)[a-z%]+$","i"),Xa=function(c){var d=c.ownerDocument.defaultView;return d&&d.opener||(d=b),d.getComputedStyle(c)},ob=function(){if(na){na.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";
na.innerHTML="";mb.appendChild(nb);var c=b.getComputedStyle(na);mc="1%"!==c.top;nc="2px"===c.marginLeft;oc="4px"===c.width;na.style.marginRight="50%";pc="4px"===c.marginRight;mb.removeChild(nb);na=null}},mc,oc,pc,nc,nb=T.createElement("div"),na=T.createElement("div");na.style&&(na.style.backgroundClip="content-box",na.cloneNode(!0).style.backgroundClip="",X.clearCloneStyle="content-box"===na.style.backgroundClip,nb.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",
nb.appendChild(na),n.extend(X,{pixelPosition:function(){return ob(),mc},boxSizingReliable:function(){return ob(),oc},pixelMarginRight:function(){return ob(),pc},reliableMarginLeft:function(){return ob(),nc}}));!0;var nd=/^(none|table(?!-c[ea]).+)/,qc=/^--/,od={position:"absolute",visibility:"hidden",display:"block"},rc={letterSpacing:"0",fontWeight:"400"},Pb=["Webkit","Moz","ms"],Ob=T.createElement("div").style;n.extend({cssHooks:{opacity:{get:function(b,c){if(c){var d=K(b,"opacity");return""===d?
"1":d}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(b,c,d,f){if(b&&3!==b.nodeType&&8!==b.nodeType&&b.style){var e,j,g,m=n.camelCase(c),q=qc.test(c),l=b.style;return q||(c=ya(m)),g=n.cssHooks[c]||n.cssHooks[m],void 0===d?g&&"get"in g&&void 0!==(e=g.get(b,!1,f))?e:l[c]:(j=typeof d,"string"===j&&(e=Pa.exec(d))&&e[1]&&
(d=u(b,c,e),j="number"),null!=d&&d===d&&("number"===j&&(d+=e&&e[3]||(n.cssNumber[m]?"":"px")),X.clearCloneStyle||""!==d||0!==c.indexOf("background")||(l[c]="inherit"),g&&"set"in g&&void 0===(d=g.set(b,d,f))||(q?l.setProperty(c,d):l[c]=d)),void 0)}},css:function(b,c,d,f){var e,j,g,m=n.camelCase(c);return qc.test(c)||(c=ya(m)),g=n.cssHooks[c]||n.cssHooks[m],g&&"get"in g&&(e=g.get(b,!0,d)),void 0===e&&(e=K(b,c,f)),"normal"===e&&c in rc&&(e=rc[c]),""===d||d?(j=parseFloat(e),!0===d||isFinite(j)?j||0:e):
e}});n.each(["height","width"],function(b,c){n.cssHooks[c]={get:function(b,d,f){if(d)return!nd.test(n.css(b,"display"))||b.getClientRects().length&&b.getBoundingClientRect().width?ga(b,c,f):jc(b,od,function(){return ga(b,c,f)})},set:function(b,d,f){var e,j=f&&Xa(b);f=f&&ca(b,c,f,"border-box"===n.css(b,"boxSizing",!1,j),j);return f&&(e=Pa.exec(d))&&"px"!==(e[3]||"px")&&(b.style[c]=d,d=n.css(b,c)),za(b,d,f)}}});n.cssHooks.marginLeft=xa(X.reliableMarginLeft,function(b,c){if(c)return(parseFloat(K(b,"marginLeft"))||
b.getBoundingClientRect().left-jc(b,{marginLeft:0},function(){return b.getBoundingClientRect().left}))+"px"});n.each({margin:"",padding:"",border:"Width"},function(b,c){n.cssHooks[b+c]={expand:function(d){var f=0,e={};for(d="string"==typeof d?d.split(" "):[d];4>f;f++)e[b+Aa[f]+c]=d[f]||d[f-2]||d[0];return e}};Nb.test(b)||(n.cssHooks[b+c].set=za)});n.fn.extend({css:function(b,c){return sa(this,function(b,c,d){var f,e={},j=0;if(Array.isArray(c)){d=Xa(b);for(f=c.length;j<f;j++)e[c[j]]=n.css(b,c[j],!1,
d);return e}return void 0!==d?n.style(b,c,d):n.css(b,c)},b,c,1<arguments.length)}});n.Tween=Z;Z.prototype={constructor:Z,init:function(b,c,d,f,e,j){this.elem=b;this.prop=d;this.easing=e||n.easing._default;this.options=c;this.start=this.now=this.cur();this.end=f;this.unit=j||(n.cssNumber[d]?"":"px")},cur:function(){var b=Z.propHooks[this.prop];return b&&b.get?b.get(this):Z.propHooks._default.get(this)},run:function(b){var c,d=Z.propHooks[this.prop];return this.options.duration?this.pos=c=n.easing[this.easing](b,
this.options.duration*b,0,1,this.options.duration):this.pos=c=b,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),d&&d.set?d.set(this):Z.propHooks._default.set(this),this}};Z.prototype.init.prototype=Z.prototype;Z.propHooks={_default:{get:function(b){var c;return 1!==b.elem.nodeType||null!=b.elem[b.prop]&&null==b.elem.style[b.prop]?b.elem[b.prop]:(c=n.css(b.elem,b.prop,""),c&&"auto"!==c?c:0)},set:function(b){n.fx.step[b.prop]?n.fx.step[b.prop](b):
1!==b.elem.nodeType||null==b.elem.style[n.cssProps[b.prop]]&&!n.cssHooks[b.prop]?b.elem[b.prop]=b.now:n.style(b.elem,b.prop,b.now+b.unit)}}};Z.propHooks.scrollTop=Z.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&b.elem.parentNode&&(b.elem[b.prop]=b.now)}};n.easing={linear:function(b){return b},swing:function(b){return 0.5-Math.cos(b*Math.PI)/2},_default:"swing"};n.fx=Z.prototype.init;n.fx.step={};var Ja,Ya,pd=/^(?:toggle|show|hide)$/,qd=/queueHooks$/;n.Animation=n.extend(la,{tweeners:{"*":[function(b,
c){var d=this.createTween(b,c);return u(d.elem,b,Pa.exec(c),d),d}]},tweener:function(b,c){n.isFunction(b)?(c=b,b=["*"]):b=b.match(ha);for(var d,f=0,e=b.length;f<e;f++)d=b[f],la.tweeners[d]=la.tweeners[d]||[],la.tweeners[d].unshift(c)},prefilters:[function(b,c,d){var f,e,j,g,m,q,l,r,p="width"in c||"height"in c,s=this,u={},v=b.style,I=b.nodeType&&Wa(b),F=N.get(b,"fxshow");d.queue||(g=n._queueHooks(b,"fx"),null==g.unqueued&&(g.unqueued=0,m=g.empty.fire,g.empty.fire=function(){g.unqueued||m()}),g.unqueued++,
s.always(function(){s.always(function(){g.unqueued--;n.queue(b,"fx").length||g.empty.fire()})}));for(f in c)if(e=c[f],pd.test(e)){if(delete c[f],j=j||"toggle"===e,e===(I?"hide":"show")){if("show"!==e||!F||void 0===F[f])continue;I=!0}u[f]=F&&F[f]||n.style(b,f)}if(q=!n.isEmptyObject(c),q||!n.isEmptyObject(u))for(f in p&&1===b.nodeType&&(d.overflow=[v.overflow,v.overflowX,v.overflowY],l=F&&F.display,null==l&&(l=N.get(b,"display")),r=n.css(b,"display"),"none"===r&&(l?r=l:(t([b],!0),l=b.style.display||
l,r=n.css(b,"display"),t([b]))),("inline"===r||"inline-block"===r&&null!=l)&&"none"===n.css(b,"float")&&(q||(s.done(function(){v.display=l}),null==l&&(r=v.display,l="none"===r?"":r)),v.display="inline-block")),d.overflow&&(v.overflow="hidden",s.always(function(){v.overflow=d.overflow[0];v.overflowX=d.overflow[1];v.overflowY=d.overflow[2]})),q=!1,u)q||(F?"hidden"in F&&(I=F.hidden):F=N.access(b,"fxshow",{display:l}),j&&(F.hidden=!I),I&&t([b],!0),s.done(function(){I||t([b]);N.remove(b,"fxshow");for(f in u)n.style(b,
f,u[f])})),q=E(I?F[f]:0,f,s),f in F||(F[f]=q.start,I&&(q.end=q.start,q.start=0))}],prefilter:function(b,c){c?la.prefilters.unshift(b):la.prefilters.push(b)}});n.speed=function(b,c,d){var f=b&&"object"==typeof b?n.extend({},b):{complete:d||!d&&c||n.isFunction(b)&&b,duration:b,easing:d&&c||c&&!n.isFunction(c)&&c};return n.fx.off?f.duration=0:"number"!=typeof f.duration&&(f.duration in n.fx.speeds?f.duration=n.fx.speeds[f.duration]:f.duration=n.fx.speeds._default),null!=f.queue&&!0!==f.queue||(f.queue=
"fx"),f.old=f.complete,f.complete=function(){n.isFunction(f.old)&&f.old.call(this);f.queue&&n.dequeue(this,f.queue)},f};n.fn.extend({fadeTo:function(b,c,d,f){return this.filter(Wa).css("opacity",0).show().end().animate({opacity:c},b,d,f)},animate:function(b,c,d,f){var e=n.isEmptyObject(b),j=n.speed(c,d,f);c=function(){var c=la(this,n.extend({},b),j);(e||N.get(this,"finish"))&&c.stop(!0)};return c.finish=c,e||!1===j.queue?this.each(c):this.queue(j.queue,c)},stop:function(b,c,d){var f=function(b){var c=
b.stop;delete b.stop;c(d)};return"string"!=typeof b&&(d=c,c=b,b=void 0),c&&!1!==b&&this.queue(b||"fx",[]),this.each(function(){var c=!0,e=null!=b&&b+"queueHooks",j=n.timers,g=N.get(this);if(e)g[e]&&g[e].stop&&f(g[e]);else for(e in g)g[e]&&g[e].stop&&qd.test(e)&&f(g[e]);for(e=j.length;e--;)j[e].elem!==this||null!=b&&j[e].queue!==b||(j[e].anim.stop(d),c=!1,j.splice(e,1));!c&&d||n.dequeue(this,b)})},finish:function(b){return!1!==b&&(b=b||"fx"),this.each(function(){var c,d=N.get(this),f=d[b+"queue"];
c=d[b+"queueHooks"];var e=n.timers,j=f?f.length:0;d.finish=!0;n.queue(this,b,[]);c&&c.stop&&c.stop.call(this,!0);for(c=e.length;c--;)e[c].elem===this&&e[c].queue===b&&(e[c].anim.stop(!0),e.splice(c,1));for(c=0;c<j;c++)f[c]&&f[c].finish&&f[c].finish.call(this);delete d.finish})}});n.each(["toggle","show","hide"],function(b,c){var d=n.fn[c];n.fn[c]=function(b,f,e){return null==b||"boolean"==typeof b?d.apply(this,arguments):this.animate(z(c,!0),b,f,e)}});n.each({slideDown:z("show"),slideUp:z("hide"),
slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,c){n.fn[b]=function(b,d,f){return this.animate(c,b,d,f)}});n.timers=[];n.fx.tick=function(){var b,c=0,d=n.timers;for(Ja=n.now();c<d.length;c++)b=d[c],b()||d[c]!==b||d.splice(c--,1);d.length||n.fx.stop();Ja=void 0};n.fx.timer=function(b){n.timers.push(b);n.fx.start()};n.fx.interval=13;n.fx.start=function(){Ya||(Ya=!0,C())};n.fx.stop=function(){Ya=null};n.fx.speeds={slow:600,fast:200,_default:400};
n.fn.delay=function(c,d){return c=n.fx?n.fx.speeds[c]||c:c,d=d||"fx",this.queue(d,function(d,f){var e=b.setTimeout(d,c);f.stop=function(){b.clearTimeout(e)}})};var Na=T.createElement("input"),rd=T.createElement("select").appendChild(T.createElement("option"));Na.type="checkbox";X.checkOn=""!==Na.value;X.optSelected=rd.selected;Na=T.createElement("input");Na.value="t";Na.type="radio";X.radioValue="t"===Na.value;var sc,Ta=n.expr.attrHandle;n.fn.extend({attr:function(b,c){return sa(this,n.attr,b,c,1<
arguments.length)},removeAttr:function(b){return this.each(function(){n.removeAttr(this,b)})}});n.extend({attr:function(b,c,d){var f,e,j=b.nodeType;if(3!==j&&8!==j&&2!==j)return"undefined"==typeof b.getAttribute?n.prop(b,c,d):(1===j&&n.isXMLDoc(b)||(e=n.attrHooks[c.toLowerCase()]||(n.expr.match.bool.test(c)?sc:void 0)),void 0!==d?null===d?void n.removeAttr(b,c):e&&"set"in e&&void 0!==(f=e.set(b,d,c))?f:(b.setAttribute(c,d+""),d):e&&"get"in e&&null!==(f=e.get(b,c))?f:(f=n.find.attr(b,c),null==f?void 0:
f))},attrHooks:{type:{set:function(b,c){if(!X.radioValue&&"radio"===c&&f(b,"input")){var d=b.value;return b.setAttribute("type",c),d&&(b.value=d),c}}}},removeAttr:function(b,c){var d,f=0,e=c&&c.match(ha);if(e&&1===b.nodeType)for(;d=e[f++];)b.removeAttribute(d)}});sc={set:function(b,c,d){return!1===c?n.removeAttr(b,d):b.setAttribute(d,d),d}};n.each(n.expr.match.bool.source.match(/\w+/g),function(b,c){var d=Ta[c]||n.find.attr;Ta[c]=function(b,c,f){var e,j,g=c.toLowerCase();return f||(j=Ta[g],Ta[g]=
e,e=null!=d(b,c,f)?g:null,Ta[g]=j),e}});var sd=/^(?:input|select|textarea|button)$/i,td=/^(?:a|area)$/i;n.fn.extend({prop:function(b,c){return sa(this,n.prop,b,c,1<arguments.length)},removeProp:function(b){return this.each(function(){delete this[n.propFix[b]||b]})}});n.extend({prop:function(b,c,d){var f,e,j=b.nodeType;if(3!==j&&8!==j&&2!==j)return 1===j&&n.isXMLDoc(b)||(c=n.propFix[c]||c,e=n.propHooks[c]),void 0!==d?e&&"set"in e&&void 0!==(f=e.set(b,d,c))?f:b[c]=d:e&&"get"in e&&null!==(f=e.get(b,
c))?f:b[c]},propHooks:{tabIndex:{get:function(b){var c=n.find.attr(b,"tabindex");return c?parseInt(c,10):sd.test(b.nodeName)||td.test(b.nodeName)&&b.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});X.optSelected||(n.propHooks.selected={get:function(b){b=b.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(b){b=b.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}});n.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){n.propFix[this.toLowerCase()]=this});n.fn.extend({addClass:function(b){var c,d,f,e,j,g,m=0;if(n.isFunction(b))return this.each(function(c){n(this).addClass(b.call(this,c,Ca(this)))});if("string"==typeof b&&b)for(c=b.match(ha)||[];d=this[m++];)if(e=Ca(d),f=1===d.nodeType&&" "+Ba(e)+" "){for(g=0;j=c[g++];)0>f.indexOf(" "+j+" ")&&(f+=j+" ");f=Ba(f);e!==f&&d.setAttribute("class",f)}return this},removeClass:function(b){var c,d,f,e,j,g,m=0;if(n.isFunction(b))return this.each(function(c){n(this).removeClass(b.call(this,
c,Ca(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof b&&b)for(c=b.match(ha)||[];d=this[m++];)if(e=Ca(d),f=1===d.nodeType&&" "+Ba(e)+" "){for(g=0;j=c[g++];)for(;-1<f.indexOf(" "+j+" ");)f=f.replace(" "+j+" "," ");f=Ba(f);e!==f&&d.setAttribute("class",f)}return this},toggleClass:function(b,c){var d=typeof b;return"boolean"==typeof c&&"string"===d?c?this.addClass(b):this.removeClass(b):n.isFunction(b)?this.each(function(d){n(this).toggleClass(b.call(this,d,Ca(this),c),
c)}):this.each(function(){var c,f,e,j;if("string"===d){f=0;e=n(this);for(j=b.match(ha)||[];c=j[f++];)e.hasClass(c)?e.removeClass(c):e.addClass(c)}else void 0!==b&&"boolean"!==d||(c=Ca(this),c&&N.set(this,"__className__",c),this.setAttribute&&this.setAttribute("class",c||!1===b?"":N.get(this,"__className__")||""))})},hasClass:function(b){var c,d=0;for(b=" "+b+" ";c=this[d++];)if(1===c.nodeType&&-1<(" "+Ba(Ca(c))+" ").indexOf(b))return!0;return!1}});var ud=/\r/g;n.fn.extend({val:function(b){var c,d,
f,e=this[0];if(arguments.length)return f=n.isFunction(b),this.each(function(d){var e;1===this.nodeType&&(e=f?b.call(this,d,n(this).val()):b,null==e?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=n.map(e,function(b){return null==b?"":b+""})),c=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&void 0!==c.set(this,e,"value")||(this.value=e))});if(e)return c=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],c&&"get"in c&&void 0!==(d=c.get(e,"value"))?d:(d=e.value,
"string"==typeof d?d.replace(ud,""):null==d?"":d)}});n.extend({valHooks:{option:{get:function(b){var c=n.find.attr(b,"value");return null!=c?c:Ba(n.text(b))}},select:{get:function(b){var c,d,e=b.options,j=b.selectedIndex,g="select-one"===b.type,m=g?null:[],q=g?j+1:e.length;for(d=0>j?q:g?j:0;d<q;d++)if(c=e[d],(c.selected||d===j)&&!c.disabled&&(!c.parentNode.disabled||!f(c.parentNode,"optgroup"))){if(b=n(c).val(),g)return b;m.push(b)}return m},set:function(b,c){for(var d,f,e=b.options,j=n.makeArray(c),
g=e.length;g--;)f=e[g],(f.selected=-1<n.inArray(n.valHooks.option.get(f),j))&&(d=!0);return d||(b.selectedIndex=-1),j}}}});n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(b,c){if(Array.isArray(c))return b.checked=-1<n.inArray(n(b).val(),c)}};X.checkOn||(n.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})});var tc=/^(?:focusinfocus|focusoutblur)$/;n.extend(n.event,{trigger:function(c,d,f,e){var j,g,m,q,l,r,p,s=[f||T],u=$a.call(c,"type")?c.type:
c;j=$a.call(c,"namespace")?c.namespace.split("."):[];if(g=m=f=f||T,3!==f.nodeType&&8!==f.nodeType&&!tc.test(u+n.event.triggered)&&(-1<u.indexOf(".")&&(j=u.split("."),u=j.shift(),j.sort()),l=0>u.indexOf(":")&&"on"+u,c=c[n.expando]?c:new n.Event(u,"object"==typeof c&&c),c.isTrigger=e?2:3,c.namespace=j.join("."),c.rnamespace=c.namespace?RegExp("(^|\\.)"+j.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=f),d=null==d?[c]:n.makeArray(d,[c]),p=n.event.special[u]||{},e||!p.trigger||
!1!==p.trigger.apply(f,d))){if(!e&&!p.noBubble&&!n.isWindow(f)){q=p.delegateType||u;for(tc.test(q+u)||(g=g.parentNode);g;g=g.parentNode)s.push(g),m=g;m===(f.ownerDocument||T)&&s.push(m.defaultView||m.parentWindow||b)}for(j=0;(g=s[j++])&&!c.isPropagationStopped();)c.type=1<j?q:p.bindType||u,(r=(N.get(g,"events")||{})[c.type]&&N.get(g,"handle"))&&r.apply(g,d),(r=l&&g[l])&&r.apply&&jb(g)&&(c.result=r.apply(g,d),!1===c.result&&c.preventDefault());return c.type=u,e||c.isDefaultPrevented()||p._default&&
!1!==p._default.apply(s.pop(),d)||!jb(f)||l&&n.isFunction(f[u])&&!n.isWindow(f)&&(m=f[l],m&&(f[l]=null),n.event.triggered=u,f[u](),n.event.triggered=void 0,m&&(f[l]=m)),c.result}},simulate:function(b,c,d){b=n.extend(new n.Event,d,{type:b,isSimulated:!0});n.event.trigger(b,null,c)}});n.fn.extend({trigger:function(b,c){return this.each(function(){n.event.trigger(b,c,this)})},triggerHandler:function(b,c){var d=this[0];if(d)return n.event.trigger(b,c,d,!0)}});n.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),
function(b,c){n.fn[c]=function(b,d){return 0<arguments.length?this.on(c,null,b,d):this.trigger(c)}});n.fn.extend({hover:function(b,c){return this.mouseenter(b).mouseleave(c||b)}});X.focusin="onfocusin"in b;X.focusin||n.each({focus:"focusin",blur:"focusout"},function(b,c){var d=function(b){n.event.simulate(c,b.target,n.event.fix(b))};n.event.special[c]={setup:function(){var f=this.ownerDocument||this,e=N.access(f,c);e||f.addEventListener(b,d,!0);N.access(f,c,(e||0)+1)},teardown:function(){var f=this.ownerDocument||
this,e=N.access(f,c)-1;e?N.access(f,c,e):(f.removeEventListener(b,d,!0),N.remove(f,c))}}});var Ua=b.location,uc=n.now(),Gb=/\?/;n.parseXML=function(c){var d;if(!c||"string"!=typeof c)return null;try{d=(new b.DOMParser).parseFromString(c,"text/xml")}catch(f){d=void 0}return d&&!d.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+c),d};var Jc=/\[\]$/,vc=/\r?\n/g,vd=/^(?:submit|button|image|reset|file)$/i,wd=/^(?:input|select|textarea|keygen)/i;n.param=function(b,c){var d,f=[],e=function(b,
c){var d=n.isFunction(c)?c():c;f[f.length]=encodeURIComponent(b)+"="+encodeURIComponent(null==d?"":d)};if(Array.isArray(b)||b.jquery&&!n.isPlainObject(b))n.each(b,function(){e(this.name,this.value)});else for(d in b)rb(d,b[d],c,e);return f.join("&")};n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=n.prop(this,"elements");return b?n.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!n(this).is(":disabled")&&
wd.test(this.nodeName)&&!vd.test(b)&&(this.checked||!kc.test(b))}).map(function(b,c){var d=n(this).val();return null==d?null:Array.isArray(d)?n.map(d,function(b){return{name:c.name,value:b.replace(vc,"\r\n")}}):{name:c.name,value:d.replace(vc,"\r\n")}}).get()}});var xd=/%20/g,yd=/#.*$/,zd=/([?&])_=[^&]*/,Ad=/^(.*?):[ \t]*([^\r\n]*)$/gm,Bd=/^(?:GET|HEAD)$/,Cd=/^\/\//,wc={},sb={},xc="*/".concat("*"),Hb=T.createElement("a");Hb.href=Ua.href;n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ua.href,
type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ua.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,
"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(b,c){return c?tb(tb(b,n.ajaxSettings),c):tb(n.ajaxSettings,b)},ajaxPrefilter:Qb(wc),ajaxTransport:Qb(sb),ajax:function(c,d){function f(c,d,m,l){var s,u,M,H,L=d;if(!r){r=!0;q&&b.clearTimeout(q);e=void 0;g=l||"";z.readyState=0<c?4:0;l=200<=c&&300>c||304===c;if(m){M=t;for(var V=z,S,C,B,A,E=M.contents,K=M.dataTypes;"*"===K[0];)K.shift(),void 0===S&&(S=M.mimeType||V.getResponseHeader("Content-Type"));if(S)for(C in E)if(E[C]&&E[C].test(S)){K.unshift(C);
break}if(K[0]in m)B=K[0];else{for(C in m){if(!K[0]||M.converters[C+" "+K[0]]){B=C;break}A||(A=C)}B=B||A}m=B?(B!==K[0]&&K.unshift(B),m[B]):void 0;M=m}var O;a:{m=t;S=M;C=z;B=l;var J,ba,P;M={};V=m.dataTypes.slice();if(V[1])for(J in m.converters)M[J.toLowerCase()]=m.converters[J];for(A=V.shift();A;)if(m.responseFields[A]&&(C[m.responseFields[A]]=S),!P&&B&&m.dataFilter&&(S=m.dataFilter(S,m.dataType)),P=A,A=V.shift())if("*"===A)A=P;else if("*"!==P&&P!==A){if(J=M[P+" "+A]||M["* "+A],!J)for(O in M)if(ba=
O.split(" "),ba[1]===A&&(J=M[P+" "+ba[0]]||M["* "+ba[0]])){!0===J?J=M[O]:!0!==M[O]&&(A=ba[0],V.unshift(ba[1]));break}if(!0!==J)if(J&&m["throws"])S=J(S);else try{S=J(S)}catch(Q){O={state:"parsererror",error:J?Q:"No conversion from "+P+" to "+A};break a}}O={state:"success",data:S}}M=O;l?(t.ifModified&&(H=z.getResponseHeader("Last-Modified"),H&&(n.lastModified[j]=H),H=z.getResponseHeader("etag"),H&&(n.etag[j]=H)),204===c||"HEAD"===t.type?L="nocontent":304===c?L="notmodified":(L=M.state,s=M.data,u=M.error,
l=!u)):(u=L,!c&&L||(L="error",0>c&&(c=0)));z.status=c;z.statusText=(d||L)+"";l?F.resolveWith(v,[s,L,z]):F.rejectWith(v,[z,L,u]);z.statusCode(G);G=void 0;p&&I.trigger(l?"ajaxSuccess":"ajaxError",[z,t,l?s:u]);D.fireWith(v,[z,L]);p&&(I.trigger("ajaxComplete",[z,t]),--n.active||n.event.trigger("ajaxStop"))}}"object"==typeof c&&(d=c,c=void 0);d=d||{};var e,j,g,m,q,l,r,p,s,u,t=n.ajaxSetup({},d),v=t.context||t,I=t.context&&(v.nodeType||v.jquery)?n(v):n.event,F=n.Deferred(),D=n.Callbacks("once memory"),G=
t.statusCode||{},M={},H={},L="canceled",z={readyState:0,getResponseHeader:function(b){var c;if(r){if(!m)for(m={};c=Ad.exec(g);)m[c[1].toLowerCase()]=c[2];c=m[b.toLowerCase()]}return null==c?null:c},getAllResponseHeaders:function(){return r?g:null},setRequestHeader:function(b,c){return null==r&&(b=H[b.toLowerCase()]=H[b.toLowerCase()]||b,M[b]=c),this},overrideMimeType:function(b){return null==r&&(t.mimeType=b),this},statusCode:function(b){var c;if(b)if(r)z.always(b[z.status]);else for(c in b)G[c]=
[G[c],b[c]];return this},abort:function(b){b=b||L;return e&&e.abort(b),f(0,b),this}};if(F.promise(z),t.url=((c||t.url||Ua.href)+"").replace(Cd,Ua.protocol+"//"),t.type=d.method||d.type||t.method||t.type,t.dataTypes=(t.dataType||"*").toLowerCase().match(ha)||[""],null==t.crossDomain){l=T.createElement("a");try{l.href=t.url,l.href=l.href,t.crossDomain=Hb.protocol+"//"+Hb.host!=l.protocol+"//"+l.host}catch(C){t.crossDomain=!0}}if(t.data&&t.processData&&"string"!=typeof t.data&&(t.data=n.param(t.data,
t.traditional)),Rb(wc,t,d,z),r)return z;(p=n.event&&t.global)&&0===n.active++&&n.event.trigger("ajaxStart");t.type=t.type.toUpperCase();t.hasContent=!Bd.test(t.type);j=t.url.replace(yd,"");t.hasContent?t.data&&t.processData&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&(t.data=t.data.replace(xd,"+")):(u=t.url.slice(j.length),t.data&&(j+=(Gb.test(j)?"&":"?")+t.data,delete t.data),!1===t.cache&&(j=j.replace(zd,"$1"),u=(Gb.test(j)?"&":"?")+"_="+uc++ +u),t.url=j+u);t.ifModified&&
(n.lastModified[j]&&z.setRequestHeader("If-Modified-Since",n.lastModified[j]),n.etag[j]&&z.setRequestHeader("If-None-Match",n.etag[j]));(t.data&&t.hasContent&&!1!==t.contentType||d.contentType)&&z.setRequestHeader("Content-Type",t.contentType);z.setRequestHeader("Accept",t.dataTypes[0]&&t.accepts[t.dataTypes[0]]?t.accepts[t.dataTypes[0]]+("*"!==t.dataTypes[0]?", "+xc+"; q=0.01":""):t.accepts["*"]);for(s in t.headers)z.setRequestHeader(s,t.headers[s]);if(t.beforeSend&&(!1===t.beforeSend.call(v,z,t)||
r))return z.abort();if(L="abort",D.add(t.complete),z.done(t.success),z.fail(t.error),e=Rb(sb,t,d,z)){if(z.readyState=1,p&&I.trigger("ajaxSend",[z,t]),r)return z;t.async&&0<t.timeout&&(q=b.setTimeout(function(){z.abort("timeout")},t.timeout));try{r=!1,e.send(M,f)}catch(B){if(r)throw B;f(-1,B)}}else f(-1,"No Transport");return z},getJSON:function(b,c,d){return n.get(b,c,d,"json")},getScript:function(b,c){return n.get(b,void 0,c,"script")}});n.each(["get","post"],function(b,c){n[c]=function(b,d,f,e){return n.isFunction(d)&&
(e=e||f,f=d,d=void 0),n.ajax(n.extend({url:b,type:c,dataType:e,data:d,success:f},n.isPlainObject(b)&&b))}});n._evalUrl=function(b){return n.ajax({url:b,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})};n.fn.extend({wrapAll:function(b){var c;return this[0]&&(n.isFunction(b)&&(b=b.call(this[0])),c=n(b,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var b=this;b.firstElementChild;)b=b.firstElementChild;return b}).append(this)),
this},wrapInner:function(b){return n.isFunction(b)?this.each(function(c){n(this).wrapInner(b.call(this,c))}):this.each(function(){var c=n(this),d=c.contents();d.length?d.wrapAll(b):c.append(b)})},wrap:function(b){var c=n.isFunction(b);return this.each(function(d){n(this).wrapAll(c?b.call(this,d):b)})},unwrap:function(b){return this.parent(b).not("body").each(function(){n(this).replaceWith(this.childNodes)}),this}});n.expr.pseudos.hidden=function(b){return!n.expr.pseudos.visible(b)};n.expr.pseudos.visible=
function(b){return!(!b.offsetWidth&&!b.offsetHeight&&!b.getClientRects().length)};n.ajaxSettings.xhr=function(){try{return new b.XMLHttpRequest}catch(c){}};var Dd={"0":200,1223:204},Va=n.ajaxSettings.xhr();X.cors=!!Va&&"withCredentials"in Va;X.ajax=Va=!!Va;n.ajaxTransport(function(c){var d,f;if(X.cors||Va&&!c.crossDomain)return{send:function(e,j){var g,m=c.xhr();if(m.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(g in c.xhrFields)m[g]=c.xhrFields[g];c.mimeType&&m.overrideMimeType&&
m.overrideMimeType(c.mimeType);c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)m.setRequestHeader(g,e[g]);d=function(b){return function(){d&&(d=f=m.onload=m.onerror=m.onabort=m.onreadystatechange=null,"abort"===b?m.abort():"error"===b?"number"!=typeof m.status?j(0,"error"):j(m.status,m.statusText):j(Dd[m.status]||m.status,m.statusText,"text"!==(m.responseType||"text")||"string"!=typeof m.responseText?{binary:m.response}:{text:m.responseText},m.getAllResponseHeaders()))}};
m.onload=d();f=m.onerror=d("error");void 0!==m.onabort?m.onabort=f:m.onreadystatechange=function(){4===m.readyState&&b.setTimeout(function(){d&&f()})};d=d("abort");try{m.send(c.hasContent&&c.data||null)}catch(l){if(d)throw l;}},abort:function(){d&&d()}}});n.ajaxPrefilter(function(b){b.crossDomain&&(b.contents.script=!1)});n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(b){return n.globalEval(b),
b}}});n.ajaxPrefilter("script",function(b){void 0===b.cache&&(b.cache=!1);b.crossDomain&&(b.type="GET")});n.ajaxTransport("script",function(b){if(b.crossDomain){var c,d;return{send:function(f,e){c=n("<script>").prop({charset:b.scriptCharset,src:b.url}).on("load error",d=function(b){c.remove();d=null;b&&e("error"===b.type?404:200,b.type)});T.head.appendChild(c[0])},abort:function(){d&&d()}}}});var yc=[],Ib=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=yc.pop()||n.expando+
"_"+uc++;return this[b]=!0,b}});n.ajaxPrefilter("json jsonp",function(c,d,f){var e,j,g,m=!1!==c.jsonp&&(Ib.test(c.url)?"url":"string"==typeof c.data&&0===(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ib.test(c.data)&&"data");if(m||"jsonp"===c.dataTypes[0])return e=c.jsonpCallback=n.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,m?c[m]=c[m].replace(Ib,"$1"+e):!1!==c.jsonp&&(c.url+=(Gb.test(c.url)?"&":"?")+c.jsonp+"="+e),c.converters["script json"]=function(){return g||
n.error(e+" was not called"),g[0]},c.dataTypes[0]="json",j=b[e],b[e]=function(){g=arguments},f.always(function(){void 0===j?n(b).removeProp(e):b[e]=j;c[e]&&(c.jsonpCallback=d.jsonpCallback,yc.push(e));g&&n.isFunction(j)&&j(g[0]);g=j=void 0}),"script"});var Ed=X,zc,Ac=T.implementation.createHTMLDocument("").body;zc=(Ac.innerHTML="<form></form><form></form>",2===Ac.childNodes.length);Ed.createHTMLDocument=zc;n.parseHTML=function(b,c,d){if("string"!=typeof b)return[];"boolean"==typeof c&&(d=c,c=!1);
var f,e,j;return c||(X.createHTMLDocument?(c=T.implementation.createHTMLDocument(""),f=c.createElement("base"),f.href=T.location.href,c.head.appendChild(f)):c=T),e=gc.exec(b),j=!d&&[],e?[c.createElement(e[1])]:(e=H([b],c,j),j&&j.length&&n(j).remove(),n.merge([],e.childNodes))};n.fn.load=function(b,c,d){var f,e,j,g=this,m=b.indexOf(" ");return-1<m&&(f=Ba(b.slice(m)),b=b.slice(0,m)),n.isFunction(c)?(d=c,c=void 0):c&&"object"==typeof c&&(e="POST"),0<g.length&&n.ajax({url:b,type:e||"GET",dataType:"html",
data:c}).done(function(b){j=arguments;g.html(f?n("<div>").append(n.parseHTML(b)).find(f):b)}).always(d&&function(b,c){g.each(function(){d.apply(this,j||[b.responseText,c,b])})}),this};n.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,c){n.fn[c]=function(b){return this.on(c,b)}});n.expr.pseudos.animated=function(b){return n.grep(n.timers,function(c){return b===c.elem}).length};n.offset={setOffset:function(b,c,d){var f,e,j,g,m,l,q=n.css(b,"position"),r=n(b),
p={};"static"===q&&(b.style.position="relative");m=r.offset();j=n.css(b,"top");l=n.css(b,"left");("absolute"===q||"fixed"===q)&&-1<(j+l).indexOf("auto")?(f=r.position(),g=f.top,e=f.left):(g=parseFloat(j)||0,e=parseFloat(l)||0);n.isFunction(c)&&(c=c.call(b,d,n.extend({},m)));null!=c.top&&(p.top=c.top-m.top+g);null!=c.left&&(p.left=c.left-m.left+e);"using"in c?c.using.call(b,p):r.css(p)}};n.fn.extend({offset:function(b){if(arguments.length)return void 0===b?this:this.each(function(c){n.offset.setOffset(this,
b,c)});var c,d,f,e,j=this[0];if(j)return j.getClientRects().length?(f=j.getBoundingClientRect(),c=j.ownerDocument,d=c.documentElement,e=c.defaultView,{top:f.top+e.pageYOffset-d.clientTop,left:f.left+e.pageXOffset-d.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var b,c,d=this[0],e={top:0,left:0};return"fixed"===n.css(d,"position")?c=d.getBoundingClientRect():(b=this.offsetParent(),c=this.offset(),f(b[0],"html")||(e=b.offset()),e={top:e.top+n.css(b[0],"borderTopWidth",!0),left:e.left+
n.css(b[0],"borderLeftWidth",!0)}),{top:c.top-e.top-n.css(d,"marginTop",!0),left:c.left-e.left-n.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&"static"===n.css(b,"position");)b=b.offsetParent;return b||mb})}});n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(f){return sa(this,function(b,f,e){var j;return n.isWindow(b)?j=b:9===b.nodeType&&(j=b.defaultView),void 0===e?j?j[c]:
b[f]:void(j?j.scrollTo(d?j.pageXOffset:e,d?e:j.pageYOffset):b[f]=e)},b,f,arguments.length)}});n.each(["top","left"],function(b,c){n.cssHooks[c]=xa(X.pixelPosition,function(b,d){if(d)return d=K(b,c),qb.test(d)?n(b).position()[c]+"px":d})});n.each({Height:"height",Width:"width"},function(b,c){n.each({padding:"inner"+b,content:c,"":"outer"+b},function(d,f){n.fn[f]=function(e,j){var g=arguments.length&&(d||"boolean"!=typeof e),m=d||(!0===e||!0===j?"margin":"border");return sa(this,function(c,d,e){var j;
return n.isWindow(c)?0===f.indexOf("outer")?c["inner"+b]:c.document.documentElement["client"+b]:9===c.nodeType?(j=c.documentElement,Math.max(c.body["scroll"+b],j["scroll"+b],c.body["offset"+b],j["offset"+b],j["client"+b])):void 0===e?n.css(c,d,m):n.style(c,d,e,m)},c,g?e:void 0,g)}})});n.fn.extend({bind:function(b,c,d){return this.on(b,null,c,d)},unbind:function(b,c){return this.off(b,null,c)},delegate:function(b,c,d,f){return this.on(c,b,d,f)},undelegate:function(b,c,d){return 1===arguments.length?
this.off(b,"**"):this.off(c,b||"**",d)}});n.holdReady=function(b){b?n.readyWait++:n.ready(!0)};n.isArray=Array.isArray;n.parseJSON=JSON.parse;n.nodeName=f;"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Fd=b.jQuery,Gd=b.$;return n.noConflict=function(c){return b.$===n&&(b.$=Gd),c&&b.jQuery===n&&(b.jQuery=Fd),n},c||(b.jQuery=b.$=n),n});function getInternetExplorerVersion(){var b=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(b=parseFloat(RegExp.$1));return b}var ie=getInternetExplorerVersion();function getQueryVariable(b){for(var c=window.location.search.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].match(/([^=]+?)=(.+)/);if(e&&decodeURIComponent(e[1])==b)return decodeURIComponent(e[2])}};(function(){var b=function(){this.init()};b.prototype={init:function(){var b=this||c;b._counter=1E3;b._html5AudioPool=[];b.html5PoolSize=10;b._codecs={};b._howls=[];b._muted=!1;b._volume=1;b._canPlayEvent="canplaythrough";b._navigator="undefined"!==typeof window&&window.navigator?window.navigator:null;b.masterGain=null;b.noAudio=!1;b.usingWebAudio=!0;b.autoSuspend=!0;b.ctx=null;b.autoUnlock=!0;b._setup();return b},volume:function(b){var d=this||c;b=parseFloat(b);d.ctx||p();if("undefined"!==typeof b&&
0<=b&&1>=b){d._volume=b;if(d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(b,c.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var e=d._howls[f]._getSoundIds(),g=0;g<e.length;g++){var l=d._howls[f]._soundById(e[g]);l&&l._node&&(l._node.volume=l._volume*b)}return d}return d._volume},mute:function(b){var d=this||c;d.ctx||p();d._muted=b;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(b?0:d._volume,c.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var e=
d._howls[f]._getSoundIds(),g=0;g<e.length;g++){var l=d._howls[f]._soundById(e[g]);l&&l._node&&(l._node.muted=b?!0:l._muted)}return d},stop:function(){for(var b=this||c,d=0;d<b._howls.length;d++)b._howls[d].stop();return b},unload:function(){for(var b=this||c,d=b._howls.length-1;0<=d;d--)b._howls[d].unload();b.usingWebAudio&&(b.ctx&&"undefined"!==typeof b.ctx.close)&&(b.ctx.close(),b.ctx=null,p());return b},codecs:function(b){return(this||c)._codecs[b.replace(/^x-/,"")]},_setup:function(){var b=this||
c;b.state=b.ctx?b.ctx.state||"suspended":"suspended";b._autoSuspend();if(!b.usingWebAudio)if("undefined"!==typeof Audio)try{var d=new Audio;"undefined"===typeof d.oncanplaythrough&&(b._canPlayEvent="canplay")}catch(f){b.noAudio=!0}else b.noAudio=!0;try{d=new Audio,d.muted&&(b.noAudio=!0)}catch(e){}b.noAudio||b._setupCodecs();return b},_setupCodecs:function(){var b=this||c,d=null;try{d="undefined"!==typeof Audio?new Audio:null}catch(f){return b}if(!d||"function"!==typeof d.canPlayType)return b;var e=
d.canPlayType("audio/mpeg;").replace(/^no$/,""),g=b._navigator?b._navigator.userAgent:"",l=g.match(/OPR\/([0-6].)/g),l=l&&33>parseInt(l[0].split("/")[1],10),p=-1!==g.indexOf("Safari")&&-1===g.indexOf("Chrome"),g=g.match(/Version\/(.*?) /),g=p&&g&&15>parseInt(g[1],10);b._codecs={mp3:!(l||!e&&!d.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!e,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,
""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||
d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(g||!d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(g||!d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")};return b},_unlockAudio:function(){var b=this||c;if(!b._audioUnlocked&&b.ctx){b._audioUnlocked=!1;b.autoUnlock=!1;!b._mobileUnloaded&&44100!==b.ctx.sampleRate&&
(b._mobileUnloaded=!0,b.unload());b._scratchBuffer=b.ctx.createBuffer(1,1,22050);var d=function(){for(;b._html5AudioPool.length<b.html5PoolSize;)try{var c=new Audio;c._unlocked=!0;b._releaseHtml5Audio(c)}catch(f){b.noAudio=!0;break}for(c=0;c<b._howls.length;c++)if(!b._howls[c]._webAudio)for(var e=b._howls[c]._getSoundIds(),g=0;g<e.length;g++){var l=b._howls[c]._soundById(e[g]);l&&(l._node&&!l._node._unlocked)&&(l._node._unlocked=!0,l._node.load())}b._autoResume();var p=b.ctx.createBufferSource();
p.buffer=b._scratchBuffer;p.connect(b.ctx.destination);"undefined"===typeof p.start?p.noteOn(0):p.start(0);"function"===typeof b.ctx.resume&&b.ctx.resume();p.onended=function(){p.disconnect(0);b._audioUnlocked=!0;document.removeEventListener("touchstart",d,!0);document.removeEventListener("touchend",d,!0);document.removeEventListener("click",d,!0);document.removeEventListener("keydown",d,!0);for(var c=0;c<b._howls.length;c++)b._howls[c]._emit("unlock")}};document.addEventListener("touchstart",d,!0);
document.addEventListener("touchend",d,!0);document.addEventListener("click",d,!0);document.addEventListener("keydown",d,!0);return b}},_obtainHtml5Audio:function(){var b=this||c;if(b._html5AudioPool.length)return b._html5AudioPool.pop();(b=(new Audio).play())&&("undefined"!==typeof Promise&&(b instanceof Promise||"function"===typeof b.then))&&b.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")});return new Audio},_releaseHtml5Audio:function(b){var d=
this||c;b._unlocked&&d._html5AudioPool.push(b);return d},_autoSuspend:function(){var b=this;if(b.autoSuspend&&b.ctx&&"undefined"!==typeof b.ctx.suspend&&c.usingWebAudio){for(var d=0;d<b._howls.length;d++)if(b._howls[d]._webAudio)for(var f=0;f<b._howls[d]._sounds.length;f++)if(!b._howls[d]._sounds[f]._paused)return b;b._suspendTimer&&clearTimeout(b._suspendTimer);b._suspendTimer=setTimeout(function(){if(b.autoSuspend){b._suspendTimer=null;b.state="suspending";var c=function(){b.state="suspended";b._resumeAfterSuspend&&
(delete b._resumeAfterSuspend,b._autoResume())};b.ctx.suspend().then(c,c)}},3E4);return b}},_autoResume:function(){var b=this;if(b.ctx&&"undefined"!==typeof b.ctx.resume&&c.usingWebAudio)return"running"===b.state&&"interrupted"!==b.ctx.state&&b._suspendTimer?(clearTimeout(b._suspendTimer),b._suspendTimer=null):"suspended"===b.state||"running"===b.state&&"interrupted"===b.ctx.state?(b.ctx.resume().then(function(){b.state="running";for(var c=0;c<b._howls.length;c++)b._howls[c]._emit("resume")}),b._suspendTimer&&
(clearTimeout(b._suspendTimer),b._suspendTimer=null)):"suspending"===b.state&&(b._resumeAfterSuspend=!0),b}};var c=new b,d=function(b){!b.src||0===b.src.length?console.error("An array of source files must be passed with any new Howl."):this.init(b)};d.prototype={init:function(b){var d=this;c.ctx||p();d._autoplay=b.autoplay||!1;d._format="string"!==typeof b.format?b.format:[b.format];d._html5=b.html5||!1;d._muted=b.mute||!1;d._loop=b.loop||!1;d._pool=b.pool||5;d._preload="boolean"===typeof b.preload||
"metadata"===b.preload?b.preload:!0;d._rate=b.rate||1;d._sprite=b.sprite||{};d._src="string"!==typeof b.src?b.src:[b.src];d._volume=void 0!==b.volume?b.volume:1;d._xhr={method:b.xhr&&b.xhr.method?b.xhr.method:"GET",headers:b.xhr&&b.xhr.headers?b.xhr.headers:null,withCredentials:b.xhr&&b.xhr.withCredentials?b.xhr.withCredentials:!1};d._duration=0;d._state="unloaded";d._sounds=[];d._endTimers={};d._queue=[];d._playLock=!1;d._onend=b.onend?[{fn:b.onend}]:[];d._onfade=b.onfade?[{fn:b.onfade}]:[];d._onload=
b.onload?[{fn:b.onload}]:[];d._onloaderror=b.onloaderror?[{fn:b.onloaderror}]:[];d._onplayerror=b.onplayerror?[{fn:b.onplayerror}]:[];d._onpause=b.onpause?[{fn:b.onpause}]:[];d._onplay=b.onplay?[{fn:b.onplay}]:[];d._onstop=b.onstop?[{fn:b.onstop}]:[];d._onmute=b.onmute?[{fn:b.onmute}]:[];d._onvolume=b.onvolume?[{fn:b.onvolume}]:[];d._onrate=b.onrate?[{fn:b.onrate}]:[];d._onseek=b.onseek?[{fn:b.onseek}]:[];d._onunlock=b.onunlock?[{fn:b.onunlock}]:[];d._onresume=[];d._webAudio=c.usingWebAudio&&!d._html5;
"undefined"!==typeof c.ctx&&(c.ctx&&c.autoUnlock)&&c._unlockAudio();c._howls.push(d);d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}});d._preload&&"none"!==d._preload&&d.load();return d},load:function(){var b=null;if(c.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"===typeof this._src&&(this._src=[this._src]);for(var d=0;d<this._src.length;d++){var m,p;if(this._format&&this._format[d])m=this._format[d];else{p=this._src[d];if("string"!==typeof p){this._emit("loaderror",
null,"Non-string found in selected audio sources - ignoring.");continue}(m=/^data:audio\/([^;,]+);/i.exec(p))||(m=/\.([^.]+)$/.exec(p.split("?",1)[0]));m&&(m=m[1].toLowerCase())}m||console.warn('No file extension was found. Consider using the "format" property or specify an extension.');if(m&&c.codecs(m)){b=this._src[d];break}}if(b){this._src=b;this._state="loading";"https:"===window.location.protocol&&"http:"===b.slice(0,5)&&(this._html5=!0,this._webAudio=!1);new e(this);if(this._webAudio){var r=
this,u=r._src;if(f[u])r._duration=f[u].duration,l(r);else if(/^data:[^;]+;base64,/.test(u)){b=atob(u.split(",")[1]);d=new Uint8Array(b.length);for(m=0;m<b.length;++m)d[m]=b.charCodeAt(m);g(d.buffer,r)}else{var t=new XMLHttpRequest;t.open(r._xhr.method,u,!0);t.withCredentials=r._xhr.withCredentials;t.responseType="arraybuffer";r._xhr.headers&&Object.keys(r._xhr.headers).forEach(function(b){t.setRequestHeader(b,r._xhr.headers[b])});t.onload=function(){var b=(t.status+"")[0];"0"!==b&&"2"!==b&&"3"!==
b?r._emit("loaderror",null,"Failed loading audio file with status: "+t.status+"."):g(t.response,r)};t.onerror=function(){r._webAudio&&(r._html5=!0,r._webAudio=!1,r._sounds=[],delete f[u],r.load())};try{t.send()}catch(D){t.onerror()}}}return this}this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(b,d){var f=this,e=null;if("number"===typeof b)e=b,b=null;else{if("string"===typeof b&&"loaded"===f._state&&!f._sprite[b])return null;if("undefined"===typeof b&&(b=
"__default",!f._playLock)){for(var g=0,l=0;l<f._sounds.length;l++)f._sounds[l]._paused&&!f._sounds[l]._ended&&(g++,e=f._sounds[l]._id);1===g?b=null:e=null}}var p=e?f._soundById(e):f._inactiveSound();if(!p)return null;e&&!b&&(b=p._sprite||"__default");if("loaded"!==f._state){p._sprite=b;p._ended=!1;var D=p._id;f._queue.push({event:"play",action:function(){f.play(D)}});return D}if(e&&!p._paused)return d||f._loadQueue("play"),p._id;f._webAudio&&c._autoResume();var F=Math.max(0,0<p._seek?p._seek:f._sprite[b][0]/
1E3),H=Math.max(0,(f._sprite[b][0]+f._sprite[b][1])/1E3-F),I=1E3*H/Math.abs(p._rate),v=f._sprite[b][0]/1E3,G=(f._sprite[b][0]+f._sprite[b][1])/1E3;p._sprite=b;p._ended=!1;var M=function(){p._paused=!1;p._seek=F;p._start=v;p._stop=G;p._loop=!(!p._loop&&!f._sprite[b][2])};if(F>=G)f._ended(p);else{var L=p._node;if(f._webAudio)e=function(){f._playLock=!1;M();f._refreshBuffer(p);L.gain.setValueAtTime(p._muted||f._muted?0:p._volume,c.ctx.currentTime);p._playStart=c.ctx.currentTime;"undefined"===typeof L.bufferSource.start?
p._loop?L.bufferSource.noteGrainOn(0,F,86400):L.bufferSource.noteGrainOn(0,F,H):p._loop?L.bufferSource.start(0,F,86400):L.bufferSource.start(0,F,H);Infinity!==I&&(f._endTimers[p._id]=setTimeout(f._ended.bind(f,p),I));d||setTimeout(function(){f._emit("play",p._id);f._loadQueue()},0)},"running"===c.state&&"interrupted"!==c.ctx.state?e():(f._playLock=!0,f.once("resume",e),f._clearTimer(p._id));else{var O=function(){L.currentTime=F;L.muted=p._muted||f._muted||c._muted||L.muted;L.volume=p._volume*c.volume();
L.playbackRate=p._rate;try{var e=L.play();e&&"undefined"!==typeof Promise&&(e instanceof Promise||"function"===typeof e.then)?(f._playLock=!0,M(),e.then(function(){f._playLock=!1;L._unlocked=!0;d?f._loadQueue():f._emit("play",p._id)}).catch(function(){f._playLock=!1;f._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");p._ended=!0;p._paused=!0})):d||(f._playLock=!1,M(),f._emit("play",
p._id));L.playbackRate=p._rate;L.paused?f._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."):"__default"!==b||p._loop?f._endTimers[p._id]=setTimeout(f._ended.bind(f,p),I):(f._endTimers[p._id]=function(){f._ended(p);L.removeEventListener("ended",f._endTimers[p._id],!1)},L.addEventListener("ended",f._endTimers[p._id],!1))}catch(g){f._emit("playerror",p._id,g)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===
L.src&&(L.src=f._src,L.load());e=window&&window.ejecta||!L.readyState&&c._navigator.isCocoonJS;if(3<=L.readyState||e)O();else{f._playLock=!0;f._state="loading";var Q=function(){f._state="loaded";O();L.removeEventListener(c._canPlayEvent,Q,!1)};L.addEventListener(c._canPlayEvent,Q,!1);f._clearTimer(p._id)}}return p._id}},pause:function(b,c){var d=this;if("loaded"!==d._state||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(b)}}),d;for(var f=d._getSoundIds(b),e=0;e<f.length;e++){d._clearTimer(f[e]);
var g=d._soundById(f[e]);if(g&&!g._paused&&(g._seek=d.seek(f[e]),g._rateSeek=0,g._paused=!0,d._stopFade(f[e]),g._node))if(d._webAudio){if(!g._node.bufferSource)continue;"undefined"===typeof g._node.bufferSource.stop?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0);d._cleanBuffer(g._node)}else(!isNaN(g._node.duration)||Infinity===g._node.duration)&&g._node.pause();c||d._emit("pause",g?g._id:null)}return d},stop:function(b,c){var d=this;if("loaded"!==d._state||d._playLock)return d._queue.push({event:"stop",
action:function(){d.stop(b)}}),d;for(var f=d._getSoundIds(b),e=0;e<f.length;e++){d._clearTimer(f[e]);var g=d._soundById(f[e]);if(g){g._seek=g._start||0;g._rateSeek=0;g._paused=!0;g._ended=!0;d._stopFade(f[e]);if(g._node)if(d._webAudio)g._node.bufferSource&&("undefined"===typeof g._node.bufferSource.stop?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),d._cleanBuffer(g._node));else if(!isNaN(g._node.duration)||Infinity===g._node.duration)g._node.currentTime=g._start||0,g._node.pause(),
Infinity===g._node.duration&&d._clearSound(g._node);c||d._emit("stop",g._id)}}return d},mute:function(b,d){var f=this;if("loaded"!==f._state||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(b,d)}}),f;if("undefined"===typeof d)if("boolean"===typeof b)f._muted=b;else return f._muted;for(var e=f._getSoundIds(d),g=0;g<e.length;g++){var l=f._soundById(e[g]);l&&(l._muted=b,l._interval&&f._stopFade(l._id),f._webAudio&&l._node?l._node.gain.setValueAtTime(b?0:l._volume,c.ctx.currentTime):
l._node&&(l._node.muted=c._muted?!0:b),f._emit("mute",l._id))}return f},volume:function(){var b=this,d=arguments,f,e;if(0===d.length)return b._volume;1===d.length||2===d.length&&"undefined"===typeof d[1]?0<=b._getSoundIds().indexOf(d[0])?e=parseInt(d[0],10):f=parseFloat(d[0]):2<=d.length&&(f=parseFloat(d[0]),e=parseInt(d[1],10));var g;if("undefined"!==typeof f&&0<=f&&1>=f){if("loaded"!==b._state||b._playLock)return b._queue.push({event:"volume",action:function(){b.volume.apply(b,d)}}),b;"undefined"===
typeof e&&(b._volume=f);e=b._getSoundIds(e);for(var l=0;l<e.length;l++)if(g=b._soundById(e[l]))g._volume=f,d[2]||b._stopFade(e[l]),b._webAudio&&g._node&&!g._muted?g._node.gain.setValueAtTime(f,c.ctx.currentTime):g._node&&!g._muted&&(g._node.volume=f*c.volume()),b._emit("volume",g._id)}else return(g=e?b._soundById(e):b._sounds[0])?g._volume:0;return b},fade:function(b,d,f,e){var g=this;if("loaded"!==g._state||g._playLock)return g._queue.push({event:"fade",action:function(){g.fade(b,d,f,e)}}),g;b=Math.min(Math.max(0,
parseFloat(b)),1);d=Math.min(Math.max(0,parseFloat(d)),1);f=parseFloat(f);g.volume(b,e);for(var l=g._getSoundIds(e),p=0;p<l.length;p++){var D=g._soundById(l[p]);if(D){e||g._stopFade(l[p]);if(g._webAudio&&!D._muted){var F=c.ctx.currentTime,H=F+f/1E3;D._volume=b;D._node.gain.setValueAtTime(b,F);D._node.gain.linearRampToValueAtTime(d,H)}g._startFadeInterval(D,b,d,f,l[p],"undefined"===typeof e)}}return g},_startFadeInterval:function(b,c,d,f,e,g){var l=this,p=c,F=d-c;e=Math.abs(F/0.01);e=Math.max(4,0<
e?f/e:f);var H=Date.now();b._fadeTo=d;b._interval=setInterval(function(){var e=(Date.now()-H)/f;H=Date.now();p+=F*e;p=Math.round(100*p)/100;p=0>F?Math.max(d,p):Math.min(d,p);l._webAudio?b._volume=p:l.volume(p,b._id,!0);g&&(l._volume=p);if(d<c&&p<=d||d>c&&p>=d)clearInterval(b._interval),b._interval=null,b._fadeTo=null,l.volume(d,b._id),l._emit("fade",b._id)},e)},_stopFade:function(b){var d=this._soundById(b);d&&d._interval&&(this._webAudio&&d._node.gain.cancelScheduledValues(c.ctx.currentTime),clearInterval(d._interval),
d._interval=null,this.volume(d._fadeTo,b),d._fadeTo=null,this._emit("fade",b));return this},loop:function(){var b=arguments,c,d;if(0===b.length)return this._loop;if(1===b.length)if("boolean"===typeof b[0])this._loop=c=b[0];else return(b=this._soundById(parseInt(b[0],10)))?b._loop:!1;else 2===b.length&&(c=b[0],d=parseInt(b[1],10));d=this._getSoundIds(d);for(var f=0;f<d.length;f++)if(b=this._soundById(d[f]))if(b._loop=c,this._webAudio&&(b._node&&b._node.bufferSource)&&(b._node.bufferSource.loop=c))b._node.bufferSource.loopStart=
b._start||0,b._node.bufferSource.loopEnd=b._stop,this.playing(d[f])&&(this.pause(d[f],!0),this.play(d[f],!0));return this},rate:function(){var b=this,d=arguments,f,e;0===d.length?e=b._sounds[0]._id:1===d.length?0<=b._getSoundIds().indexOf(d[0])?e=parseInt(d[0],10):f=parseFloat(d[0]):2===d.length&&(f=parseFloat(d[0]),e=parseInt(d[1],10));var g;if("number"===typeof f){if("loaded"!==b._state||b._playLock)return b._queue.push({event:"rate",action:function(){b.rate.apply(b,d)}}),b;"undefined"===typeof e&&
(b._rate=f);e=b._getSoundIds(e);for(var l=0;l<e.length;l++)if(g=b._soundById(e[l])){b.playing(e[l])&&(g._rateSeek=b.seek(e[l]),g._playStart=b._webAudio?c.ctx.currentTime:g._playStart);g._rate=f;b._webAudio&&g._node&&g._node.bufferSource?g._node.bufferSource.playbackRate.setValueAtTime(f,c.ctx.currentTime):g._node&&(g._node.playbackRate=f);var p=b.seek(e[l]),p=1E3*((b._sprite[g._sprite][0]+b._sprite[g._sprite][1])/1E3-p)/Math.abs(g._rate);if(b._endTimers[e[l]]||!g._paused)b._clearTimer(e[l]),b._endTimers[e[l]]=
setTimeout(b._ended.bind(b,g),p);b._emit("rate",g._id)}}else return(g=b._soundById(e))?g._rate:b._rate;return b},seek:function(){var b=this,d=arguments,f,e;0===d.length?b._sounds.length&&(e=b._sounds[0]._id):1===d.length?0<=b._getSoundIds().indexOf(d[0])?e=parseInt(d[0],10):b._sounds.length&&(e=b._sounds[0]._id,f=parseFloat(d[0])):2===d.length&&(f=parseFloat(d[0]),e=parseInt(d[1],10));if("undefined"===typeof e)return 0;if("number"===typeof f&&("loaded"!==b._state||b._playLock))return b._queue.push({event:"seek",
action:function(){b.seek.apply(b,d)}}),b;var g=b._soundById(e);if(g)if("number"===typeof f&&0<=f){var l=b.playing(e);l&&b.pause(e,!0);g._seek=f;g._ended=!1;b._clearTimer(e);!b._webAudio&&(g._node&&!isNaN(g._node.duration))&&(g._node.currentTime=f);var p=function(){l&&b.play(e,!0);b._emit("seek",e)};if(l&&!b._webAudio){var D=function(){b._playLock?setTimeout(D,0):p()};setTimeout(D,0)}else p()}else return b._webAudio?(f=b.playing(e)?c.ctx.currentTime-g._playStart:0,g._seek+((g._rateSeek?g._rateSeek-
g._seek:0)+f*Math.abs(g._rate))):g._node.currentTime;return b},playing:function(b){if("number"===typeof b)return(b=this._soundById(b))?!b._paused:!1;for(b=0;b<this._sounds.length;b++)if(!this._sounds[b]._paused)return!0;return!1},duration:function(b){var c=this._duration;(b=this._soundById(b))&&(c=this._sprite[b._sprite][1]/1E3);return c},state:function(){return this._state},unload:function(){for(var b=this._sounds,d=0;d<b.length;d++)b[d]._paused||this.stop(b[d]._id),this._webAudio||(this._clearSound(b[d]._node),
b[d]._node.removeEventListener("error",b[d]._errorFn,!1),b[d]._node.removeEventListener(c._canPlayEvent,b[d]._loadFn,!1),b[d]._node.removeEventListener("ended",b[d]._endFn,!1),c._releaseHtml5Audio(b[d]._node)),delete b[d]._node,this._clearTimer(b[d]._id);d=c._howls.indexOf(this);0<=d&&c._howls.splice(d,1);b=!0;for(d=0;d<c._howls.length;d++)if(c._howls[d]._src===this._src||0<=this._src.indexOf(c._howls[d]._src)){b=!1;break}f&&b&&delete f[this._src];c.noAudio=!1;this._state="unloaded";this._sounds=
[];return null},on:function(b,c,d,f){b=this["_on"+b];"function"===typeof c&&b.push(f?{id:d,fn:c,once:f}:{id:d,fn:c});return this},off:function(b,c,d){var f=this["_on"+b],e=0;"number"===typeof c&&(d=c,c=null);if(c||d)for(e=0;e<f.length;e++){if(b=d===f[e].id,c===f[e].fn&&b||!c&&b){f.splice(e,1);break}}else if(b)this["_on"+b]=[];else{c=Object.keys(this);for(e=0;e<c.length;e++)0===c[e].indexOf("_on")&&Array.isArray(this[c[e]])&&(this[c[e]]=[])}return this},once:function(b,c,d){this.on(b,c,d,1);return this},
_emit:function(b,c,d){for(var f=this["_on"+b],e=f.length-1;0<=e;e--)if(!f[e].id||f[e].id===c||"load"===b)setTimeout(function(b){b.call(this,c,d)}.bind(this,f[e].fn),0),f[e].once&&this.off(b,f[e].fn,f[e].id);this._loadQueue(b);return this},_loadQueue:function(b){if(0<this._queue.length){var c=this._queue[0];c.event===b&&(this._queue.shift(),this._loadQueue());b||c.action()}return this},_ended:function(b){var d=b._sprite;if(!this._webAudio&&b._node&&!b._node.paused&&!b._node.ended&&b._node.currentTime<
b._stop)return setTimeout(this._ended.bind(this,b),100),this;d=!(!b._loop&&!this._sprite[d][2]);this._emit("end",b._id);!this._webAudio&&d&&this.stop(b._id,!0).play(b._id);if(this._webAudio&&d){this._emit("play",b._id);b._seek=b._start||0;b._rateSeek=0;b._playStart=c.ctx.currentTime;var f=1E3*(b._stop-b._start)/Math.abs(b._rate);this._endTimers[b._id]=setTimeout(this._ended.bind(this,b),f)}this._webAudio&&!d&&(b._paused=!0,b._ended=!0,b._seek=b._start||0,b._rateSeek=0,this._clearTimer(b._id),this._cleanBuffer(b._node),
c._autoSuspend());!this._webAudio&&!d&&this.stop(b._id,!0);return this},_clearTimer:function(b){if(this._endTimers[b]){if("function"!==typeof this._endTimers[b])clearTimeout(this._endTimers[b]);else{var c=this._soundById(b);c&&c._node&&c._node.removeEventListener("ended",this._endTimers[b],!1)}delete this._endTimers[b]}return this},_soundById:function(b){for(var c=0;c<this._sounds.length;c++)if(b===this._sounds[c]._id)return this._sounds[c];return null},_inactiveSound:function(){this._drain();for(var b=
0;b<this._sounds.length;b++)if(this._sounds[b]._ended)return this._sounds[b].reset();return new e(this)},_drain:function(){var b=this._pool,c=0,d=0;if(!(this._sounds.length<b)){for(d=0;d<this._sounds.length;d++)this._sounds[d]._ended&&c++;for(d=this._sounds.length-1;0<=d&&!(c<=b);d--)this._sounds[d]._ended&&(this._webAudio&&this._sounds[d]._node&&this._sounds[d]._node.disconnect(0),this._sounds.splice(d,1),c--)}},_getSoundIds:function(b){if("undefined"===typeof b){b=[];for(var c=0;c<this._sounds.length;c++)b.push(this._sounds[c]._id);
return b}return[b]},_refreshBuffer:function(b){b._node.bufferSource=c.ctx.createBufferSource();b._node.bufferSource.buffer=f[this._src];b._panner?b._node.bufferSource.connect(b._panner):b._node.bufferSource.connect(b._node);if(b._node.bufferSource.loop=b._loop)b._node.bufferSource.loopStart=b._start||0,b._node.bufferSource.loopEnd=b._stop||0;b._node.bufferSource.playbackRate.setValueAtTime(b._rate,c.ctx.currentTime);return this},_cleanBuffer:function(b){var d=c._navigator&&0<=c._navigator.vendor.indexOf("Apple");
if(c._scratchBuffer&&b.bufferSource&&(b.bufferSource.onended=null,b.bufferSource.disconnect(0),d))try{b.bufferSource.buffer=c._scratchBuffer}catch(f){}b.bufferSource=null;return this},_clearSound:function(b){/MSIE |Trident\//.test(c._navigator&&c._navigator.userAgent)||(b.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var e=function(b){this._parent=b;this.init()};e.prototype={init:function(){var b=this._parent;this._muted=b._muted;this._loop=b._loop;
this._volume=b._volume;this._rate=b._rate;this._seek=0;this._ended=this._paused=!0;this._sprite="__default";this._id=++c._counter;b._sounds.push(this);this.create();return this},create:function(){var b=this._parent,d=c._muted||this._muted||this._parent._muted?0:this._volume;b._webAudio?(this._node="undefined"===typeof c.ctx.createGain?c.ctx.createGainNode():c.ctx.createGain(),this._node.gain.setValueAtTime(d,c.ctx.currentTime),this._node.paused=!0,this._node.connect(c.masterGain)):c.noAudio||(this._node=
c._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(c._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=b._src,this._node.preload=!0===b._preload?"auto":b._preload,this._node.volume=d*c.volume(),this._node.load());return this},reset:function(){var b=this._parent;this._muted=
b._muted;this._loop=b._loop;this._volume=b._volume;this._rate=b._rate;this._rateSeek=this._seek=0;this._ended=this._paused=!0;this._sprite="__default";this._id=++c._counter;return this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0);this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var b=this._parent;b._duration=Math.ceil(10*this._node.duration)/10;0===Object.keys(b._sprite).length&&(b._sprite={__default:[0,
1E3*b._duration]});"loaded"!==b._state&&(b._state="loaded",b._emit("load"),b._loadQueue());this._node.removeEventListener(c._canPlayEvent,this._loadFn,!1)},_endListener:function(){var b=this._parent;Infinity===b._duration&&(b._duration=Math.ceil(10*this._node.duration)/10,Infinity===b._sprite.__default[1]&&(b._sprite.__default[1]=1E3*b._duration),b._ended(this));this._node.removeEventListener("ended",this._endFn,!1)}};var f={},g=function(b,d){var e=function(){d._emit("loaderror",null,"Decoding audio data failed.")},
g=function(b){b&&0<d._sounds.length?(f[d._src]=b,l(d,b)):e()};"undefined"!==typeof Promise&&1===c.ctx.decodeAudioData.length?c.ctx.decodeAudioData(b).then(g).catch(e):c.ctx.decodeAudioData(b,g,e)},l=function(b,c){c&&!b._duration&&(b._duration=c.duration);0===Object.keys(b._sprite).length&&(b._sprite={__default:[0,1E3*b._duration]});"loaded"!==b._state&&(b._state="loaded",b._emit("load"),b._loadQueue())},p=function(){if(c.usingWebAudio){try{"undefined"!==typeof AudioContext?c.ctx=new AudioContext:
"undefined"!==typeof webkitAudioContext?c.ctx=new webkitAudioContext:c.usingWebAudio=!1}catch(b){c.usingWebAudio=!1}c.ctx||(c.usingWebAudio=!1);var d=/iP(hone|od|ad)/.test(c._navigator&&c._navigator.platform),f=c._navigator&&c._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=f?parseInt(f[1],10):null;d&&(f&&9>f)&&(d=/safari/.test(c._navigator&&c._navigator.userAgent.toLowerCase()),c._navigator&&!d&&(c.usingWebAudio=!1));c.usingWebAudio&&(c.masterGain="undefined"===typeof c.ctx.createGain?c.ctx.createGainNode():
c.ctx.createGain(),c.masterGain.gain.setValueAtTime(c._muted?0:c._volume,c.ctx.currentTime),c.masterGain.connect(c.ctx.destination));c._setup()}};"function"===typeof define&&define.amd&&define([],function(){return{Howler:c,Howl:d}});"undefined"!==typeof exports&&(exports.Howler=c,exports.Howl=d);"undefined"!==typeof global?(global.HowlerGlobal=b,global.Howler=c,global.Howl=d,global.Sound=e):"undefined"!==typeof window&&(window.HowlerGlobal=b,window.Howler=c,window.Howl=d,window.Sound=e)})();
(function(){HowlerGlobal.prototype._pos=[0,0,0];HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0];HowlerGlobal.prototype.stereo=function(b){if(!this.ctx||!this.ctx.listener)return this;for(var c=this._howls.length-1;0<=c;c--)this._howls[c].stereo(b);return this};HowlerGlobal.prototype.pos=function(b,c,d){if(!this.ctx||!this.ctx.listener)return this;c="number"!==typeof c?this._pos[1]:c;d="number"!==typeof d?this._pos[2]:d;if("number"===typeof b)this._pos=[b,c,d],"undefined"!==typeof this.ctx.listener.positionX?
(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,0.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,0.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,0.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]);else return this._pos;return this};HowlerGlobal.prototype.orientation=function(b,c,d,e,j,q){if(!this.ctx||!this.ctx.listener)return this;var m=this._orientation;c="number"!==
typeof c?m[1]:c;d="number"!==typeof d?m[2]:d;e="number"!==typeof e?m[3]:e;j="number"!==typeof j?m[4]:j;q="number"!==typeof q?m[5]:q;if("number"===typeof b)this._orientation=[b,c,d,e,j,q],"undefined"!==typeof this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(b,Howler.ctx.currentTime,0.1),this.ctx.listener.forwardY.setTargetAtTime(c,Howler.ctx.currentTime,0.1),this.ctx.listener.forwardZ.setTargetAtTime(d,Howler.ctx.currentTime,0.1),this.ctx.listener.upX.setTargetAtTime(e,Howler.ctx.currentTime,
0.1),this.ctx.listener.upY.setTargetAtTime(j,Howler.ctx.currentTime,0.1),this.ctx.listener.upZ.setTargetAtTime(q,Howler.ctx.currentTime,0.1)):this.ctx.listener.setOrientation(b,c,d,e,j,q);else return m;return this};var b=Howl.prototype.init;Howl.prototype.init=function(c){this._orientation=c.orientation||[1,0,0];this._stereo=c.stereo||null;this._pos=c.pos||null;this._pannerAttr={coneInnerAngle:"undefined"!==typeof c.coneInnerAngle?c.coneInnerAngle:360,coneOuterAngle:"undefined"!==typeof c.coneOuterAngle?
c.coneOuterAngle:360,coneOuterGain:"undefined"!==typeof c.coneOuterGain?c.coneOuterGain:0,distanceModel:"undefined"!==typeof c.distanceModel?c.distanceModel:"inverse",maxDistance:"undefined"!==typeof c.maxDistance?c.maxDistance:1E4,panningModel:"undefined"!==typeof c.panningModel?c.panningModel:"HRTF",refDistance:"undefined"!==typeof c.refDistance?c.refDistance:1,rolloffFactor:"undefined"!==typeof c.rolloffFactor?c.rolloffFactor:1};this._onstereo=c.onstereo?[{fn:c.onstereo}]:[];this._onpos=c.onpos?
[{fn:c.onpos}]:[];this._onorientation=c.onorientation?[{fn:c.onorientation}]:[];return b.call(this,c)};Howl.prototype.stereo=function(b,c){var d=this;if(!d._webAudio)return d;if("loaded"!==d._state)return d._queue.push({event:"stereo",action:function(){d.stereo(b,c)}}),d;var p="undefined"===typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"===typeof c)if("number"===typeof b)d._stereo=b,d._pos=[b,0,0];else return d._stereo;for(var j=d._getSoundIds(c),q=0;q<j.length;q++){var m=d._soundById(j[q]);
if(m)if("number"===typeof b)m._stereo=b,m._pos=[b,0,0],m._node&&(m._pannerAttr.panningModel="equalpower",(!m._panner||!m._panner.pan)&&e(m,p),"spatial"===p?"undefined"!==typeof m._panner.positionX?(m._panner.positionX.setValueAtTime(b,Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):m._panner.setPosition(b,0,0):m._panner.pan.setValueAtTime(b,Howler.ctx.currentTime)),d._emit("stereo",m._id);else return m._stereo}return d};
Howl.prototype.pos=function(b,c,d,p){var j=this;if(!j._webAudio)return j;if("loaded"!==j._state)return j._queue.push({event:"pos",action:function(){j.pos(b,c,d,p)}}),j;c="number"!==typeof c?0:c;d="number"!==typeof d?-0.5:d;if("undefined"===typeof p)if("number"===typeof b)j._pos=[b,c,d];else return j._pos;for(var q=j._getSoundIds(p),m=0;m<q.length;m++){var s=j._soundById(q[m]);if(s)if("number"===typeof b)s._pos=[b,c,d],s._node&&((!s._panner||s._panner.pan)&&e(s,"spatial"),"undefined"!==typeof s._panner.positionX?
(s._panner.positionX.setValueAtTime(b,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(c,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(d,Howler.ctx.currentTime)):s._panner.setPosition(b,c,d)),j._emit("pos",s._id);else return s._pos}return j};Howl.prototype.orientation=function(b,c,d,p){var j=this;if(!j._webAudio)return j;if("loaded"!==j._state)return j._queue.push({event:"orientation",action:function(){j.orientation(b,c,d,p)}}),j;c="number"!==typeof c?j._orientation[1]:c;d=
"number"!==typeof d?j._orientation[2]:d;if("undefined"===typeof p)if("number"===typeof b)j._orientation=[b,c,d];else return j._orientation;for(var q=j._getSoundIds(p),m=0;m<q.length;m++){var s=j._soundById(q[m]);if(s)if("number"===typeof b)s._orientation=[b,c,d],s._node&&(s._panner||(s._pos||(s._pos=j._pos||[0,0,-0.5]),e(s,"spatial")),"undefined"!==typeof s._panner.orientationX?(s._panner.orientationX.setValueAtTime(b,Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(c,Howler.ctx.currentTime),
s._panner.orientationZ.setValueAtTime(d,Howler.ctx.currentTime)):s._panner.setOrientation(b,c,d)),j._emit("orientation",s._id);else return s._orientation}return j};Howl.prototype.pannerAttr=function(){var b=arguments,c,d;if(!this._webAudio)return this;if(0===b.length)return this._pannerAttr;if(1===b.length)if("object"===typeof b[0])c=b[0],"undefined"===typeof d&&(c.pannerAttr||(c.pannerAttr={coneInnerAngle:c.coneInnerAngle,coneOuterAngle:c.coneOuterAngle,coneOuterGain:c.coneOuterGain,distanceModel:c.distanceModel,
maxDistance:c.maxDistance,refDistance:c.refDistance,rolloffFactor:c.rolloffFactor,panningModel:c.panningModel}),this._pannerAttr={coneInnerAngle:"undefined"!==typeof c.pannerAttr.coneInnerAngle?c.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:"undefined"!==typeof c.pannerAttr.coneOuterAngle?c.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:"undefined"!==typeof c.pannerAttr.coneOuterGain?c.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:"undefined"!==typeof c.pannerAttr.distanceModel?
c.pannerAttr.distanceModel:this._distanceModel,maxDistance:"undefined"!==typeof c.pannerAttr.maxDistance?c.pannerAttr.maxDistance:this._maxDistance,refDistance:"undefined"!==typeof c.pannerAttr.refDistance?c.pannerAttr.refDistance:this._refDistance,rolloffFactor:"undefined"!==typeof c.pannerAttr.rolloffFactor?c.pannerAttr.rolloffFactor:this._rolloffFactor,panningModel:"undefined"!==typeof c.pannerAttr.panningModel?c.pannerAttr.panningModel:this._panningModel});else return(b=this._soundById(parseInt(b[0],
10)))?b._pannerAttr:this._pannerAttr;else 2===b.length&&(c=b[0],d=parseInt(b[1],10));d=this._getSoundIds(d);for(var p=0;p<d.length;p++)if(b=this._soundById(d[p])){var j=b._pannerAttr,j={coneInnerAngle:"undefined"!==typeof c.coneInnerAngle?c.coneInnerAngle:j.coneInnerAngle,coneOuterAngle:"undefined"!==typeof c.coneOuterAngle?c.coneOuterAngle:j.coneOuterAngle,coneOuterGain:"undefined"!==typeof c.coneOuterGain?c.coneOuterGain:j.coneOuterGain,distanceModel:"undefined"!==typeof c.distanceModel?c.distanceModel:
j.distanceModel,maxDistance:"undefined"!==typeof c.maxDistance?c.maxDistance:j.maxDistance,refDistance:"undefined"!==typeof c.refDistance?c.refDistance:j.refDistance,rolloffFactor:"undefined"!==typeof c.rolloffFactor?c.rolloffFactor:j.rolloffFactor,panningModel:"undefined"!==typeof c.panningModel?c.panningModel:j.panningModel},q=b._panner;q?(q.coneInnerAngle=j.coneInnerAngle,q.coneOuterAngle=j.coneOuterAngle,q.coneOuterGain=j.coneOuterGain,q.distanceModel=j.distanceModel,q.maxDistance=j.maxDistance,
q.refDistance=j.refDistance,q.rolloffFactor=j.rolloffFactor,q.panningModel=j.panningModel):(b._pos||(b._pos=this._pos||[0,0,-0.5]),e(b,"spatial"))}return this};var c=Sound.prototype.init;Sound.prototype.init=function(){var b=this._parent;this._orientation=b._orientation;this._stereo=b._stereo;this._pos=b._pos;this._pannerAttr=b._pannerAttr;c.call(this);this._stereo?b.stereo(this._stereo):this._pos&&b.pos(this._pos[0],this._pos[1],this._pos[2],this._id)};var d=Sound.prototype.reset;Sound.prototype.reset=
function(){var b=this._parent;this._orientation=b._orientation;this._stereo=b._stereo;this._pos=b._pos;this._pannerAttr=b._pannerAttr;this._stereo?b.stereo(this._stereo):this._pos?b.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,b._refreshBuffer(this));return d.call(this)};var e=function(b,c){"spatial"===(c||"spatial")?(b._panner=Howler.ctx.createPanner(),b._panner.coneInnerAngle=b._pannerAttr.coneInnerAngle,b._panner.coneOuterAngle=
b._pannerAttr.coneOuterAngle,b._panner.coneOuterGain=b._pannerAttr.coneOuterGain,b._panner.distanceModel=b._pannerAttr.distanceModel,b._panner.maxDistance=b._pannerAttr.maxDistance,b._panner.refDistance=b._pannerAttr.refDistance,b._panner.rolloffFactor=b._pannerAttr.rolloffFactor,b._panner.panningModel=b._pannerAttr.panningModel,"undefined"!==typeof b._panner.positionX?(b._panner.positionX.setValueAtTime(b._pos[0],Howler.ctx.currentTime),b._panner.positionY.setValueAtTime(b._pos[1],Howler.ctx.currentTime),
b._panner.positionZ.setValueAtTime(b._pos[2],Howler.ctx.currentTime)):b._panner.setPosition(b._pos[0],b._pos[1],b._pos[2]),"undefined"!==typeof b._panner.orientationX?(b._panner.orientationX.setValueAtTime(b._orientation[0],Howler.ctx.currentTime),b._panner.orientationY.setValueAtTime(b._orientation[1],Howler.ctx.currentTime),b._panner.orientationZ.setValueAtTime(b._orientation[2],Howler.ctx.currentTime)):b._panner.setOrientation(b._orientation[0],b._orientation[1],b._orientation[2])):(b._panner=
Howler.ctx.createStereoPanner(),b._panner.pan.setValueAtTime(b._stereo,Howler.ctx.currentTime));b._panner.connect(b._node);b._paused||b._parent.pause(b._id,!0).play(b._id,!0)}})();!function(b,c){"object"==typeof exports&&"undefined"!=typeof module?c():"function"==typeof define&&define.amd?define(c):c()}(0,function(){function b(b){var c=this.constructor;return this.then(function(d){return c.resolve(b()).then(function(){return d})},function(d){return c.resolve(b()).then(function(){return c.reject(d)})})}function c(){}function d(b){if(!(this instanceof d))throw new TypeError("Promises must be constructed via new");if("function"!=typeof b)throw new TypeError("not a function");
this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];p(b,this)}function e(b,c){for(;3===b._state;)b=b._value;0!==b._state?(b._handled=!0,d._immediateFn(function(){var d=1===b._state?c.onFulfilled:c.onRejected;if(null!==d){var e;try{e=d(b._value)}catch(j){return void g(c.promise,j)}f(c.promise,e)}else(1===b._state?f:g)(c.promise,b._value)})):b._deferreds.push(c)}function f(b,c){try{if(c===b)throw new TypeError("A promise cannot be resolved with itself.");if(c&&("object"==typeof c||
"function"==typeof c)){var f=c.then;if(c instanceof d)return b._state=3,b._value=c,void l(b);if("function"==typeof f)return void p(function(){f.apply(c,arguments)},b)}b._state=1;b._value=c;l(b)}catch(e){g(b,e)}}function g(b,c){b._state=2;b._value=c;l(b)}function l(b){2===b._state&&0===b._deferreds.length&&d._immediateFn(function(){b._handled||d._unhandledRejectionFn(b._value)});for(var c=0,f=b._deferreds.length;f>c;c++)e(b,b._deferreds[c]);b._deferreds=null}function p(b,c){var d=!1;try{b(function(b){d||
(d=!0,f(c,b))},function(b){d||(d=!0,g(c,b))})}catch(e){d||(d=!0,g(c,e))}}var j=setTimeout;d.prototype["catch"]=function(b){return this.then(null,b)};d.prototype.then=function(b,d){var f=new this.constructor(c);return e(this,new function(b,c,d){this.onFulfilled="function"==typeof b?b:null;this.onRejected="function"==typeof c?c:null;this.promise=d}(b,d,f)),f};d.prototype["finally"]=b;d.all=function(b){return new d(function(c,d){function f(b,j){try{if(j&&("object"==typeof j||"function"==typeof j)){var l=
j.then;if("function"==typeof l)return void l.call(j,function(c){f(b,c)},d)}e[b]=j;0==--g&&c(e)}catch(p){d(p)}}if(!b||"undefined"==typeof b.length)throw new TypeError("Promise.all accepts an array");var e=Array.prototype.slice.call(b);if(0===e.length)return c([]);for(var g=e.length,j=0;e.length>j;j++)f(j,e[j])})};d.resolve=function(b){return b&&"object"==typeof b&&b.constructor===d?b:new d(function(c){c(b)})};d.reject=function(b){return new d(function(c,d){d(b)})};d.race=function(b){return new d(function(c,
d){for(var f=0,e=b.length;e>f;f++)b[f].then(c,d)})};d._immediateFn="function"==typeof setImmediate&&function(b){setImmediate(b)}||function(b){j(b,0)};d._unhandledRejectionFn=function(b){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",b)};var q=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object");}();"Promise"in q?q.Promise.prototype["finally"]||
(q.Promise.prototype["finally"]=b):q.Promise=d});(function(){function b(b,c){document.addEventListener?b.addEventListener("scroll",c,!1):b.attachEvent("scroll",c)}function c(b){this.a=document.createElement("div");this.a.setAttribute("aria-hidden","true");this.a.appendChild(document.createTextNode(b));this.b=document.createElement("span");this.c=document.createElement("span");this.h=document.createElement("span");this.f=document.createElement("span");this.g=-1;this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";
this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}function d(b,c){b.a.style.cssText=
"max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+c+";"}function e(b){var c=b.a.offsetWidth,d=c+100;b.f.style.width=d+"px";b.c.scrollLeft=d;b.b.scrollLeft=b.b.scrollWidth+100;return b.g!==c?(b.g=c,!0):!1}function f(c,d){function f(){var b=g;e(b)&&b.a.parentNode&&d(b.g)}var g=c;b(c.b,f);b(c.c,f);e(c)}function g(b,c){var d=c||{};this.family=b;this.style=d.style||
"normal";this.weight=d.weight||"normal";this.stretch=d.stretch||"normal"}function l(){null===r&&(r=!!document.fonts);return r}function p(){if(null===s){var b=document.createElement("div");try{b.style.font="condensed 100px sans-serif"}catch(c){}s=""!==b.style.font}return s}function j(b,c){return[b.style,b.weight,p()?b.stretch:"","100px",c].join(" ")}var q=null,m=null,s=null,r=null;g.prototype.load=function(b,e){var g=this,p=b||"BESbswy",r=0,s=e||3E3,v=(new Date).getTime();return new Promise(function(b,
e){var t;if(t=l())null===m&&(l()&&/Apple/.test(window.navigator.vendor)?(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),m=!!t&&603>parseInt(t[1],10)):m=!1),t=!m;if(t){t=new Promise(function(b,c){function d(){(new Date).getTime()-v>=s?c(Error(""+s+"ms timeout exceeded")):document.fonts.load(j(g,'"'+g.family+'"'),p).then(function(c){1<=c.length?b():setTimeout(d,25)},c)}d()});var u=new Promise(function(b,c){r=setTimeout(function(){c(Error(""+s+"ms timeout exceeded"))},
s)});Promise.race([u,t]).then(function(){clearTimeout(r);b(g)},e)}else{var Q=function(){function l(){var c;if(c=-1!=O&&-1!=Q||-1!=O&&-1!=ca||-1!=Q&&-1!=ca)(c=O!=Q&&O!=ca&&Q!=ca)||(null===q&&(c=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),q=!!c&&(536>parseInt(c[1],10)||536===parseInt(c[1],10)&&11>=parseInt(c[2],10))),c=q&&(O==ga&&Q==ga&&ca==ga||O==Z&&Q==Z&&ca==Z||O==C&&Q==C&&ca==C)),c=!c;c&&(A.parentNode&&A.parentNode.removeChild(A),clearTimeout(r),b(g))}function m(){if((new Date).getTime()-
v>=s)A.parentNode&&A.parentNode.removeChild(A),e(Error(""+s+"ms timeout exceeded"));else{var b=document.hidden;if(!0===b||void 0===b)O=t.a.offsetWidth,Q=u.a.offsetWidth,ca=L.a.offsetWidth,l();r=setTimeout(m,50)}}var t=new c(p),u=new c(p),L=new c(p),O=-1,Q=-1,ca=-1,ga=-1,Z=-1,C=-1,A=document.createElement("div");A.dir="ltr";d(t,j(g,"sans-serif"));d(u,j(g,"serif"));d(L,j(g,"monospace"));A.appendChild(t.a);A.appendChild(u.a);A.appendChild(L.a);document.body.appendChild(A);ga=t.a.offsetWidth;Z=u.a.offsetWidth;
C=L.a.offsetWidth;m();f(t,function(b){O=b;l()});d(t,j(g,'"'+g.family+'",sans-serif'));f(u,function(b){Q=b;l()});d(u,j(g,'"'+g.family+'",serif'));f(L,function(b){ca=b;l()});d(L,j(g,'"'+g.family+'",monospace'))};document.body?Q():document.addEventListener?document.addEventListener("DOMContentLoaded",function J(){document.removeEventListener("DOMContentLoaded",J);Q()}):document.attachEvent("onreadystatechange",function B(){if("interactive"==document.readyState||"complete"==document.readyState)document.detachEvent("onreadystatechange",
B),Q()})}})};"object"===typeof module?module.exports=g:(window.FontFaceObserver=g,window.FontFaceObserver.prototype.load=g.prototype.load)})();(function(b){Number.prototype.map=function(b,c,d,f){return d+(f-d)*((this-b)/(c-b))};Number.prototype.limit=function(b,c){return Math.min(c,Math.max(b,this))};Number.prototype.round=function(b){b=Math.pow(10,b||0);return Math.round(this*b)/b};Number.prototype.floor=function(){return Math.floor(this)};Number.prototype.ceil=function(){return Math.ceil(this)};Number.prototype.toInt=function(){return this|0};Number.prototype.toRad=function(){return this/180*Math.PI};Number.prototype.toDeg=function(){return 180*
this/Math.PI};Object.defineProperty(Array.prototype,"erase",{value:function(b){for(var c=this.length;c--;)this[c]===b&&this.splice(c,1);return this}});Object.defineProperty(Array.prototype,"random",{value:function(){return this[Math.floor(Math.random()*this.length)]}});Function.prototype.bind=Function.prototype.bind||function(b){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,1),d=this,
f=function(){},e=function(){return d.apply(this instanceof f&&b?this:b,c.concat(Array.prototype.slice.call(arguments)))};f.prototype=this.prototype;e.prototype=new f;return e};b.ig={game:null,debug:null,version:"1.24",global:b,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:b.ImpactPrefix||"",lib:"lib/",_current:null,_loadQueue:[],_waitForOnload:0,$:function(b){return"#"==b.charAt(0)?document.getElementById(b.substr(1)):document.getElementsByTagName(b)},$new:function(b){return document.createElement(b)},
copy:function(b){if(!b||"object"!=typeof b||b instanceof HTMLElement||b instanceof ig.Class)return b;if(b instanceof Array)for(var c=[],d=0,f=b.length;d<f;d++)c[d]=ig.copy(b[d]);else for(d in c={},b)c[d]=ig.copy(b[d]);return c},merge:function(b,c){for(var d in c){var f=c[d];if("object"!=typeof f||f instanceof HTMLElement||f instanceof ig.Class||null===f)b[d]=f;else{if(!b[d]||"object"!=typeof b[d])b[d]=f instanceof Array?[]:{};ig.merge(b[d],f)}}return b},ksort:function(b){if(!b||"object"!=typeof b)return[];
var c=[],d=[],f;for(f in b)c.push(f);c.sort();for(f=0;f<c.length;f++)d.push(b[c[f]]);return d},setVendorAttribute:function(b,c,d){var f=c.charAt(0).toUpperCase()+c.substr(1);b[c]=b["ms"+f]=b["moz"+f]=b["webkit"+f]=b["o"+f]=d},getVendorAttribute:function(b,c){var d=c.charAt(0).toUpperCase()+c.substr(1);return b[c]||b["ms"+d]||b["moz"+d]||b["webkit"+d]||b["o"+d]},normalizeVendorAttribute:function(b,c){var d=ig.getVendorAttribute(b,c);!b[c]&&d&&(b[c]=d)},getImagePixels:function(b,c,d,f,e){var g=ig.$new("canvas");
g.width=b.width;g.height=b.height;var l=g.getContext("2d");ig.System.SCALE.CRISP(g,l);var t=ig.getVendorAttribute(l,"backingStorePixelRatio")||1;ig.normalizeVendorAttribute(l,"getImageDataHD");var D=b.width/t,F=b.height/t;g.width=Math.ceil(D);g.height=Math.ceil(F);l.drawImage(b,0,0,D,F);return 1===t?l.getImageData(c,d,f,e):l.getImageDataHD(c,d,f,e)},module:function(b){if(ig._current)throw"Module '"+ig._current.name+"' defines nothing";if(ig.modules[b]&&ig.modules[b].body)throw"Module '"+b+"' is already defined";
ig._current={name:b,requires:[],loaded:!1,body:null};ig.modules[b]=ig._current;ig._loadQueue.push(ig._current);return ig},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig},defines:function(b){ig._current.body=b;ig._current=null;ig._initDOMReady()},addResource:function(b){ig.resources.push(b)},setNocache:function(b){ig.nocache=b?"?"+Date.now():""},log:function(){},assert:function(){},show:function(){},mark:function(){},_loadScript:function(b,c){ig.modules[b]=
{name:b,requires:[],loaded:!1,body:null};ig._waitForOnload++;var d=ig.prefix+ig.lib+b.replace(/\./g,"/")+".js"+ig.nocache,f=ig.$new("script");f.type="text/javascript";f.src=d;f.onload=function(){ig._waitForOnload--;ig._execModules()};f.onerror=function(){throw"Failed to load module "+b+" at "+d+" required from "+c;};ig.$("head")[0].appendChild(f)},_execModules:function(){for(var b=!1,c=0;c<ig._loadQueue.length;c++){for(var d=ig._loadQueue[c],f=!0,e=0;e<d.requires.length;e++){var g=d.requires[e];ig.modules[g]?
ig.modules[g].loaded||(f=!1):(f=!1,ig._loadScript(g,d.name))}f&&d.body&&(ig._loadQueue.splice(c,1),d.loaded=!0,d.body(),b=!0,c--)}if(b)ig._execModules();else if(!ig.baked&&0==ig._waitForOnload&&0!=ig._loadQueue.length){b=[];for(c=0;c<ig._loadQueue.length;c++){f=[];g=ig._loadQueue[c].requires;for(e=0;e<g.length;e++)d=ig.modules[g[e]],(!d||!d.loaded)&&f.push(g[e]);b.push(ig._loadQueue[c].name+" (requires: "+f.join(", ")+")")}throw"Unresolved (or circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules or a previous syntax error prevents a module from loading:\n"+
b.join("\n");}},_DOMReady:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig._DOMReady,13);ig.modules["dom.ready"].loaded=!0;ig._waitForOnload--;ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&ig.setNocache(!0);ig.ua.pixelRatio=b.devicePixelRatio||1;ig.ua.viewport={width:b.innerWidth,height:b.innerHeight};ig.ua.screen={width:b.screen.availWidth*ig.ua.pixelRatio,height:b.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone|iPod/i.test(navigator.userAgent);
ig.ua.iPhone4=ig.ua.iPhone&&2==ig.ua.pixelRatio;ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.winPhone||/mobile/i.test(navigator.userAgent);ig.ua.touchDevice="ontouchstart"in b||b.navigator.msMaxTouchPoints},_initDOMReady:function(){ig.modules["dom.ready"]?ig._execModules():(ig._boot(),ig.modules["dom.ready"]={requires:[],
loaded:!1,body:null},ig._waitForOnload++,"complete"===document.readyState?ig._DOMReady():(document.addEventListener("DOMContentLoaded",ig._DOMReady,!1),b.addEventListener("load",ig._DOMReady,!1)))}};ig.normalizeVendorAttribute(b,"requestAnimationFrame");if(b.requestAnimationFrame){var c=1,d={};b.ig.setAnimation=function(f){var e=c++;d[e]=!0;var g=function(){d[e]&&(b.requestAnimationFrame(g),f())};b.requestAnimationFrame(g);return e};b.ig.clearAnimation=function(b){delete d[b]}}else b.ig.setAnimation=
function(c){return b.setInterval(c,1E3/60)},b.ig.clearAnimation=function(c){b.clearInterval(c)};var e=!1,f=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/,g=0;b.ig.Class=function(){};var l=function(b){var c=this.prototype,d={},e;for(e in b)"function"==typeof b[e]&&"function"==typeof c[e]&&f.test(b[e])?(d[e]=c[e],c[e]=function(b,c){return function(){var f=this.parent;this.parent=d[b];var e=c.apply(this,arguments);this.parent=f;return e}}(e,b[e])):c[e]=b[e]};b.ig.Class.extend=function(c){function d(){if(!e){if(this.staticInstantiate){var b=
this.staticInstantiate.apply(this,arguments);if(b)return b}for(var c in this)"object"==typeof this[c]&&(this[c]=ig.copy(this[c]));this.init&&this.init.apply(this,arguments)}return this}var q=this.prototype;e=!0;var m=new this;e=!1;for(var s in c)m[s]="function"==typeof c[s]&&"function"==typeof q[s]&&f.test(c[s])?function(b,c){return function(){var d=this.parent;this.parent=q[b];var f=c.apply(this,arguments);this.parent=d;return f}}(s,c[s]):c[s];d.prototype=m;d.prototype.constructor=d;d.extend=b.ig.Class.extend;
d.inject=l;d.classId=m.classId=++g;return d};b.ImpactMixin&&ig.merge(ig,b.ImpactMixin)})(window);ig.baked=!0;
ig.module("impact.image").defines(function(){ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:!1,failed:!1,loadCallback:null,path:"",staticInstantiate:function(b){return ig.Image.cache[b]||null},init:function(b){this.path=b;this.load()},load:function(b){this.loaded?b&&b(this.path,!0):(!this.loaded&&ig.ready?(this.loadCallback=b||null,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.addResource(this),
ig.Image.cache[this.path]=this)},reload:function(){this.loaded=!1;this.data=new Image;this.data.onload=this.onload.bind(this);this.data.src=this.path+"?"+Date.now()},onload:function(){this.width=this.data.width;this.height=this.data.height;this.loaded=!0;1!=ig.system.scale&&this.resize(ig.system.scale);this.loadCallback&&this.loadCallback(this.path,!0)},onerror:function(){this.failed=!0;this.loadCallback&&this.loadCallback(this.path,!1)},resize:function(b){var c=ig.getImagePixels(this.data,0,0,this.width,
this.height),d=this.width*b,e=this.height*b,f=ig.$new("canvas");f.width=d;f.height=e;for(var g=f.getContext("2d"),l=g.getImageData(0,0,d,e),p=0;p<e;p++)for(var j=0;j<d;j++){var q=4*(Math.floor(p/b)*this.width+Math.floor(j/b)),m=4*(p*d+j);l.data[m]=c.data[q];l.data[m+1]=c.data[q+1];l.data[m+2]=c.data[q+2];l.data[m+3]=c.data[q+3]}g.putImageData(l,0,0);this.data=f},draw:function(b,c,d,e,f,g){if(this.loaded){var l=ig.system.scale;f=(f?f:this.width)*l;g=(g?g:this.height)*l;ig.system.context.drawImage(this.data,
d?d*l:0,e?e*l:0,f,g,ig.system.getDrawPos(b),ig.system.getDrawPos(c),f,g);ig.Image.drawCount++}},drawTile:function(b,c,d,e,f,g,l){f=f?f:e;if(this.loaded&&!(e>this.width||f>this.height)){var p=ig.system.scale,j=Math.floor(e*p),q=Math.floor(f*p),m=g?-1:1,s=l?-1:1;if(g||l)ig.system.context.save(),ig.system.context.scale(m,s);ig.system.context.drawImage(this.data,Math.floor(d*e)%this.width*p,Math.floor(d*e/this.width)*f*p,j,q,ig.system.getDrawPos(b)*m-(g?j:0),ig.system.getDrawPos(c)*s-(l?q:0),j,q);(g||
l)&&ig.system.context.restore();ig.Image.drawCount++}}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var b in ig.Image.cache)ig.Image.cache[b].reload()}});ig.baked=!0;
ig.module("impact.font").requires("impact.image").defines(function(){ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(b){this._loadMetrics(this.data);this.parent(b);this.height-=2},widthForString:function(b){if(-1!==b.indexOf("\n")){b=b.split("\n");for(var c=0,d=0;d<b.length;d++)c=Math.max(c,this._widthForLine(b[d]));return c}return this._widthForLine(b)},_widthForLine:function(b){for(var c=0,d=0;d<b.length;d++)c+=this.widthMap[b.charCodeAt(d)-
this.firstChar];0<b.length&&(c+=this.letterSpacing*(b.length-1));return c},heightForString:function(b){return b.split("\n").length*(this.height+this.lineSpacing)},draw:function(b,c,d,e){"string"!=typeof b&&(b=b.toString());if(-1!==b.indexOf("\n")){b=b.split("\n");for(var f=this.height+this.lineSpacing,g=0;g<b.length;g++)this.draw(b[g],c,d+g*f,e)}else{if(e==ig.Font.ALIGN.RIGHT||e==ig.Font.ALIGN.CENTER)g=this._widthForLine(b),c-=e==ig.Font.ALIGN.CENTER?g/2:g;1!==this.alpha&&(ig.system.context.globalAlpha=
this.alpha);for(g=0;g<b.length;g++)e=b.charCodeAt(g),c+=this._drawChar(e-this.firstChar,c,d);1!==this.alpha&&(ig.system.context.globalAlpha=1);ig.Image.drawCount+=b.length}},_drawChar:function(b,c,d){if(!this.loaded||0>b||b>=this.indices.length)return 0;var e=ig.system.scale,f=this.widthMap[b]*e,g=this.height*e;ig.system.context.drawImage(this.data,this.indices[b]*e,0,f,g,ig.system.getDrawPos(c),ig.system.getDrawPos(d),f,g);return this.widthMap[b]+this.letterSpacing},_loadMetrics:function(b){this.widthMap=
[];this.indices=[];for(var c=ig.getImagePixels(b,0,b.height-1,b.width,1),d=0,e=0;e<b.width;e++){var f=4*e+3;127<c.data[f]?d++:128>c.data[f]&&d&&(this.widthMap.push(d),this.indices.push(e-d),d=0)}this.widthMap.push(d);this.indices.push(e-d)}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2}});ig.baked=!0;
ig.module("impact.sound").defines(function(){ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio)ig.Sound.enabled=!1;else{for(var b=new Audio,c=0;c<ig.Sound.use.length;c++){var d=ig.Sound.use[c];if(b.canPlayType(d.mime)){this.format=d;break}}this.format||(ig.Sound.enabled=!1);ig.Sound.enabled&&ig.Sound.useWebAudio&&(this.audioContext=new AudioContext,this.boundWebAudioUnlock=this.unlockWebAudio.bind(this),ig.system.canvas.addEventListener("touchstart",
this.boundWebAudioUnlock,!1),ig.system.canvas.addEventListener("mousedown",this.boundWebAudioUnlock,!1))}},unlockWebAudio:function(){ig.system.canvas.removeEventListener("touchstart",this.boundWebAudioUnlock,!1);ig.system.canvas.removeEventListener("mousedown",this.boundWebAudioUnlock,!1);var b=this.audioContext.createBuffer(1,1,22050),c=this.audioContext.createBufferSource();c.buffer=b;c.connect(this.audioContext.destination);c.start(0)},load:function(b,c,d){return c&&ig.Sound.useWebAudio?this.loadWebAudio(b,
c,d):this.loadHTML5Audio(b,c,d)},loadWebAudio:function(b,c,d){c=ig.prefix+b.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[b])return this.clips[b];var e=new ig.Sound.WebAudioSource;this.clips[b]=e;var f=new XMLHttpRequest;f.open("GET",c,!0);f.responseType="arraybuffer";var g=this;f.onload=function(c){g.audioContext.decodeAudioData(f.response,function(f){e.buffer=f;d&&d(b,!0,c)},function(c){d&&d(b,!1,c)})};f.onerror=function(c){d&&d(b,!1,c)};f.send();return e},loadHTML5Audio:function(b,
c,d){var e=ig.prefix+b.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[b]){if(this.clips[b]instanceof ig.Sound.WebAudioSource)return this.clips[b];if(c&&this.clips[b].length<ig.Sound.channels)for(c=this.clips[b].length;c<ig.Sound.channels;c++){var f=new Audio(e);f.load();this.clips[b].push(f)}return this.clips[b][0]}var g=new Audio(e);d&&(ig.ua.mobile?setTimeout(function(){d(b,!0,null)},0):(g.addEventListener("canplaythrough",function p(c){g.removeEventListener("canplaythrough",p,!1);
d(b,!0,c)},!1),g.addEventListener("error",function(c){d(b,!1,c)},!1)));g.preload="auto";g.load();this.clips[b]=[g];if(c)for(c=1;c<ig.Sound.channels;c++)f=new Audio(e),f.load(),this.clips[b].push(f);return g},get:function(b){if((b=this.clips[b])&&b instanceof ig.Sound.WebAudioSource)return b;for(var c=0,d;d=b[c++];)if(d.paused||d.ended)return d.ended&&(d.currentTime=0),d;b[0].pause();b[0].currentTime=0;return b[0]}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,
random:!1,_volume:1,_loop:!1,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)})},add:function(b,c){if(ig.Sound.enabled){var d=b instanceof ig.Sound?b.path:b,e=ig.soundManager.load(d,!1);if(e instanceof ig.Sound.WebAudioSource)throw ig.system.stopRunLoop(),
"Sound '"+d+"' loaded as Multichannel but used for Music. Set the multiChannel param to false when loading, e.g.: new ig.Sound(path, false)";e.loop=this._loop;e.volume=this._volume;e.addEventListener("ended",this._endedCallbackBound,!1);this.tracks.push(e);c&&(this.namedTracks[c]=e);this.currentTrack||(this.currentTrack=e)}},next:function(){this.tracks.length&&(this.stop(),this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length,this.currentTrack=
this.tracks[this.currentIndex],this.play())},pause:function(){this.currentTrack&&this.currentTrack.pause()},stop:function(){this.currentTrack&&(this.currentTrack.pause(),this.currentTrack.currentTime=0)},play:function(b){if(b&&this.namedTracks[b])b=this.namedTracks[b],b!=this.currentTrack&&(this.stop(),this.currentTrack=b);else if(!this.currentTrack)return;this.currentTrack.play()},getLooping:function(){return this._loop},setLooping:function(b){this._loop=b;for(var c in this.tracks)this.tracks[c].loop=
b},getVolume:function(){return this._volume},setVolume:function(b){this._volume=b.limit(0,1);for(var c in this.tracks)this.tracks[c].volume=this._volume},fadeOut:function(b){this.currentTrack&&(clearInterval(this._fadeInterval),this._fadeTimer=new ig.Timer(b),this._fadeInterval=setInterval(this._fadeStep.bind(this),50))},_fadeStep:function(){var b=this._fadeTimer.delta().map(-this._fadeTimer.target,0,1,0).limit(0,1)*this._volume;0.01>=b?(this.stop(),this.currentTrack.volume=this._volume,clearInterval(this._fadeInterval)):
this.currentTrack.volume=b},_endedCallback:function(){this._loop?this.play():this.next()}});ig.Sound=ig.Class.extend({path:"",volume:1,currentClip:null,multiChannel:!0,_loop:!1,init:function(b,c){this.path=b;this.multiChannel=!1!==c;Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});this.load()},getLooping:function(){return this._loop},setLooping:function(b){this._loop=b;this.currentClip&&(this.currentClip.loop=b)},load:function(b){ig.Sound.enabled?
ig.ready?ig.soundManager.load(this.path,this.multiChannel,b):ig.addResource(this):b&&b(this.path,!0)},play:function(){ig.Sound.enabled&&(this.currentClip=ig.soundManager.get(this.path),this.currentClip.loop=this._loop,this.currentClip.volume=ig.soundManager.volume*this.volume,this.currentClip.play())},stop:function(){this.currentClip&&(this.currentClip.pause(),this.currentClip.currentTime=0)}});ig.Sound.WebAudioSource=ig.Class.extend({sources:[],gain:null,buffer:null,_loop:!1,init:function(){this.gain=
ig.soundManager.audioContext.createGain();this.gain.connect(ig.soundManager.audioContext.destination);Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)})},play:function(){if(this.buffer){var b=ig.soundManager.audioContext.createBufferSource();b.buffer=this.buffer;b.connect(this.gain);b.loop=this._loop;var c=this;this.sources.push(b);b.onended=function(){c.sources.erase(b)};
b.start(0)}},pause:function(){for(var b=0;b<this.sources.length;b++)try{this.sources[b].stop()}catch(c){}},getLooping:function(){return this._loop},setLooping:function(b){this._loop=b;for(var c=0;c<this.sources.length;c++)this.sources[c].loop=b},getVolume:function(){return this.gain.gain.value},setVolume:function(b){this.gain.gain.value=b}});ig.Sound.FORMAT={MP3:{ext:"mp3",mime:"audio/mpeg"},M4A:{ext:"m4a",mime:"audio/mp4; codecs=mp4a.40.2"},OGG:{ext:"ogg",mime:"audio/ogg; codecs=vorbis"},WEBM:{ext:"webm",
mime:"audio/webm; codecs=vorbis"},CAF:{ext:"caf",mime:"audio/x-caf"}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=!0;ig.normalizeVendorAttribute(window,"AudioContext");ig.Sound.useWebAudio=!!window.AudioContext});ig.baked=!0;
ig.module("impact.loader").requires("impact.image","impact.font","impact.sound").defines(function(){ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:!1,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(b,c){this.gameClass=b;this.resources=c;this._loadCallbackBound=this._loadCallback.bind(this);for(var d=0;d<this.resources.length;d++)this._unloaded.push(this.resources[d].path)},load:function(){ig.system.clear("#000");if(this.resources.length){for(var b=
0;b<this.resources.length;b++)this.loadResource(this.resources[b]);this._intervalId=setInterval(this.draw.bind(this),16)}else this.end()},loadResource:function(b){b.load(this._loadCallbackBound)},end:function(){this.done||(this.done=!0,clearInterval(this._intervalId),ig.system.setGame(this.gameClass))},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var b=ig.system.scale,c=(0.6*ig.system.width).floor(),d=(0.1*ig.system.height).floor(),e=(0.5*ig.system.width-c/2).floor(),f=(0.5*
ig.system.height-d/2).floor();ig.system.context.fillStyle="#000";ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);ig.system.context.fillStyle="#fff";ig.system.context.fillRect(e*b,f*b,c*b,d*b);ig.system.context.fillStyle="#000";ig.system.context.fillRect(e*b+b,f*b+b,c*b-b-b,d*b-b-b);ig.system.context.fillStyle="#fff";ig.system.context.fillRect(e*b,f*b,c*b*this._drawStatus,d*b)},_loadCallback:function(b,c){if(c)this._unloaded.erase(b);else throw"Failed to load resource: "+b;this.status=
1-this._unloaded.length/this.resources.length;0==this._unloaded.length&&setTimeout(this.end.bind(this),250)}})});ig.baked=!0;
ig.module("impact.timer").defines(function(){ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(b){this.last=this.base=ig.Timer.time;this.target=b||0},set:function(b){this.target=b||0;this.base=ig.Timer.time;this.pausedAt=0},reset:function(){this.base=ig.Timer.time;this.pausedAt=0},tick:function(){var b=ig.Timer.time-this.last;this.last=ig.Timer.time;return this.pausedAt?0:b},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||
(this.pausedAt=ig.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=ig.Timer.time-this.pausedAt,this.pausedAt=0)}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var b=Date.now();ig.Timer.time+=Math.min((b-ig.Timer._last)/1E3,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=b}});ig.baked=!0;
ig.module("impact.system").requires("impact.timer","impact.image").defines(function(){ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:!1,delegate:null,clock:null,canvas:null,context:null,init:function(b,c,d,e,f){this.fps=c;this.clock=new ig.Timer;this.canvas=ig.$(b);this.resize(d,e,f);this.context=this.canvas.getContext("2d");this.getDrawPos=ig.System.drawMode;1!=this.scale&&(ig.System.scaleMode=ig.System.SCALE.CRISP);
ig.System.scaleMode(this.canvas,this.context)},resize:function(b,c,d){this.width=b;this.height=c;this.scale=d||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight},setGame:function(b){this.running?this.newGameClass=b:this.setGameNow(b)},setGameNow:function(b){ig.game=new b;ig.system.setDelegate(ig.game)},setDelegate:function(b){if("function"==typeof b.run)this.delegate=b,this.startRunLoop();else throw"System.setDelegate: No run() function in object";
},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=!1},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this));this.running=!0},clear:function(b){this.context.fillStyle=b;this.context.fillRect(0,0,this.realWidth,this.realHeight)},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();this.newGameClass&&(this.setGameNow(this.newGameClass),this.newGameClass=null)},getDrawPos:null});ig.System.DRAW=
{AUTHENTIC:function(b){return Math.round(b)*this.scale},SMOOTH:function(b){return Math.round(b*this.scale)},SUBPIXEL:function(b){return b*this.scale}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(b,c){ig.setVendorAttribute(c,"imageSmoothingEnabled",!1);b.style.imageRendering="-moz-crisp-edges";b.style.imageRendering="-o-crisp-edges";b.style.imageRendering="-webkit-optimize-contrast";b.style.imageRendering="crisp-edges";b.style.msInterpolationMode="nearest-neighbor"},SMOOTH:function(b,
c){ig.setVendorAttribute(c,"imageSmoothingEnabled",!0);b.style.imageRendering="";b.style.msInterpolationMode=""}};ig.System.scaleMode=ig.System.SCALE.SMOOTH});ig.baked=!0;
ig.module("impact.input").defines(function(){ig.KEY={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,
NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:!1,isUsingKeyboard:!1,isUsingAccelerometer:!1,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){this.isUsingMouse||
(this.isUsingMouse=!0,ig.system.canvas.addEventListener("wheel",this.mousewheel.bind(this),!1),ig.system.canvas.addEventListener("contextmenu",this.contextmenu.bind(this),!1),ig.system.canvas.addEventListener("mousedown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("mouseup",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1),ig.ua.touchDevice&&(ig.system.canvas.addEventListener("touchstart",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("touchend",
this.keyup.bind(this),!1),ig.system.canvas.addEventListener("touchcancel",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.mousemove.bind(this),!1),ig.system.canvas.addEventListener("MSPointerDown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",this.mousemove.bind(this),!1),ig.system.canvas.style.msTouchAction="none"))},initKeyboard:function(){this.isUsingKeyboard||
(this.isUsingKeyboard=!0,window.addEventListener("keydown",this.keydown.bind(this),!1),window.addEventListener("keyup",this.keyup.bind(this),!1))},initAccelerometer:function(){this.isUsingAccelerometer||(this.isUsingAccelerometer=!0,window.addEventListener("devicemotion",this.devicemotion.bind(this),!1))},mousewheel:function(b){var c=this.bindings[0>b.deltaY?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN];c&&(this.actions[c]=!0,this.presses[c]=!0,this.delayedKeyup[c]=!0,b.stopPropagation(),b.preventDefault())},
mousemove:function(b){var c=ig.system.scale*((ig.system.canvas.offsetWidth||ig.system.realWidth)/ig.system.realWidth),d={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(d=ig.system.canvas.getBoundingClientRect());b=b.touches?b.touches[0]:b;this.mouse.x=(b.clientX-d.left)/c;this.mouse.y=(b.clientY-d.top)/c},contextmenu:function(b){this.bindings[ig.KEY.MOUSE2]&&(b.stopPropagation(),b.preventDefault())},keydown:function(b){var c=b.target.tagName;if(!("INPUT"==c||"TEXTAREA"==c))if(c="keydown"==
b.type?b.keyCode:2==b.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,0>c&&!ig.ua.mobile&&window.focus(),("touchstart"==b.type||"mousedown"==b.type)&&this.mousemove(b),c=this.bindings[c])this.actions[c]=!0,this.locks[c]||(this.presses[c]=!0,this.locks[c]=!0),b.preventDefault()},keyup:function(b){var c=b.target.tagName;if(!("INPUT"==c||"TEXTAREA"==c))if(c=this.bindings["keyup"==b.type?b.keyCode:2==b.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1])this.delayedKeyup[c]=!0,b.preventDefault()},devicemotion:function(b){this.accel=
b.accelerationIncludingGravity},bind:function(b,c){0>b?this.initMouse():0<b&&this.initKeyboard();this.bindings[b]=c},bindTouch:function(b,c){var d=ig.$(b),e=this;d.addEventListener("touchstart",function(b){e.touchStart(b,c)},!1);d.addEventListener("touchend",function(b){e.touchEnd(b,c)},!1);d.addEventListener("MSPointerDown",function(b){e.touchStart(b,c)},!1);d.addEventListener("MSPointerUp",function(b){e.touchEnd(b,c)},!1)},unbind:function(b){this.delayedKeyup[this.bindings[b]]=!0;this.bindings[b]=
null},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={}},state:function(b){return this.actions[b]},pressed:function(b){return this.presses[b]},released:function(b){return!!this.delayedKeyup[b]},clearPressed:function(){for(var b in this.delayedKeyup)this.actions[b]=!1,this.locks[b]=!1;this.delayedKeyup={};this.presses={}},touchStart:function(b,c){this.actions[c]=!0;this.presses[c]=!0;b.stopPropagation();b.preventDefault();return!1},touchEnd:function(b,
c){this.delayedKeyup[c]=!0;b.stopPropagation();b.preventDefault();return!1}})});ig.baked=!0;ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input","impact.sound").defines(function(){ig.main=function(b,c,d,e,f,g,l){ig.system=new ig.System(b,d,e,f,g||1);ig.input=new ig.Input;ig.soundManager=new ig.SoundManager;ig.music=new ig.Music;ig.ready=!0;(new (l||ig.Loader)(c,ig.resources)).load()}});ig.baked=!0;
ig.module("impact.animation").requires("impact.timer","impact.image").defines(function(){ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(b,c,d){this.width=c;this.height=d;this.image=new ig.Image(b)}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:!1,y:!1},pivot:{x:0,y:0},frameTime:0,frame:0,tile:0,stop:!1,loopCount:0,alpha:1,angle:0,init:function(b,c,d,e){this.sheet=b;this.pivot={x:b.width/2,y:b.height/2};this.timer=new ig.Timer;this.frameTime=
c;this.sequence=d;this.stop=!!e;this.tile=this.sequence[0]},rewind:function(){this.timer.set();this.frame=this.loopCount=0;this.tile=this.sequence[0];return this},gotoFrame:function(b){this.timer.set(this.frameTime*-b-1E-4);this.update()},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var b=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(b/this.sequence.length);this.frame=this.stop&&0<this.loopCount?this.sequence.length-
1:b%this.sequence.length;this.tile=this.sequence[this.frame]},draw:function(b,c){var d=Math.max(this.sheet.width,this.sheet.height);b>ig.system.width||(c>ig.system.height||0>b+d||0>c+d)||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTile(b,c,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(b+this.pivot.x),ig.system.getDrawPos(c+this.pivot.y)),ig.system.context.rotate(this.angle),
this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}})});ig.baked=!0;
ig.module("impact.entity").requires("impact.animation","impact.impact").defines(function(){ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:!1,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:!1,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(b,
c,d){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=b;this.pos.y=this.last.y=c;ig.merge(this,d)},reset:function(b,c,d){var e=this.constructor.prototype;this.pos.x=b;this.pos.y=c;this.last.x=b;this.last.y=c;this.vel.x=e.vel.x;this.vel.y=e.vel.y;this.accel.x=e.accel.x;this.accel.y=e.accel.y;this.health=e.health;this._killed=e._killed;this.standing=e.standing;this.type=e.type;this.checkAgainst=e.checkAgainst;this.collides=e.collides;ig.merge(this,d)},addAnim:function(b,c,d,e){if(!this.animSheet)throw"No animSheet to add the animation "+
b+" to.";c=new ig.Animation(this.animSheet,c,d,e);this.anims[b]=c;this.currentAnim||(this.currentAnim=c);return c},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var b=ig.game.collisionMap.trace(this.pos.x,this.pos.y,this.vel.x*ig.system.tick,this.vel.y*
ig.system.tick,this.size.x,this.size.y);this.handleMovementTrace(b);this.currentAnim&&this.currentAnim.update()},getNewVelocity:function(b,c,d,e){return c?(b+c*ig.system.tick).limit(-e,e):d?(c=d*ig.system.tick,0<b-c?b-c:0>b+c?b+c:0):b.limit(-e,e)},handleMovementTrace:function(b){this.standing=!1;b.collision.y&&(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0));b.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>
this.minBounceVelocity?this.vel.x*-this.bounciness:0);if(b.collision.slope){var c=b.collision.slope;if(0<this.bounciness){var d=this.vel.x*c.nx+this.vel.y*c.ny;this.vel.x=(this.vel.x-2*c.nx*d)*this.bounciness;this.vel.y=(this.vel.y-2*c.ny*d)*this.bounciness}else d=(this.vel.x*c.x+this.vel.y*c.y)/(c.x*c.x+c.y*c.y),this.vel.x=c.x*d,this.vel.y=c.y*d,c=Math.atan2(c.x,c.y),c>this.slopeStanding.min&&c<this.slopeStanding.max&&(this.standing=!0)}this.pos=b.pos},draw:function(){this.currentAnim&&this.currentAnim.draw(this.pos.x-
this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y)},kill:function(){ig.game.removeEntity(this)},receiveDamage:function(b){this.health-=b;0>=this.health&&this.kill()},touches:function(b){return!(this.pos.x>=b.pos.x+b.size.x||this.pos.x+this.size.x<=b.pos.x||this.pos.y>=b.pos.y+b.size.y||this.pos.y+this.size.y<=b.pos.y)},distanceTo:function(b){var c=this.pos.x+this.size.x/2-(b.pos.x+b.size.x/2);b=this.pos.y+this.size.y/2-(b.pos.y+b.size.y/2);return Math.sqrt(c*c+b*b)},angleTo:function(b){return Math.atan2(b.pos.y+
b.size.y/2-(this.pos.y+this.size.y/2),b.pos.x+b.size.x/2-(this.pos.x+this.size.x/2))},check:function(){},collideWith:function(){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(b,c){b.checkAgainst&c.type&&b.check(c);c.checkAgainst&b.type&&c.check(b);b.collides&&(c.collides&&b.collides+c.collides>ig.Entity.COLLIDES.ACTIVE)&&ig.Entity.solveCollision(b,c)};ig.Entity.solveCollision=
function(b,c){var d=null;if(b.collides==ig.Entity.COLLIDES.LITE||c.collides==ig.Entity.COLLIDES.FIXED)d=b;else if(c.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED)d=c;b.last.x+b.size.x>c.last.x&&b.last.x<c.last.x+c.size.x?(b.last.y<c.last.y?ig.Entity.seperateOnYAxis(b,c,d):ig.Entity.seperateOnYAxis(c,b,d),b.collideWith(c,"y"),c.collideWith(b,"y")):b.last.y+b.size.y>c.last.y&&b.last.y<c.last.y+c.size.y&&(b.last.x<c.last.x?ig.Entity.seperateOnXAxis(b,c,d):ig.Entity.seperateOnXAxis(c,
b,d),b.collideWith(c,"x"),c.collideWith(b,"x"))};ig.Entity.seperateOnXAxis=function(b,c,d){var e=b.pos.x+b.size.x-c.pos.x;d?(d.vel.x=-d.vel.x*d.bounciness+(b===d?c:b).vel.x,c=ig.game.collisionMap.trace(d.pos.x,d.pos.y,d==b?-e:e,0,d.size.x,d.size.y),d.pos.x=c.pos.x):(d=(b.vel.x-c.vel.x)/2,b.vel.x=-d,c.vel.x=d,d=ig.game.collisionMap.trace(b.pos.x,b.pos.y,-e/2,0,b.size.x,b.size.y),b.pos.x=Math.floor(d.pos.x),b=ig.game.collisionMap.trace(c.pos.x,c.pos.y,e/2,0,c.size.x,c.size.y),c.pos.x=Math.ceil(b.pos.x))};
ig.Entity.seperateOnYAxis=function(b,c,d){var e=b.pos.y+b.size.y-c.pos.y;if(d){c=b===d?c:b;d.vel.y=-d.vel.y*d.bounciness+c.vel.y;var f=0;d==b&&Math.abs(d.vel.y-c.vel.y)<d.minBounceVelocity&&(d.standing=!0,f=c.vel.x*ig.system.tick);b=ig.game.collisionMap.trace(d.pos.x,d.pos.y,f,d==b?-e:e,d.size.x,d.size.y);d.pos.y=b.pos.y;d.pos.x=b.pos.x}else ig.game.gravity&&(c.standing||0<b.vel.y)?(d=ig.game.collisionMap.trace(b.pos.x,b.pos.y,0,-(b.pos.y+b.size.y-c.pos.y),b.size.x,b.size.y),b.pos.y=d.pos.y,0<b.bounciness&&
b.vel.y>b.minBounceVelocity?b.vel.y*=-b.bounciness:(b.standing=!0,b.vel.y=0)):(d=(b.vel.y-c.vel.y)/2,b.vel.y=-d,c.vel.y=d,f=c.vel.x*ig.system.tick,d=ig.game.collisionMap.trace(b.pos.x,b.pos.y,f,-e/2,b.size.x,b.size.y),b.pos.y=d.pos.y,b=ig.game.collisionMap.trace(c.pos.x,c.pos.y,0,e/2,c.size.x,c.size.y),c.pos.y=b.pos.y)}});ig.baked=!0;
ig.module("impact.map").defines(function(){ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,pxWidth:1,pxHeight:1,data:[[]],name:null,init:function(b,c){this.tilesize=b;this.data=c;this.height=c.length;this.width=c[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize},getTile:function(b,c){var d=Math.floor(b/this.tilesize),e=Math.floor(c/this.tilesize);return 0<=d&&d<this.width&&0<=e&&e<this.height?this.data[e][d]:0},setTile:function(b,c,d){b=Math.floor(b/this.tilesize);
c=Math.floor(c/this.tilesize);0<=b&&b<this.width&&(0<=c&&c<this.height)&&(this.data[c][b]=d)}})});ig.baked=!0;
ig.module("impact.collision-map").requires("impact.map").defines(function(){ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(b,c,f){this.parent(b,c);this.tiledef=f||ig.CollisionMap.defaultTileDef;for(var g in this.tiledef)g|0>this.lastSlope&&(this.lastSlope=g|0)},trace:function(b,c,f,g,l,p){var j={collision:{x:!1,y:!1,slope:!1},pos:{x:b,y:c},tile:{x:0,y:0}},q=Math.ceil((Math.max(Math.abs(f),Math.abs(g))+0.1)/this.tilesize);if(1<q)for(var m=f/q,s=g/q,r=0;r<q&&(m||s)&&!(this._traceStep(j,
b,c,m,s,l,p,f,g,r),b=j.pos.x,c=j.pos.y,j.collision.x&&(f=m=0),j.collision.y&&(g=s=0),j.collision.slope);r++);else this._traceStep(j,b,c,f,g,l,p,f,g,0);return j},_traceStep:function(b,c,f,g,l,p,j,q,m,s){b.pos.x+=g;b.pos.y+=l;var r=0;if(g){var u=0<g?p:0,t=0>g?this.tilesize:0,r=Math.max(Math.floor(f/this.tilesize),0),D=Math.min(Math.ceil((f+j)/this.tilesize),this.height);g=Math.floor((b.pos.x+u)/this.tilesize);var F=Math.floor((c+u)/this.tilesize);if(0<s||g==F||0>F||F>=this.width)F=-1;if(0<=g&&g<this.width)for(var H=
r;H<D&&!(-1!=F&&(r=this.data[H][F],1<r&&r<=this.lastSlope&&this._checkTileDef(b,r,c,f,q,m,p,j,F,H)));H++)if(r=this.data[H][g],1==r||r>this.lastSlope||1<r&&this._checkTileDef(b,r,c,f,q,m,p,j,g,H)){if(1<r&&r<=this.lastSlope&&b.collision.slope)break;b.collision.x=!0;b.tile.x=r;c=b.pos.x=g*this.tilesize-u+t;q=0;break}}if(l){u=0<l?j:0;l=0>l?this.tilesize:0;r=Math.max(Math.floor(b.pos.x/this.tilesize),0);t=Math.min(Math.ceil((b.pos.x+p)/this.tilesize),this.width);H=Math.floor((b.pos.y+u)/this.tilesize);
D=Math.floor((f+u)/this.tilesize);if(0<s||H==D||0>D||D>=this.height)D=-1;if(0<=H&&H<this.height)for(g=r;g<t&&!(-1!=D&&(r=this.data[D][g],1<r&&r<=this.lastSlope&&this._checkTileDef(b,r,c,f,q,m,p,j,g,D)));g++)if(r=this.data[H][g],1==r||r>this.lastSlope||1<r&&this._checkTileDef(b,r,c,f,q,m,p,j,g,H)){if(1<r&&r<=this.lastSlope&&b.collision.slope)break;b.collision.y=!0;b.tile.y=r;b.pos.y=H*this.tilesize-u+l;break}}},_checkTileDef:function(b,c,f,g,l,p,j,q,m,s){var r=this.tiledef[c];if(!r)return!1;c=(r[2]-
r[0])*this.tilesize;var u=(r[3]-r[1])*this.tilesize,t=r[4];j=f+l+(0>u?j:0)-(m+r[0])*this.tilesize;q=g+p+(0<c?q:0)-(s+r[1])*this.tilesize;if(0<c*q-u*j){if(0>l*-u+p*c)return t;m=Math.sqrt(c*c+u*u);s=u/m;m=-c/m;var D=j*s+q*m,r=s*D,D=m*D;if(r*r+D*D>=l*l+p*p)return t||0.5>c*(q-p)-u*(j-l);b.pos.x=f+l-r;b.pos.y=g+p-D;b.collision.slope={x:c,y:u,nx:s,ny:m};return!0}return!1}});var b=1/3,c=2/3;ig.CollisionMap.defaultTileDef={5:[0,1,1,c,!0],6:[0,c,1,b,!0],7:[0,b,1,0,!0],3:[0,1,1,0.5,!0],4:[0,0.5,1,0,!0],2:[0,
1,1,0,!0],10:[0.5,1,1,0,!0],21:[0,1,0.5,0,!0],32:[c,1,1,0,!0],43:[b,1,c,0,!0],54:[0,1,b,0,!0],27:[0,0,1,b,!0],28:[0,b,1,c,!0],29:[0,c,1,1,!0],25:[0,0,1,0.5,!0],26:[0,0.5,1,1,!0],24:[0,0,1,1,!0],11:[0,0,0.5,1,!0],22:[0.5,0,1,1,!0],33:[0,0,b,1,!0],44:[b,0,c,1,!0],55:[c,0,1,1,!0],16:[1,b,0,0,!0],17:[1,c,0,b,!0],18:[1,1,0,c,!0],14:[1,0.5,0,0,!0],15:[1,1,0,0.5,!0],13:[1,1,0,0,!0],8:[0.5,1,0,0,!0],19:[1,1,0.5,0,!0],30:[b,1,0,0,!0],41:[c,1,b,0,!0],52:[1,1,c,0,!0],38:[1,c,0,1,!0],39:[1,b,0,c,!0],40:[1,0,
0,b,!0],36:[1,0.5,0,1,!0],37:[1,0,0,0.5,!0],35:[1,0,0,1,!0],9:[1,0,0.5,1,!0],20:[0.5,0,0,1,!0],31:[1,0,c,1,!0],42:[c,0,b,1,!0],53:[b,0,0,1,!0],12:[0,0,1,0,!1],23:[1,1,0,1,!1],34:[1,0,1,1,!1],45:[0,1,0,0,!1]};ig.CollisionMap.staticNoCollision={trace:function(b,c,f,g){return{collision:{x:!1,y:!1,slope:!1},pos:{x:b+f,y:c+g},tile:{x:0,y:0}}}}});ig.baked=!0;
ig.module("impact.background-map").requires("impact.map","impact.image").defines(function(){ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:!1,tilesetName:"",foreground:!1,enabled:!0,preRender:!1,preRenderedChunks:null,chunkSize:512,debugChunks:!1,anims:{},init:function(b,c,d){this.parent(b,c);this.setTileset(d)},setTileset:function(b){this.tilesetName=b instanceof ig.Image?b.path:b;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null},setScreenPos:function(b,
c){this.scroll.x=b/this.distance;this.scroll.y=c/this.distance},preRenderMapToChunks:function(){var b=this.width*this.tilesize*ig.system.scale,c=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(b,c),this.chunkSize);var d=Math.ceil(b/this.chunkSize),e=Math.ceil(c/this.chunkSize);this.preRenderedChunks=[];for(var f=0;f<e;f++){this.preRenderedChunks[f]=[];for(var g=0;g<d;g++)this.preRenderedChunks[f][g]=this.preRenderChunk(g,f,g==d-1?b-g*this.chunkSize:this.chunkSize,f==e-1?
c-f*this.chunkSize:this.chunkSize)}},preRenderChunk:function(b,c,d,e){var f=d/this.tilesize/ig.system.scale+1,g=e/this.tilesize/ig.system.scale+1,l=b*this.chunkSize/ig.system.scale%this.tilesize,p=c*this.chunkSize/ig.system.scale%this.tilesize;b=Math.floor(b*this.chunkSize/this.tilesize/ig.system.scale);var j=Math.floor(c*this.chunkSize/this.tilesize/ig.system.scale);c=ig.$new("canvas");c.width=d;c.height=e;c.retinaResolutionEnabled=!1;e=c.getContext("2d");ig.System.scaleMode(c,e);d=ig.system.context;
ig.system.context=e;for(e=0;e<f;e++)for(var q=0;q<g;q++)if(e+b<this.width&&q+j<this.height){var m=this.data[q+j][e+b];m&&this.tiles.drawTile(e*this.tilesize-l,q*this.tilesize-p,m-1,this.tilesize)}ig.system.context=d;f=new Image;f.src=c.toDataURL();f.width=c.width;f.height=c.height;return f},draw:function(){this.tiles.loaded&&this.enabled&&(this.preRender?this.drawPreRendered():this.drawTiled())},drawPreRendered:function(){this.preRenderedChunks||this.preRenderMapToChunks();var b=ig.system.getDrawPos(this.scroll.x),
c=ig.system.getDrawPos(this.scroll.y);if(this.repeat)var d=this.width*this.tilesize*ig.system.scale,b=(b%d+d)%d,d=this.height*this.tilesize*ig.system.scale,c=(c%d+d)%d;var d=Math.max(Math.floor(b/this.chunkSize),0),e=Math.max(Math.floor(c/this.chunkSize),0),f=Math.ceil((b+ig.system.realWidth)/this.chunkSize),g=Math.ceil((c+ig.system.realHeight)/this.chunkSize),l=this.preRenderedChunks[0].length,p=this.preRenderedChunks.length;this.repeat||(f=Math.min(f,l),g=Math.min(g,p));for(var j=0,q=e;q<g;q++){for(var m=
0,s=d;s<f;s++){var r=this.preRenderedChunks[q%p][s%l],u=-b+s*this.chunkSize-m,t=-c+q*this.chunkSize-j;ig.system.context.drawImage(r,u,t);ig.Image.drawCount++;this.debugChunks&&(ig.system.context.strokeStyle="#f0f",ig.system.context.strokeRect(u,t,this.chunkSize,this.chunkSize));this.repeat&&(r.width<this.chunkSize&&u+r.width<ig.system.realWidth)&&(m+=this.chunkSize-r.width,q==e&&f++)}this.repeat&&(r.height<this.chunkSize&&t+r.height<ig.system.realHeight)&&(j+=this.chunkSize-r.height,g++)}},drawTiled:function(){for(var b=
0,c=null,d=(this.scroll.x/this.tilesize).toInt(),e=(this.scroll.y/this.tilesize).toInt(),f=this.scroll.x%this.tilesize,g=this.scroll.y%this.tilesize,l=-f-this.tilesize,f=ig.system.width+this.tilesize-f,p=ig.system.height+this.tilesize-g,j=-1,g=-g-this.tilesize;g<p;j++,g+=this.tilesize){var q=j+e;if(q>=this.height||0>q){if(!this.repeat)continue;q=(q%this.height+this.height)%this.height}for(var m=-1,s=l;s<f;m++,s+=this.tilesize){b=m+d;if(b>=this.width||0>b){if(!this.repeat)continue;b=(b%this.width+
this.width)%this.width}if(b=this.data[q][b])(c=this.anims[b-1])?c.draw(s,g):this.tiles.drawTile(s,g,b-1,this.tilesize)}}}})});ig.baked=!0;
ig.module("impact.game").requires("impact.impact","impact.entity","impact.collision-map","impact.background-map").defines(function(){ig.Game=ig.Class.extend({clearColor:"#000000",gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:!1,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:!1,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;
ig.game=this;return null},loadLevel:function(b){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var c=0;c<b.entities.length;c++){var d=b.entities[c];this.spawnEntity(d.type,d.x,d.y,d.settings)}this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(c=0;c<b.layer.length;c++)if(d=b.layer[c],"collision"==d.name)this.collisionMap=new ig.CollisionMap(d.tilesize,d.data);else{var e=new ig.BackgroundMap(d.tilesize,d.data,d.tilesetName);e.anims=this.backgroundAnims[d.tilesetName]||
{};e.repeat=d.repeat;e.distance=d.distance;e.foreground=!!d.foreground;e.preRender=!!d.preRender;e.name=d.name;this.backgroundMaps.push(e)}for(c=0;c<this.entities.length;c++)this.entities[c].ready()},loadLevelDeferred:function(b){this._levelToLoad=b},getMapByName:function(b){if("collision"==b)return this.collisionMap;for(var c=0;c<this.backgroundMaps.length;c++)if(this.backgroundMaps[c].name==b)return this.backgroundMaps[c];return null},getEntityByName:function(b){return this.namedEntities[b]},getEntitiesByType:function(b){b=
"string"===typeof b?ig.global[b]:b;for(var c=[],d=0;d<this.entities.length;d++){var e=this.entities[d];e instanceof b&&!e._killed&&c.push(e)}return c},spawnEntity:function(b,c,d,e){var f="string"===typeof b?ig.global[b]:b;if(!f)throw"Can't spawn entity of type "+b;b=new f(c,d,e||{});this.entities.push(b);b.name&&(this.namedEntities[b.name]=b);return b},sortEntities:function(){this.entities.sort(this.sortBy)},sortEntitiesDeferred:function(){this._doSortEntities=!0},removeEntity:function(b){b.name&&
delete this.namedEntities[b.name];b._killed=!0;b.type=ig.Entity.TYPE.NONE;b.checkAgainst=ig.Entity.TYPE.NONE;b.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(b)},run:function(){this.update();this.draw()},update:function(){this._levelToLoad&&(this.loadLevel(this._levelToLoad),this._levelToLoad=null);this.updateEntities();this.checkEntities();for(var b=0;b<this._deferredKill.length;b++)this._deferredKill[b].erase(),this.entities.erase(this._deferredKill[b]);this._deferredKill=[];if(this._doSortEntities||
this.autoSort)this.sortEntities(),this._doSortEntities=!1;for(var c in this.backgroundAnims){var b=this.backgroundAnims[c],d;for(d in b)b[d].update()}},updateEntities:function(){for(var b=0;b<this.entities.length;b++){var c=this.entities[b];c._killed||c.update()}},draw:function(){this.clearColor&&ig.system.clear(this.clearColor);this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var b;for(b=0;b<this.backgroundMaps.length;b++){var c=
this.backgroundMaps[b];if(c.foreground)break;c.setScreenPos(this.screen.x,this.screen.y);c.draw()}this.drawEntities();for(b;b<this.backgroundMaps.length;b++)c=this.backgroundMaps[b],c.setScreenPos(this.screen.x,this.screen.y),c.draw()},drawEntities:function(){for(var b=0;b<this.entities.length;b++)this.entities[b].draw()},checkEntities:function(){for(var b={},c=0;c<this.entities.length;c++){var d=this.entities[c];if(!(d.type==ig.Entity.TYPE.NONE&&d.checkAgainst==ig.Entity.TYPE.NONE&&d.collides==ig.Entity.COLLIDES.NEVER))for(var e=
{},f=Math.floor(d.pos.y/this.cellSize),g=Math.floor((d.pos.x+d.size.x)/this.cellSize)+1,l=Math.floor((d.pos.y+d.size.y)/this.cellSize)+1,p=Math.floor(d.pos.x/this.cellSize);p<g;p++)for(var j=f;j<l;j++)if(b[p])if(b[p][j]){for(var q=b[p][j],m=0;m<q.length;m++)d.touches(q[m])&&!e[q[m].id]&&(e[q[m].id]=!0,ig.Entity.checkPair(d,q[m]));q.push(d)}else b[p][j]=[d];else b[p]={},b[p][j]=[d]}}});ig.Game.SORT={Z_INDEX:function(b,c){return b.zIndex-c.zIndex},POS_X:function(b,c){return b.pos.x+b.size.x-(c.pos.x+
c.size.x)},POS_Y:function(b,c){return b.pos.y+b.size.y-(c.pos.y+c.size.y)}}});ig.baked=!0;
ig.module("plugins.io.storage").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(b){return null!==this.get(b)},initUnset:function(b,c){null===this.get(b)&&this.set(b,c)},get:function(b){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(b))}catch(c){return window.localStorage.getItem(b)}},
getInt:function(b){return~~this.get(b)},getFloat:function(b){return parseFloat(this.get(b))},getBool:function(b){return!!this.get(b)},key:function(b){return this.isCapable()?window.localStorage.key(b):null},set:function(b,c){if(!this.isCapable())return null;try{window.localStorage.setItem(b,JSON.stringify(c))}catch(d){console.log(d)}},setHighest:function(b,c){c>this.getFloat(b)&&this.set(b,c)},remove:function(b){if(!this.isCapable())return null;window.localStorage.removeItem(b)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;
ig.module("plugins.data.vector").defines(function(){Vector2=function(b,c){this.x=b||0;this.y=c||0};Vector2.prototype={valType:"number",neg:function(){this.x=-this.x;this.y=-this.y;return this},row:function(b){typeof b===this.valType&&(this.y=b);return this.y},col:function(b){typeof b===this.valType&&(this.x=b);return this.x},add:function(b){b instanceof Vector2?(this.x+=b.x,this.y+=b.y):(this.x+=b,this.y+=b);return this},sub:function(b){b instanceof Vector2?(this.x-=b.x,this.y-=b.y):(this.x-=b,this.y-=
b);return this},mul:function(b){b instanceof Vector2?(this.x*=b.x,this.y*=b.y):(this.x*=b,this.y*=b);return this},div:function(b){b instanceof Vector2?(0!=b.x&&(this.x/=b.x),0!=b.y&&(this.y/=b.y)):0!=b&&(this.x/=b,this.y/=b);return this},equals:function(b){return this.x==b.x&&this.y==b.y},dot:function(b){return this.x*b.x+this.y*b.y},cross:function(b){return this.x*b.y-this.y*b.x},length:function(){return Math.sqrt(this.dot(this))},norm:function(){return this.div(this.length())},min:function(){return Math.min(this.x,
this.y)},max:function(){return Math.max(this.x,this.y)},toAngles:function(){return-Math.atan2(-this.y,this.x)},angleTo:function(b){return Math.acos(this.dot(b)/(this.length()*b.length()))},toArray:function(b){return[this.x,this.y].slice(0,b||2)},clone:function(){return new Vector2(this.x,this.y)},set:function(b,c){this.x=b;this.y=c;return this},unit:function(){var b=this.length();if(0<b)return new Vector2(this.x/b,this.y/b);throw"Divide by 0 error in unitVector function of vector:"+this;},turnRight:function(){var b=
this.x;this.x=-this.y;this.y=b;return this},turnLeft:function(){var b=this.x;this.x=this.y;this.y=-b;return this},rotate:function(b){var c=this.clone();this.x=c.x*Math.cos(b)-c.y*Math.sin(b);this.y=c.x*Math.sin(b)+c.y*Math.cos(b);return this}};Vector2.negative=function(b){return new Vector2(-b.x,-b.y)};Vector2.add=function(b,c){return c instanceof Vector2?new Vector2(b.x+c.x,b.y+c.y):new Vector2(b.x+c,b.y+c)};Vector2.subtract=function(b,c){return c instanceof Vector2?new Vector2(b.x-c.x,b.y-c.y):
new Vector2(b.x-c,b.y-c)};Vector2.multiply=function(b,c){return c instanceof Vector2?new Vector2(b.x*c.x,b.y*c.y):new Vector2(b.x*c,b.y*c)};Vector2.divide=function(b,c){return c instanceof Vector2?new Vector2(b.x/c.x,b.y/c.y):new Vector2(b.x/c,b.y/c)};Vector2.equals=function(b,c){return b.x==c.x&&b.y==c.y};Vector2.dot=function(b,c){return b.x*c.x+b.y*c.y};Vector2.cross=function(b,c){return b.x*c.y-b.y*c.x}});ig.baked=!0;
ig.module("plugins.io.mouse").requires("plugins.data.vector").defines(function(){Mouse=ig.Class.extend({pos:new Vector2(0,0),bindings:{click:[ig.KEY.MOUSE1]},init:function(){ig.input.initMouse();for(var b in this.bindings){this[b]=b;for(var c=0;c<this.bindings[b].length;c++)ig.input.bind(this.bindings[b][c],b)}},getLast:function(){return this.pos},getPos:function(){var b=ig.system.scale*((ig.system.canvas.offsetWidth||ig.system.realWidth)/ig.system.realWidth);this.pos.set(ig.input.mouse.x*b/ig.sizeHandler.sizeRatio.x/
ig.sizeHandler.scaleRatioMultiplier.x,ig.input.mouse.y*b/ig.sizeHandler.sizeRatio.y/ig.sizeHandler.scaleRatioMultiplier.y);return this.pos.clone()}})});ig.baked=!0;
ig.module("plugins.io.keyboard").defines(function(){Keyboard=ig.Class.extend({bindings:{PREVENT_PAGE_SCROLLING_OVER_IFRAME:[ig.KEY.UP_ARROW,ig.KEY.DOWN_ARROW,ig.KEY.LEFT_ARROW,ig.KEY.RIGHT_ARROW,ig.KEY.PAGE_UP,ig.KEY.PAGE_DOWN],up:[ig.KEY.W,ig.KEY.UP_ARROW],right:[ig.KEY.D,ig.KEY.RIGHT_ARROW],left:[ig.KEY.A,ig.KEY.LEFT_ARROW],down:[ig.KEY.S,ig.KEY.DOWN_ARROW,ig.KEY.SPACE]},init:function(){for(var b in this.bindings){this[b]=b;for(var c=0;c<this.bindings[b].length;c++)ig.input.bind(this.bindings[b][c],
b)}}})});ig.baked=!0;
ig.module("plugins.io.gamepad-input").defines(function(){ig.PADKEY={BUTTON_0:0,PADBUTTON_1:1,BUTTON_2:2,BUTTON_3:3,BUTTON_LEFT_BUMPER:4,BUTTON_RIGHT_BUMPER:5,BUTTON_LEFT_TRIGGER:6,BUTTON_RIGHT_TRIGGER:7,BUTTON_LEFT_JOYSTICK:10,BUTTON_RIGHT_JOYSTICK:11,BUTTON_DPAD_UP:12,BUTTON_DPAD_DOWN:13,BUTTON_DPAD_LEFT:14,BUTTON_DPAD_RIGHT:15,BUTTON_MENU:16,AXIS_LEFT_JOYSTICK_X:0,AXIS_LEFT_JOYSTICK_Y:1,AXIS_RIGHT_JOYSTICK_X:2,AXIS_RIGHT_JOYSTICK_Y:3};ig.GamepadInput=ig.Class.extend({isInit:!1,isSupported:!1,list:[],
bindings:{},states:{},presses:{},releases:{},downLocks:{},upLocks:{},leftStick:{x:0,y:0},rightStick:{x:0,y:0},start:function(){if(!this.isInit){this.isInit=!0;var b=navigator.getGamepads||navigator.webkitGetGamepads;b&&(!navigator.getGamepads&&navigator.webkitGetGamepads&&(navigator.getGamepads=navigator.webkitGetGamepads),this.list=navigator.getGamepads());this.isSupported=b}},isAvailable:function(){return this.isInit&&this.isSupported},buttonPressed:function(b){return"object"==typeof b?b.pressed:
1==b},buttonDown:function(b){if(b=this.bindings[b])this.states[b]=!0,this.downLocks[b]||(this.presses[b]=!0,this.downLocks[b]=!0)},buttonUp:function(b){if((b=this.bindings[b])&&this.downLocks[b]&&!this.upLocks[b])this.states[b]=!1,this.releases[b]=!0,this.upLocks[b]=!0},clearPressed:function(){for(var b in this.releases)this.states[b]=!1,this.downLocks[b]=!1;this.releases={};this.presses={};this.upLocks={}},bind:function(b,c){this.bindings[b]=c},unbind:function(b){this.releases[this.bindings[b]]=
!0;this.bindings[b]=null},unbindAll:function(){this.bindings={};this.states={};this.presses={};this.releases={};this.downLocks={};this.upLocks={}},state:function(b){return this.states[b]},pressed:function(b){return this.presses[b]},released:function(b){return this.releases[b]},clamp:function(b,c,d){return b<c?c:b>d?d:b},pollGamepads:function(){if(this.isSupported){this.leftStick.x=0;this.leftStick.y=0;this.rightStick.x=0;this.rightStick.y=0;this.list=navigator.getGamepads();for(var b in this.bindings){for(var c=
!1,d=0;d<this.list.length;d++){var e=this.list[d];if(e&&e.buttons&&this.buttonPressed(e.buttons[b])){c=!0;break}}c?this.buttonDown(b):this.buttonUp(b)}for(d=0;d<this.list.length;d++)if((e=this.list[d])&&e.axes){b=e.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_X];var c=e.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_Y],f=e.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_X],e=e.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_Y];this.leftStick.x+=isNaN(b)?0:b;this.leftStick.y+=isNaN(c)?0:c;this.rightStick.x+=isNaN(f)?0:f;this.rightStick.y+=
isNaN(e)?0:e}0<this.list.length&&(this.leftStick.x=this.clamp(this.leftStick.x,-1,1),this.leftStick.y=this.clamp(this.leftStick.y,-1,1),this.rightStick.x=this.clamp(this.rightStick.x,-1,1),this.rightStick.y=this.clamp(this.rightStick.y,-1,1))}}})});ig.baked=!0;
ig.module("plugins.io.gamepad").requires("plugins.io.gamepad-input").defines(function(){Gamepad=ig.Class.extend({bindings:{padJump:[ig.PADKEY.BUTTON_0]},init:function(){ig.gamepadInput.start();for(var b in this.bindings)for(var c=0;c<this.bindings[b].length;c++)ig.gamepadInput.bind(this.bindings[b][c],b)},press:function(){},held:function(){},release:function(){}})});ig.baked=!0;
ig.module("plugins.io.multitouch").defines(function(){Multitouch=ig.Class.extend({init:function(){ig.multitouchInput.start()},getTouchesPos:function(){if(ig.ua.mobile){if(0<ig.multitouchInput.touches.length){for(var b=[],c=0;c<ig.multitouchInput.touches.length;c++){var d=ig.multitouchInput.touches[c];b.push({x:d.x,y:d.y})}return b}return null}}})});ig.baked=!0;
ig.module("plugins.io.multitouch-input").defines(function(){ig.MultitouchInput=ig.Class.extend({isStart:!1,touches:[],multitouchCapable:!1,lastEventUp:null,start:function(){this.isStart||(this.isStart=!0,navigator.maxTouchPoints&&1<navigator.maxTouchPoints&&(this.multitouchCapable=!0),ig.ua.touchDevice&&(window.navigator.msPointerEnabled&&(ig.system.canvas.addEventListener("MSPointerDown",this.touchdown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",
this.touchmove.bind(this),!1),ig.system.canvas.style.msContentZooming="none",ig.system.canvas.style.msTouchAction="none"),ig.system.canvas.addEventListener("touchstart",this.touchdown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.touchmove.bind(this),!1)))},touchmove:function(b){if(ig.ua.touchDevice){var c=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,d=parseInt(ig.system.canvas.offsetHeight)||
ig.system.realHeight,c=ig.system.scale*(c/ig.system.realWidth),d=ig.system.scale*(d/ig.system.realHeight);if(b.touches){for(;0<this.touches.length;)this.touches.pop();!this.multitouchCapable&&1<b.touches.length&&(this.multitouchCapable=!0);var e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(e=ig.system.canvas.getBoundingClientRect());for(var f=0;f<b.touches.length;f++){var g=b.touches[f];g&&this.touches.push({x:(g.clientX-e.left)/c,y:(g.clientY-e.top)/d})}}else this.windowMove(b)}try{ig.soundHandler.unlockWebAudio()}catch(l){}},
touchdown:function(b){var c=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,d=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,c=ig.system.scale*(c/ig.system.realWidth),d=ig.system.scale*(d/ig.system.realHeight);if(window.navigator.msPointerEnabled)this.windowKeyDown(b);else if(ig.ua.touchDevice&&b.touches){for(;0<this.touches.length;)this.touches.pop();!this.multitouchCapable&&1<b.touches.length&&(this.multitouchCapable=!0);var e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&
(e=ig.system.canvas.getBoundingClientRect());for(var f=0;f<b.touches.length;f++){var g=b.touches[f];g&&this.touches.push({x:(g.clientX-e.left)/c,y:(g.clientY-e.top)/d})}}},touchup:function(b){var c=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;parseInt(ig.system.canvas.offsetHeight);c=ig.system.scale*(c/ig.system.realWidth);if(window.navigator.msPointerEnabled)this.windowKeyUp(b);else{this.lastEventUp=b;var d={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(d=ig.system.canvas.getBoundingClientRect());
if(ig.ua.touchDevice){b=(b.changedTouches[0].clientX-d.left)/c;for(c=0;c<this.touches.length;c++)this.touches[c].x>=b-40&&this.touches[c].x<=b+40&&this.touches.splice(c,1)}}if(ig.visibilityHandler)ig.visibilityHandler.onChange("focus");try{ig.soundHandler.unlockWebAudio()}catch(e){}},windowKeyDown:function(b){var c=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,d=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,c=ig.system.scale*(c/ig.system.realWidth),d=ig.system.scale*
(d/ig.system.realHeight);if(window.navigator.msPointerEnabled){var e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(e=ig.system.canvas.getBoundingClientRect());b=b.changedTouches?b.changedTouches:[b];for(var f=0;f<b.length;++f){for(var g=b[f],l="undefined"!=typeof g.identifier?g.identifier:"undefined"!=typeof g.pointerId?g.pointerId:1,p=(g.clientX-e.left)/c,g=(g.clientY-e.top)/d,j=0;j<this.touches.length;++j)this.touches[j].identifier==l&&this.touches.splice(j,1);this.touches.push({x:p,y:g,
identifier:l})}for(c=0;c<this.touches.length;c++);}},windowKeyUp:function(b){b="undefined"!=typeof b.identifier?b.identifier:"undefined"!=typeof b.pointerId?b.pointerId:1;for(var c=0;c<this.touches.length;++c)this.touches[c].identifier==b&&this.touches.splice(c,1);for(;0<this.touches.length;)this.touches.pop();if(ig.visibilityHandler)ig.visibilityHandler.onChange("focus");try{ig.soundHandler.unlockWebAudio()}catch(d){}},windowMove:function(b){var c=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,
d=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,c=ig.system.scale*(c/ig.system.realWidth),d=ig.system.scale*(d/ig.system.realHeight),e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(e=ig.system.canvas.getBoundingClientRect());if(window.navigator.msPointerEnabled)for(var f="undefined"!=typeof b.identifier?b.identifier:"undefined"!=typeof b.pointerId?b.pointerId:1,g=0;g<this.touches.length;++g)if(this.touches[g].identifier==f){var l=(b.clientY-e.top)/d;this.touches[g].x=(b.clientX-
e.left)/c;this.touches[g].y=l}try{ig.soundHandler.unlockWebAudio()}catch(p){}},clear:function(){for(var b=0;b<this.released.length;++b)this.released[b]&&(this.released.splice(b,1),b--)},pollMultitouch:function(b){!this.multitouchCapable&&1<b&&(this.multitouchCapable=!0)},spliceFromArray:function(b,c){for(var d=0;d<c.length;d++)for(var e=0;e<b.length;e++)b[e].identifier===c[d].identifier&&(b.splice(e,1),e--)},updateSizeProperties:function(){var b=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,
c=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight;this.scaleX=ig.system.scale*(b/ig.system.realWidth);this.scaleY=ig.system.scale*(c/ig.system.realHeight)},upgrade:function(b,c,d){var e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(e=ig.system.canvas.getBoundingClientRect());for(var f=(d.clientX-e.left)/this.scaleX,e=(d.clientY-e.top)/this.scaleY,g=0;g<b.length;g++)if(void 0!==typeof b[g].identifier&&void 0!==typeof d.identifier&&d.identifier===b[g].identifier){b.splice(g,
1);c.push({identifier:d.identifier,x:f,y:e});break}},updateArray:function(b,c){var d={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(d=ig.system.canvas.getBoundingClientRect());for(var e=(c.clientX-d.left)/this.scaleX,d=(c.clientY-d.top)/this.scaleY,f=0;f<b.length;f++)if(void 0!==typeof b[f].identifier&&void 0!==typeof c.identifier&&c.identifier===b[f].identifier){b[f].x=e;b[f].y=d;break}}})});ig.baked=!0;
ig.module("plugins.io.fake-storage").requires("impact.game").defines(function(){ig.FakeStorage=ig.Class.extend({tempData:{},init:function(){ig.FakeStorage.instance=this},initUnset:function(b,c){null===this.get(b)&&this.set(b,c)},set:function(b,c){this.tempData[b]=JSON.stringify(c)},setHighest:function(b,c){c>this.getFloat(b)&&this.set(b,c)},get:function(b){return"undefined"==typeof this.tempData[b]?null:JSON.parse(this.tempData[b])},getInt:function(b){return~~this.get(b)},getFloat:function(b){return parseFloat(this.get(b))},
getBool:function(b){return!!this.get(b)},isSet:function(b){return null!==this.get(b)},remove:function(b){delete this.tempData[b]},clear:function(){this.tempData={}}})});ig.baked=!0;
ig.module("plugins.io.io-manager").requires("plugins.io.storage","plugins.io.mouse","plugins.io.keyboard","plugins.io.gamepad","plugins.io.multitouch","plugins.io.multitouch-input","plugins.io.gamepad-input","plugins.io.fake-storage").defines(function(){IoManager=ig.Class.extend({version:"1.0.0",storage:null,localStorageSupport:!1,mouse:null,keyboard:null,multitouch:null,gamepad:null,init:function(){ig.multitouchInput=new ig.MultitouchInput;ig.gamepadInput=new ig.GamepadInput;this.unbindAll();this.initStorage();
this.initMouse();this.initKeyboard()},unbindAll:function(){ig.input.unbindAll();ig.gamepadInput.unbindAll()},initStorage:function(){try{window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),this.storage=new ig.Storage}catch(b){console.log("using fake storage"),this.storage=new ig.FakeStorage}},initMouse:function(){this.mouse=new Mouse},initKeyboard:function(){this.keyboard=new Keyboard},initMultitouch:function(){this.multitouch=new Multitouch},initGamepad:function(){this.gamepad=
new Gamepad},press:function(b){return ig.input.pressed(b)||this.gamepad&&this.gamepad.press(b)?!0:!1},held:function(b){return ig.input.state(b)||this.gamepad&&this.gamepad.state(b)?!0:!1},release:function(b){return ig.input.released(b)||this.gamepad&&this.gamepad.released(b)?!0:!1},getClickPos:function(){return this.mouse.getPos()},getLastClickPos:function(){return this.mouse.getLast()},getTouchesPos:function(){return this.multitouch.getTouchesPos()},checkOverlap:function(b,c,d,e,f){return b.x>c+
e||b.x<c||b.y>d+f||b.y<d?!1:!0},clear:function(){ig.multitouchInput.clear()},_supportsLocalStorage:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),this.localStorageSupport="localStorage"in window&&null!==window.localStorage}catch(b){return this.localStorageSupport}},storageIsSet:function(b){return"function"===typeof this.storage.isSet?this.storage.isSet(b):null},storageGet:function(b){return"function"===typeof this.storage.get?this.storage.get(b):null},storageSet:function(b,
c){return"function"===typeof this.storage.set?this.storage.set(b,c):null},assert:function(b,c,d){if(c!==d)throw"actualValue:"+c+" not equal to testValue:"+d+" at "+b;}})});ig.baked=!0;
ig.module("plugins.secure-ls").defines(function(){(function(){var b=function(){var b=[function(b,c,d){function e(b){return b&&b.__esModule?b:{"default":b}}Object.defineProperty(c,"__esModule",{value:!0});var j=d(1),q=e(j),j=d(2),m=e(j),j=d(8),s=e(j),j=d(9),r=e(j),j=d(10),u=e(j),j=d(11),t=e(j),j=d(16),D=e(j),j=d(17),F=e(j);d=d(18);var H=e(d),I=function(b){if(!(this instanceof I))throw new TypeError("Cannot call a class as a function");b=b||{};this._name="secure-ls";this.utils=q["default"];this.constants=
m["default"];this.Base64=r["default"];this.LZString=u["default"];this.AES=t["default"];this.DES=D["default"];this.RABBIT=F["default"];this.RC4=H["default"];this.enc=s["default"];this.config={isCompression:!0,encodingType:m["default"].EncrytionTypes.BASE64,encryptionSecret:b.encryptionSecret,encryptionNamespace:b.encryptionNamespace};this.config.isCompression="undefined"==typeof b.isCompression||b.isCompression;this.config.encodingType="undefined"!=typeof b.encodingType||""===b.encodingType?b.encodingType.toLowerCase():
m["default"].EncrytionTypes.BASE64;this.ls=localStorage;this.init()};d=[{key:"init",value:function(){var b=this.getMetaData();this.WarningEnum=this.constants.WarningEnum;this.WarningTypes=this.constants.WarningTypes;this.EncrytionTypes=this.constants.EncrytionTypes;this._isBase64=this._isBase64EncryptionType();this._isAES=this._isAESEncryptionType();this._isDES=this._isDESEncryptionType();this._isRabbit=this._isRabbitEncryptionType();this._isRC4=this._isRC4EncryptionType();this._isCompression=this._isDataCompressionEnabled();
this.utils.allKeys=b.keys||this.resetAllKeys()}},{key:"_isBase64EncryptionType",value:function(){return r["default"]&&("undefined"==typeof this.config.encodingType||this.config.encodingType===this.constants.EncrytionTypes.BASE64)}},{key:"_isAESEncryptionType",value:function(){return t["default"]&&this.config.encodingType===this.constants.EncrytionTypes.AES}},{key:"_isDESEncryptionType",value:function(){return D["default"]&&this.config.encodingType===this.constants.EncrytionTypes.DES}},{key:"_isRabbitEncryptionType",
value:function(){return F["default"]&&this.config.encodingType===this.constants.EncrytionTypes.RABBIT}},{key:"_isRC4EncryptionType",value:function(){return H["default"]&&this.config.encodingType===this.constants.EncrytionTypes.RC4}},{key:"_isDataCompressionEnabled",value:function(){return this.config.isCompression}},{key:"getEncryptionSecret",value:function(b){var c=this.getMetaData();(b=this.utils.getObjectFromKey(c.keys,b))&&(this._isAES||this._isDES||this._isRabbit||this._isRC4)&&("undefined"==
typeof this.config.encryptionSecret?(this.utils.encryptionSecret=b.s,this.utils.encryptionSecret||(this.utils.encryptionSecret=this.utils.generateSecretKey(),this.setMetaData())):this.utils.encryptionSecret=this.config.encryptionSecret||b.s||"")}},{key:"get",value:function(b,c){var d="",f="",e=void 0,g=void 0,d=void 0;if(!this.utils.is(b))return this.utils.warn(this.WarningEnum.KEY_NOT_PROVIDED),f;if(d=this.getDataFromLocalStorage(b),!d)return f;e=d;(this._isCompression||c)&&(e=u["default"].decompressFromUTF16(d));
d=e;this._isBase64||c?d=r["default"].decode(e):(this.getEncryptionSecret(b),this._isAES?g=t["default"].decrypt(e.toString(),this.utils.encryptionSecret):this._isDES?g=D["default"].decrypt(e.toString(),this.utils.encryptionSecret):this._isRabbit?g=F["default"].decrypt(e.toString(),this.utils.encryptionSecret):this._isRC4&&(g=H["default"].decrypt(e.toString(),this.utils.encryptionSecret)),g&&(d=g.toString(s["default"]._Utf8)));try{f=JSON.parse(d)}catch(j){throw Error("Could not parse JSON");}return f}},
{key:"getDataFromLocalStorage",value:function(b){return this.ls.getItem(b,!0)}},{key:"getAllKeys",value:function(){var b=this.getMetaData();return this.utils.extractKeyNames(b)||[]}},{key:"set",value:function(b,c){var d="";return this.utils.is(b)?(this.getEncryptionSecret(b),String(b)!==String(this.utils.metaKey)&&(this.utils.isKeyPresent(b)||(this.utils.addToKeysList(b),this.setMetaData())),d=this.processData(c),void this.setDataToLocalStorage(b,d)):void this.utils.warn(this.WarningEnum.KEY_NOT_PROVIDED)}},
{key:"setDataToLocalStorage",value:function(b,c){this.ls.setItem(b,c)}},{key:"remove",value:function(b){return this.utils.is(b)?b===this.utils.metaKey&&this.getAllKeys().length?void this.utils.warn(this.WarningEnum.META_KEY_REMOVE):(this.utils.isKeyPresent(b)&&(this.utils.removeFromKeysList(b),this.setMetaData()),void this.ls.removeItem(b)):void this.utils.warn(this.WarningEnum.KEY_NOT_PROVIDED)}},{key:"removeAll",value:function(){for(var b=void 0,c=void 0,b=this.getAllKeys(),c=0;c<b.length;c++)this.ls.removeItem(b[c]);
this.ls.removeItem(this.utils.metaKey);this.resetAllKeys()}},{key:"clear",value:function(){this.ls.clear();this.resetAllKeys()}},{key:"resetAllKeys",value:function(){return this.utils.allKeys=[],[]}},{key:"processData",value:function(b,c){if(null===b||void 0===b||""===b)return"";var d=void 0,f=void 0,e=void 0;try{d=JSON.stringify(b)}catch(g){throw Error("Could not stringify data.");}return f=d,this._isBase64||c?f=r["default"].encode(d):(this._isAES?f=t["default"].encrypt(d,this.utils.encryptionSecret):
this._isDES?f=D["default"].encrypt(d,this.utils.encryptionSecret):this._isRabbit?f=F["default"].encrypt(d,this.utils.encryptionSecret):this._isRC4&&(f=H["default"].encrypt(d,this.utils.encryptionSecret)),f=f&&f.toString()),e=f,(this._isCompression||c)&&(e=u["default"].compressToUTF16(f)),e}},{key:"setMetaData",value:function(){var b=this.processData({keys:this.utils.allKeys},!0);this.setDataToLocalStorage(this.getMetaKey(),b)}},{key:"getMetaData",value:function(){return this.get(this.getMetaKey(),
!0)||{}}},{key:"getMetaKey",value:function(){return this.utils.metaKey+(this.config.encryptionNamespace?"__"+this.config.encryptionNamespace:"")}}];for(var j=I.prototype,v=0;v<d.length;v++){var G=d[v];G.enumerable=G.enumerable||!1;G.configurable=!0;"value"in G&&(G.writable=!0);Object.defineProperty(j,G.key,G)}c["default"]=I;b.exports=c["default"]},function(b,c,d){function e(b){return b&&b.__esModule?b:{"default":b}}c=d(2);var j=e(c);c=d(3);var q=e(c);d=d(4);var m=e(d);b.exports={metaKey:"_secure__ls__metadata",
encryptionSecret:"",secretPhrase:"s3cr3t$#@135^&*246",allKeys:[],is:function(b){return!!b},warn:function(b){b=b?b:j["default"].WarningEnum.DEFAULT_TEXT;console.warn(j["default"].WarningTypes[b])},generateSecretKey:function(){var b=q["default"].random(16);return(b=(0,m["default"])(this.secretPhrase,b,{keySize:4}))&&b.toString()},getObjectFromKey:function(b,c){if(!b||!b.length)return{};for(var d=void 0,f={},d=0;d<b.length;d++)if(b[d].k===c){f=b[d];break}return f},extractKeyNames:function(b){return b&&
b.keys&&b.keys.length?b.keys.map(function(b){return b.k}):[]},getAllKeys:function(){return this.allKeys},isKeyPresent:function(b){for(var c=!1,d=0;d<this.allKeys.length;d++)if(String(this.allKeys[d].k)===String(b)){c=!0;break}return c},addToKeysList:function(b){this.allKeys.push({k:b,s:this.encryptionSecret})},removeFromKeysList:function(b){for(var c=void 0,d=-1,c=0;c<this.allKeys.length;c++)if(this.allKeys[c].k===b){d=c;break}return-1!==d&&this.allKeys.splice(d,1),d}}},function(b){var c={KEY_NOT_PROVIDED:"keyNotProvided",
META_KEY_REMOVE:"metaKeyRemove",DEFAULT_TEXT:"defaultText"},d={};d[c.KEY_NOT_PROVIDED]="Secure LS: Key not provided. Aborting operation!";d[c.META_KEY_REMOVE]="Secure LS: Meta key can not be removed\nunless all keys created by Secure LS are removed!";d[c.DEFAULT_TEXT]="Unexpected output";b.exports={WarningEnum:c,WarningTypes:d,EncrytionTypes:{BASE64:"base64",AES:"aes",DES:"des",RABBIT:"rabbit",RC4:"rc4"}}},function(b){b.exports={random:function(b){for(var c,d=[],f=function(b){var c=987654321;return function(){c=
36969*(65535&c)+(c>>16)&4294967295;b=18E3*(65535&b)+(b>>16)&4294967295;var d=(c<<16)+b&4294967295;return d/=4294967296,d+=0.5,d*(0.5<Math.random()?1:-1)}},e=0;e<b;e+=4){var m=f(4294967296*(c||Math.random()));c=987654071*m();d.push(4294967296*m()|0)}return new this.Set(d,b)},Set:function(b,c){b=this.words=b||[];void 0!==c?this.sigBytes=c:this.sigBytes=8*b.length}}},function(b,c,d){c=d(5);d(6);d(7);var e=c.lib;d=e.Base;var j=e.WordArray,e=c.algo,q=e.HMAC,m=e.PBKDF2=d.extend({cfg:d.extend({keySize:4,
hasher:e.SHA1,iterations:1}),init:function(b){this.cfg=this.cfg.extend(b)},compute:function(b,c){for(var d=this.cfg,f=q.create(d.hasher,b),e=j.create(),g=j.create([1]),l=e.words,m=g.words,p=d.keySize,d=d.iterations;l.length<p;){var G=f.update(c).finalize(g);f.reset();for(var M=G.words,L=M.length,O=G,Q=1;Q<d;Q++){O=f.finalize(O);f.reset();for(var P=O.words,J=0;J<L;J++)M[J]^=P[J]}e.concat(G);m[0]++}return e.sigBytes=4*p,e}});c.PBKDF2=function(b,c,d){return m.create(d).compute(b,c)};b.exports=c.PBKDF2;
!0},function(b){var c;if(!c){var d=Math;if(!(c=Object.create)){var e=function(){};c=function(b){var c;return e.prototype=b,c=new e,e.prototype=null,c}}var j=c;c={};var q=c.lib={},m=q.Base={extend:function(b){var c=j(this);return b&&c.mixIn(b),c.hasOwnProperty("init")&&this.init!==c.init||(c.init=function(){c.$super.init.apply(this,arguments)}),c.init.prototype=c,c.$super=this,c},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var c in b)b.hasOwnProperty(c)&&
(this[c]=b[c]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}},s=q.WordArray=m.extend({init:function(b,c){b=this.words=b||[];void 0!=c?this.sigBytes=c:this.sigBytes=4*b.length},toString:function(b){return(b||u).stringify(this)},concat:function(b){var c=this.words,d=b.words,f=this.sigBytes;b=b.sigBytes;if(this.clamp(),f%4)for(var e=0;e<b;e++)c[f+e>>>2]|=(d[e>>>2]>>>24-8*(e%4)&255)<<24-8*((f+e)%4);else for(e=0;e<b;e+=4)c[f+e>>>2]=
d[e>>>2];return this.sigBytes+=b,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4);b.length=d.ceil(c/4)},clone:function(){var b=m.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var c,f=[],e=function(b){var c=987654321;return function(){c=36969*(65535&c)+(c>>16)&4294967295;b=18E3*(65535&b)+(b>>16)&4294967295;var f=(c<<16)+b&4294967295;return f/=4294967296,f+=0.5,f*(0.5<d.random()?1:-1)}},g=0;g<b;g+=4){var j=e(4294967296*(c||d.random()));
c=987654071*j();f.push(4294967296*j()|0)}return new s.init(f,b)}}),r=c.enc={},u=r.Hex={stringify:function(b){var c=b.words;b=b.sigBytes;for(var d=[],f=0;f<b;f++){var e=c[f>>>2]>>>24-8*(f%4)&255;d.push((e>>>4).toString(16));d.push((15&e).toString(16))}return d.join("")},parse:function(b){for(var c=b.length,d=[],f=0;f<c;f+=2)d[f>>>3]|=parseInt(b.substr(f,2),16)<<24-4*(f%8);return new s.init(d,c/2)}},t=r.Latin1={stringify:function(b){var c=b.words;b=b.sigBytes;for(var d=[],f=0;f<b;f++)d.push(String.fromCharCode(c[f>>>
2]>>>24-8*(f%4)&255));return d.join("")},parse:function(b){for(var c=b.length,d=[],f=0;f<c;f++)d[f>>>2]|=(255&b.charCodeAt(f))<<24-8*(f%4);return new s.init(d,c)}},D=r.Utf8={stringify:function(b){try{return decodeURIComponent(escape(t.stringify(b)))}catch(c){throw Error("Malformed UTF-8 data");}},parse:function(b){return t.parse(unescape(encodeURIComponent(b)))}},F=q.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new s.init;this._nDataBytes=0},_append:function(b){"string"==typeof b&&
(b=D.parse(b));this._data.concat(b);this._nDataBytes+=b.sigBytes},_process:function(b){var c=this._data,f=c.words,e=c.sigBytes,g=this.blockSize,j=e/(4*g),j=b?d.ceil(j):d.max((0|j)-this._minBufferSize,0);b=j*g;e=d.min(4*b,e);if(b){for(var m=0;m<b;m+=g)this._doProcessBlock(f,m);m=f.splice(0,b);c.sigBytes-=e}return new s.init(m,e)},clone:function(){var b=m.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0}),H=(q.Hasher=F.extend({cfg:m.extend(),init:function(b){this.cfg=this.cfg.extend(b);
this.reset()},reset:function(){F.reset.call(this);this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){b&&this._append(b);return this._doFinalize()},blockSize:16,_createHelper:function(b){return function(c,d){return(new b.init(d)).finalize(c)}},_createHmacHelper:function(b){return function(c,d){return(new H.HMAC.init(b,d)).finalize(c)}}}),c.algo={})}b.exports=c;!0},function(b,c,d){c=d(5);d=c.lib;var e=d.WordArray,j=d.Hasher,q=[];d=c.algo.SHA1=j.extend({_doReset:function(){this._hash=
new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(b,c){for(var d=this._hash.words,f=d[0],e=d[1],g=d[2],j=d[3],l=d[4],p=0;80>p;p++){if(16>p)q[p]=0|b[c+p];else{var v=q[p-3]^q[p-8]^q[p-14]^q[p-16];q[p]=v<<1|v>>>31}v=(f<<5|f>>>27)+l+q[p];v+=20>p?(e&g|~e&j)+1518500249:40>p?(e^g^j)+1859775393:60>p?(e&g|e&j|g&j)-1894007588:(e^g^j)-899497514;l=j;j=g;g=e<<30|e>>>2;e=f;f=v}d[0]=d[0]+f|0;d[1]=d[1]+e|0;d[2]=d[2]+g|0;d[3]=d[3]+j|0;d[4]=d[4]+l|0},_doFinalize:function(){var b=
this._data,c=b.words,d=8*this._nDataBytes,f=8*b.sigBytes;return c[f>>>5]|=128<<24-f%32,c[(f+64>>>9<<4)+14]=Math.floor(d/4294967296),c[(f+64>>>9<<4)+15]=d,b.sigBytes=4*c.length,this._process(),this._hash},clone:function(){var b=j.clone.call(this);return b._hash=this._hash.clone(),b}});c.SHA1=j._createHelper(d);c.HmacSHA1=j._createHmacHelper(d);b.exports=c.SHA1;!0},function(b,c,d){c=d(5);var e=c.enc.Utf8;c.algo.HMAC=c.lib.Base.extend({init:function(b,c){b=this._hasher=new b.init;"string"==typeof c&&
(c=e.parse(c));var d=b.blockSize,f=4*d;c.sigBytes>f&&(c=b.finalize(c));c.clamp();for(var g=this._oKey=c.clone(),l=this._iKey=c.clone(),t=g.words,D=l.words,F=0;F<d;F++)t[F]^=1549556828,D[F]^=909522486;g.sigBytes=l.sigBytes=f;this.reset()},reset:function(){var b=this._hasher;b.reset();b.update(this._iKey)},update:function(b){return this._hasher.update(b),this},finalize:function(b){var c=this._hasher;b=c.finalize(b);c.reset();return c.finalize(this._oKey.clone().concat(b))}});!0;b.exports=void 0;!0},
function(b){var c={Latin1:{stringify:function(b){var c=b.words;b=b.sigBytes;for(var d=[],f=void 0,e=void 0,f=0;f<b;f++)e=c[f>>>2]>>>24-8*(f%4)&255,d.push(String.fromCharCode(e));return d.join("")}},_Utf8:{stringify:function(b){try{return decodeURIComponent(escape(c.Latin1.stringify(b)))}catch(d){throw Error("Malformed UTF-8 data");}}}};b.exports=c},function(b){var c={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(b){var d="",f=void 0,e=void 0,m=void 0,
s=void 0,r=f=void 0,u=void 0,t=0;for(b=c._utf8Encode(b);t<b.length;)f=b.charCodeAt(t++),e=b.charCodeAt(t++),m=b.charCodeAt(t++),s=f>>2,f=(3&f)<<4|e>>4,r=(15&e)<<2|m>>6,u=63&m,isNaN(e)?r=u=64:isNaN(m)&&(u=64),d=d+this._keyStr.charAt(s)+this._keyStr.charAt(f)+this._keyStr.charAt(r)+this._keyStr.charAt(u);return d},decode:function(b){var d="",f=void 0,e=void 0,m=void 0,s=e=f=void 0,r=void 0,u=0;for(b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<b.length;)f=this._keyStr.indexOf(b.charAt(u++)),e=this._keyStr.indexOf(b.charAt(u++)),
s=this._keyStr.indexOf(b.charAt(u++)),r=this._keyStr.indexOf(b.charAt(u++)),f=f<<2|e>>4,e=(15&e)<<4|s>>2,m=(3&s)<<6|r,d+=String.fromCharCode(f),64!==s&&(d+=String.fromCharCode(e)),64!==r&&(d+=String.fromCharCode(m));return c._utf8Decode(d)},_utf8Encode:function(b){b=b.replace(/\r\n/g,"\n");for(var c="",d=0;d<b.length;d++){var f=b.charCodeAt(d);128>f?c+=String.fromCharCode(f):127<f&&2048>f?(c+=String.fromCharCode(f>>6|192),c+=String.fromCharCode(63&f|128)):(c+=String.fromCharCode(f>>12|224),c+=String.fromCharCode(f>>
6&63|128),c+=String.fromCharCode(63&f|128))}return c},_utf8Decode:function(b){for(var c="",d=0,f=void 0,e=void 0,g=void 0,e=0;d<b.length;)f=b.charCodeAt(d),128>f?(c+=String.fromCharCode(f),d++):191<f&&224>f?(e=b.charCodeAt(d+1),c+=String.fromCharCode((31&f)<<6|63&e),d+=2):(e=b.charCodeAt(d+1),g=b.charCodeAt(d+2),c+=String.fromCharCode((15&f)<<12|(63&e)<<6|63&g),d+=3);return c}};b.exports=c},function(b,c,d){var e,j=function(b,c){if(!m[b]){m[b]={};for(var d=0;d<b.length;d++)m[b][b.charAt(d)]=d}return m[b][c]},
q=String.fromCharCode,m={},s={compressToBase64:function(b){if(null==b)return"";b=s._compress(b,6,function(b){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)});switch(b.length%4){default:case 0:return b;case 1:return b+"===";case 2:return b+"==";case 3:return b+"="}},decompressFromBase64:function(b){return null==b?"":""==b?null:s._decompress(b.length,32,function(c){return j("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b.charAt(c))})},compressToUTF16:function(b){return null==
b?"":s._compress(b,15,function(b){return q(b+32)})+" "},decompressFromUTF16:function(b){return null==b?"":""==b?null:s._decompress(b.length,16384,function(c){return b.charCodeAt(c)-32})},compressToUint8Array:function(b){b=s.compress(b);for(var c=new Uint8Array(2*b.length),d=0,f=b.length;d<f;d++){var e=b.charCodeAt(d);c[2*d]=e>>>8;c[2*d+1]=e%256}return c},decompressFromUint8Array:function(b){if(null===b||void 0===b)return s.decompress(b);for(var c=Array(b.length/2),d=0,f=c.length;d<f;d++)c[d]=256*
b[2*d]+b[2*d+1];var e=[];return c.forEach(function(b){e.push(q(b))}),s.decompress(e.join(""))},compressToEncodedURIComponent:function(b){return null==b?"":s._compress(b,6,function(b){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$".charAt(b)})},decompressFromEncodedURIComponent:function(b){return null==b?"":""==b?null:(b=b.replace(/ /g,"+"),s._decompress(b.length,32,function(c){return j("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",b.charAt(c))}))},compress:function(b){return s._compress(b,
16,function(b){return q(b)})},_compress:function(b,c,d){if(null==b)return"";var f,e,g,j={},l={},m="",p="",q="",s=2,Q=3,P=2,J=[],B=0,K=0;for(g=0;g<b.length;g+=1)if(m=b.charAt(g),Object.prototype.hasOwnProperty.call(j,m)||(j[m]=Q++,l[m]=!0),p=q+m,Object.prototype.hasOwnProperty.call(j,p))q=p;else{if(Object.prototype.hasOwnProperty.call(l,q)){if(256>q.charCodeAt(0)){for(f=0;f<P;f++)B<<=1,K==c-1?(K=0,J.push(d(B)),B=0):K++;e=q.charCodeAt(0);for(f=0;8>f;f++)B=B<<1|1&e,K==c-1?(K=0,J.push(d(B)),B=0):K++,
e>>=1}else{e=1;for(f=0;f<P;f++)B=B<<1|e,K==c-1?(K=0,J.push(d(B)),B=0):K++,e=0;e=q.charCodeAt(0);for(f=0;16>f;f++)B=B<<1|1&e,K==c-1?(K=0,J.push(d(B)),B=0):K++,e>>=1}s--;0==s&&(s=Math.pow(2,P),P++);delete l[q]}else{e=j[q];for(f=0;f<P;f++)B=B<<1|1&e,K==c-1?(K=0,J.push(d(B)),B=0):K++,e>>=1}s--;0==s&&(s=Math.pow(2,P),P++);j[p]=Q++;q=String(m)}if(""!==q){if(Object.prototype.hasOwnProperty.call(l,q)){if(256>q.charCodeAt(0)){for(f=0;f<P;f++)B<<=1,K==c-1?(K=0,J.push(d(B)),B=0):K++;e=q.charCodeAt(0);for(f=
0;8>f;f++)B=B<<1|1&e,K==c-1?(K=0,J.push(d(B)),B=0):K++,e>>=1}else{e=1;for(f=0;f<P;f++)B=B<<1|e,K==c-1?(K=0,J.push(d(B)),B=0):K++,e=0;e=q.charCodeAt(0);for(f=0;16>f;f++)B=B<<1|1&e,K==c-1?(K=0,J.push(d(B)),B=0):K++,e>>=1}s--;0==s&&(s=Math.pow(2,P),P++);delete l[q]}else{e=j[q];for(f=0;f<P;f++)B=B<<1|1&e,K==c-1?(K=0,J.push(d(B)),B=0):K++,e>>=1}s--;0==s&&(Math.pow(2,P),P++)}e=2;for(f=0;f<P;f++)B=B<<1|1&e,K==c-1?(K=0,J.push(d(B)),B=0):K++,e>>=1;for(;;){if(B<<=1,K==c-1){J.push(d(B));break}K++}return J.join("")},
decompress:function(b){return null==b?"":""==b?null:s._decompress(b.length,32768,function(c){return b.charCodeAt(c)})},_decompress:function(b,c,d){var f,e,g,j,l,m,p=[],s=4,O=4,Q=3;e="";var P=[],J=d(0),B=c,K=1;for(f=0;3>f;f+=1)p[f]=f;e=0;j=Math.pow(2,2);for(l=1;l!=j;)g=J&B,B>>=1,0==B&&(B=c,J=d(K++)),e|=(0<g?1:0)*l,l<<=1;switch(e){case 0:e=0;j=Math.pow(2,8);for(l=1;l!=j;)g=J&B,B>>=1,0==B&&(B=c,J=d(K++)),e|=(0<g?1:0)*l,l<<=1;m=q(e);break;case 1:e=0;j=Math.pow(2,16);for(l=1;l!=j;)g=J&B,B>>=1,0==B&&(B=
c,J=d(K++)),e|=(0<g?1:0)*l,l<<=1;m=q(e);break;case 2:return""}f=p[3]=m;for(P.push(m);;){if(K>b)return"";e=0;j=Math.pow(2,Q);for(l=1;l!=j;)g=J&B,B>>=1,0==B&&(B=c,J=d(K++)),e|=(0<g?1:0)*l,l<<=1;switch(m=e){case 0:e=0;j=Math.pow(2,8);for(l=1;l!=j;)g=J&B,B>>=1,0==B&&(B=c,J=d(K++)),e|=(0<g?1:0)*l,l<<=1;p[O++]=q(e);m=O-1;s--;break;case 1:e=0;j=Math.pow(2,16);for(l=1;l!=j;)g=J&B,B>>=1,0==B&&(B=c,J=d(K++)),e|=(0<g?1:0)*l,l<<=1;p[O++]=q(e);m=O-1;s--;break;case 2:return P.join("")}if(0==s&&(s=Math.pow(2,Q),
Q++),p[m])e=p[m];else{if(m!==O)return null;e=f+f.charAt(0)}P.push(e);p[O++]=f+e.charAt(0);s--;f=e;0==s&&(s=Math.pow(2,Q),Q++)}}};e=s;c=function(){return e}.call(c,d,c,b);!(void 0!==c&&(b.exports=c))},function(b,c,d){c=d(5);d(12);d(13);d(14);d(15);d=c.lib.BlockCipher;for(var e=c.algo,j=[],q=[],m=[],s=[],r=[],u=[],t=[],D=[],F=[],H=[],I=[],v=0;256>v;v++)128>v?I[v]=v<<1:I[v]=v<<1^283;for(var G=0,M=0,v=0;256>v;v++){var L=M^M<<1^M<<2^M<<3^M<<4,L=L>>>8^255&L^99;j[G]=L;q[L]=G;var O=I[G],Q=I[O],P=I[Q],J=257*
I[L]^16843008*L;m[G]=J<<24|J>>>8;s[G]=J<<16|J>>>16;r[G]=J<<8|J>>>24;u[G]=J;J=16843009*P^65537*Q^257*O^16843008*G;t[L]=J<<24|J>>>8;D[L]=J<<16|J>>>16;F[L]=J<<8|J>>>24;H[L]=J;G?(G=O^I[I[I[P^O]]],M^=I[I[M]]):G=M=1}!0;var B=[0,1,2,4,8,16,32,64,128,27,54],e=e.AES=d.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var b=this._keyPriorReset=this._key,c=b.words,d=b.sigBytes/4,b=4*((this._nRounds=d+6)+1),f=this._keySchedule=[],e=0;e<b;e++)if(e<d)f[e]=c[e];else{var g=f[e-1];
e%d?6<d&&4==e%d&&(g=j[g>>>24]<<24|j[g>>>16&255]<<16|j[g>>>8&255]<<8|j[255&g]):(g=g<<8|g>>>24,g=j[g>>>24]<<24|j[g>>>16&255]<<16|j[g>>>8&255]<<8|j[255&g],g^=B[e/d|0]<<24);f[e]=f[e-d]^g}c=this._invKeySchedule=[];for(d=0;d<b;d++)e=b-d,g=d%4?f[e]:f[e-4],4>d||4>=e?c[d]=g:c[d]=t[j[g>>>24]]^D[j[g>>>16&255]]^F[j[g>>>8&255]]^H[j[255&g]]}},encryptBlock:function(b,c){this._doCryptBlock(b,c,this._keySchedule,m,s,r,u,j)},decryptBlock:function(b,c){var d=b[c+1];b[c+1]=b[c+3];b[c+3]=d;this._doCryptBlock(b,c,this._invKeySchedule,
t,D,F,H,q);d=b[c+1];b[c+1]=b[c+3];b[c+3]=d},_doCryptBlock:function(b,c,d,f,e,g,j,l){for(var m=this._nRounds,p=b[c]^d[0],q=b[c+1]^d[1],r=b[c+2]^d[2],s=b[c+3]^d[3],t=4,v=1;v<m;v++)var u=f[p>>>24]^e[q>>>16&255]^g[r>>>8&255]^j[255&s]^d[t++],G=f[q>>>24]^e[r>>>16&255]^g[s>>>8&255]^j[255&p]^d[t++],H=f[r>>>24]^e[s>>>16&255]^g[p>>>8&255]^j[255&q]^d[t++],s=f[s>>>24]^e[p>>>16&255]^g[q>>>8&255]^j[255&r]^d[t++],p=u,q=G,r=H;u=(l[p>>>24]<<24|l[q>>>16&255]<<16|l[r>>>8&255]<<8|l[255&s])^d[t++];G=(l[q>>>24]<<24|l[r>>>
16&255]<<16|l[s>>>8&255]<<8|l[255&p])^d[t++];H=(l[r>>>24]<<24|l[s>>>16&255]<<16|l[p>>>8&255]<<8|l[255&q])^d[t++];s=(l[s>>>24]<<24|l[p>>>16&255]<<16|l[q>>>8&255]<<8|l[255&r])^d[t++];b[c]=u;b[c+1]=G;b[c+2]=H;b[c+3]=s},keySize:8});c.AES=d._createHelper(e);b.exports=c.AES;!0},function(b,c,d){c=d(5);var e=c.lib.WordArray;c.enc.Base64={stringify:function(b){var c=b.words,d=b.sigBytes,f=this._map;b.clamp();b=[];for(var e=0;e<d;e+=3)for(var g=(c[e>>>2]>>>24-8*(e%4)&255)<<16|(c[e+1>>>2]>>>24-8*((e+1)%4)&255)<<
8|c[e+2>>>2]>>>24-8*((e+2)%4)&255,l=0;4>l&&e+0.75*l<d;l++)b.push(f.charAt(g>>>6*(3-l)&63));if(c=f.charAt(64))for(;b.length%4;)b.push(c);return b.join("")},parse:function(b){var c=b.length,d=this._map,f=this._reverseMap;if(!f)for(var f=this._reverseMap=[],g=0;g<d.length;g++)f[d.charCodeAt(g)]=g;if(d=d.charAt(64))d=b.indexOf(d),-1!==d&&(c=d);for(var d=[],l=g=0;l<c;l++)if(l%4){var t=f[b.charCodeAt(l-1)]<<2*(l%4),D=f[b.charCodeAt(l)]>>>6-2*(l%4);d[g>>>2]|=(t|D)<<24-8*(g%4);g++}return e.create(d,g)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};
b.exports=c.enc.Base64;!0},function(b,c,d){c=d(5);var e=Math,j=function(b,c,d,f,e,g,j){b=b+(c&d|~c&f)+e+j;return(b<<g|b>>>32-g)+c},q=function(b,c,d,f,e,g,j){b=b+(c&f|d&~f)+e+j;return(b<<g|b>>>32-g)+c},m=function(b,c,d,f,e,g,j){b=b+(c^d^f)+e+j;return(b<<g|b>>>32-g)+c},s=function(b,c,d,f,e,g,j){b=b+(d^(c|~f))+e+j;return(b<<g|b>>>32-g)+c};d=c.lib;var r=d.WordArray,u=d.Hasher;d=c.algo;for(var t=[],D=0;64>D;D++)t[D]=4294967296*e.abs(e.sin(D+1))|0;!0;d=d.MD5=u.extend({_doReset:function(){this._hash=new r.init([1732584193,
4023233417,2562383102,271733878])},_doProcessBlock:function(b,c){for(var d=0;16>d;d++){var f=c+d,e=b[f];b[f]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8)}var d=this._hash.words,f=b[c+0],e=b[c+1],g=b[c+2],l=b[c+3],p=b[c+4],r=b[c+5],u=b[c+6],D=b[c+7],B=b[c+8],K=b[c+9],xa=b[c+10],ya=b[c+11],za=b[c+12],ca=b[c+13],ga=b[c+14],Z=b[c+15],C=d[0],A=d[1],z=d[2],E=d[3],C=j(C,A,z,E,f,7,t[0]),E=j(E,C,A,z,e,12,t[1]),z=j(z,E,C,A,g,17,t[2]),A=j(A,z,E,C,l,22,t[3]),C=j(C,A,z,E,p,7,t[4]),E=j(E,C,A,z,r,12,t[5]),z=
j(z,E,C,A,u,17,t[6]),A=j(A,z,E,C,D,22,t[7]),C=j(C,A,z,E,B,7,t[8]),E=j(E,C,A,z,K,12,t[9]),z=j(z,E,C,A,xa,17,t[10]),A=j(A,z,E,C,ya,22,t[11]),C=j(C,A,z,E,za,7,t[12]),E=j(E,C,A,z,ca,12,t[13]),z=j(z,E,C,A,ga,17,t[14]),A=j(A,z,E,C,Z,22,t[15]),C=q(C,A,z,E,e,5,t[16]),E=q(E,C,A,z,u,9,t[17]),z=q(z,E,C,A,ya,14,t[18]),A=q(A,z,E,C,f,20,t[19]),C=q(C,A,z,E,r,5,t[20]),E=q(E,C,A,z,xa,9,t[21]),z=q(z,E,C,A,Z,14,t[22]),A=q(A,z,E,C,p,20,t[23]),C=q(C,A,z,E,K,5,t[24]),E=q(E,C,A,z,ga,9,t[25]),z=q(z,E,C,A,l,14,t[26]),A=q(A,
z,E,C,B,20,t[27]),C=q(C,A,z,E,ca,5,t[28]),E=q(E,C,A,z,g,9,t[29]),z=q(z,E,C,A,D,14,t[30]),A=q(A,z,E,C,za,20,t[31]),C=m(C,A,z,E,r,4,t[32]),E=m(E,C,A,z,B,11,t[33]),z=m(z,E,C,A,ya,16,t[34]),A=m(A,z,E,C,ga,23,t[35]),C=m(C,A,z,E,e,4,t[36]),E=m(E,C,A,z,p,11,t[37]),z=m(z,E,C,A,D,16,t[38]),A=m(A,z,E,C,xa,23,t[39]),C=m(C,A,z,E,ca,4,t[40]),E=m(E,C,A,z,f,11,t[41]),z=m(z,E,C,A,l,16,t[42]),A=m(A,z,E,C,u,23,t[43]),C=m(C,A,z,E,K,4,t[44]),E=m(E,C,A,z,za,11,t[45]),z=m(z,E,C,A,Z,16,t[46]),A=m(A,z,E,C,g,23,t[47]),C=
s(C,A,z,E,f,6,t[48]),E=s(E,C,A,z,D,10,t[49]),z=s(z,E,C,A,ga,15,t[50]),A=s(A,z,E,C,r,21,t[51]),C=s(C,A,z,E,za,6,t[52]),E=s(E,C,A,z,l,10,t[53]),z=s(z,E,C,A,xa,15,t[54]),A=s(A,z,E,C,e,21,t[55]),C=s(C,A,z,E,B,6,t[56]),E=s(E,C,A,z,Z,10,t[57]),z=s(z,E,C,A,u,15,t[58]),A=s(A,z,E,C,ca,21,t[59]),C=s(C,A,z,E,p,6,t[60]),E=s(E,C,A,z,ya,10,t[61]),z=s(z,E,C,A,g,15,t[62]),A=s(A,z,E,C,K,21,t[63]);d[0]=d[0]+C|0;d[1]=d[1]+A|0;d[2]=d[2]+z|0;d[3]=d[3]+E|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,
f=8*b.sigBytes;c[f>>>5]|=128<<24-f%32;var g=e.floor(d/4294967296);c[(f+64>>>9<<4)+15]=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8);c[(f+64>>>9<<4)+14]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8);b.sigBytes=4*(c.length+1);this._process();b=this._hash;c=b.words;for(d=0;4>d;d++)f=c[d],c[d]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8);return b},clone:function(){var b=u.clone.call(this);return b._hash=this._hash.clone(),b}});c.MD5=u._createHelper(d);c.HmacMD5=u._createHmacHelper(d);b.exports=
c.MD5;!0},function(b,c,d){c=d(5);d(6);d(7);var e=c.lib;d=e.Base;var j=e.WordArray,e=c.algo,q=e.EvpKDF=d.extend({cfg:d.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(b){this.cfg=this.cfg.extend(b)},compute:function(b,c){for(var d=this.cfg,f=d.hasher.create(),e=j.create(),g=e.words,l=d.keySize,d=d.iterations;g.length<l;){p&&f.update(p);var p=f.update(b).finalize(c);f.reset();for(var q=1;q<d;q++)p=f.finalize(p),f.reset();e.concat(p)}return e.sigBytes=4*l,e}});c.EvpKDF=function(b,c,d){return q.create(d).compute(b,
c)};b.exports=c.EvpKDF;!0},function(b,c,d){d=d(5);if(!d.lib.Cipher){c=d.lib;var e=c.Base,j=c.WordArray,q=c.BufferedBlockAlgorithm,m=d.enc,s=(m.Utf8,m.Base64),r=d.algo.EvpKDF,u=c.Cipher=q.extend({cfg:e.extend(),createEncryptor:function(b,c){return this.create(this._ENC_XFORM_MODE,b,c)},createDecryptor:function(b,c){return this.create(this._DEC_XFORM_MODE,b,c)},init:function(b,c,d){this.cfg=this.cfg.extend(d);this._xformMode=b;this._key=c;this.reset()},reset:function(){q.reset.call(this);this._doReset()},
process:function(b){return this._append(b),this._process()},finalize:function(b){b&&this._append(b);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(b){return{encrypt:function(c,d,f){return("string"==typeof d?I:H).encrypt(b,c,d,f)},decrypt:function(c,d,f){return("string"==typeof d?I:H).decrypt(b,c,d,f)}}}}),m=(c.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),d.mode={}),t,D=function(b,c,d){var f=this._iv;
f?this._iv=void 0:f=this._prevBlock;for(var e=0;e<d;e++)b[c+e]^=f[e]};t=(c.BlockCipherMode=e.extend({createEncryptor:function(b,c){return this.Encryptor.create(b,c)},createDecryptor:function(b,c){return this.Decryptor.create(b,c)},init:function(b,c){this._cipher=b;this._iv=c}})).extend();t=(t.Encryptor=t.extend({processBlock:function(b,c){var d=this._cipher,f=d.blockSize;D.call(this,b,c,f);d.encryptBlock(b,c);this._prevBlock=b.slice(c,c+f)}}),t.Decryptor=t.extend({processBlock:function(b,c){var d=
this._cipher,f=d.blockSize,e=b.slice(c,c+f);d.decryptBlock(b,c);D.call(this,b,c,f);this._prevBlock=e}}),t);m=m.CBC=t;t=(d.pad={}).Pkcs7={pad:function(b,c){for(var d=4*c,d=d-b.sigBytes%d,f=d<<24|d<<16|d<<8|d,e=[],g=0;g<d;g+=4)e.push(f);d=j.create(e,d);b.concat(d)},unpad:function(b){b.sigBytes-=255&b.words[b.sigBytes-1>>>2]}};var F=(c.BlockCipher=u.extend({cfg:u.cfg.extend({mode:m,padding:t}),reset:function(){u.reset.call(this);var b=this.cfg,c=b.iv,b=b.mode;if(this._xformMode==this._ENC_XFORM_MODE)var d=
b.createEncryptor;else d=b.createDecryptor,this._minBufferSize=1;this._mode=d.call(b,this,c&&c.words)},_doProcessBlock:function(b,c){this._mode.processBlock(b,c)},_doFinalize:function(){var b=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){b.pad(this._data,this.blockSize);var c=this._process(!0)}else c=this._process(!0),b.unpad(c);return c},blockSize:4}),c.CipherParams=e.extend({init:function(b){this.mixIn(b)},toString:function(b){return(b||this.formatter).stringify(this)}})),m=(d.format=
{}).OpenSSL={stringify:function(b){var c=b.ciphertext;b=b.salt;return(b?j.create([1398893684,1701076831]).concat(b).concat(c):c).toString(s)},parse:function(b){b=s.parse(b);var c=b.words;if(1398893684==c[0]&&1701076831==c[1]){var d=j.create(c.slice(2,4));c.splice(0,4);b.sigBytes-=16}return F.create({ciphertext:b,salt:d})}},H=c.SerializableCipher=e.extend({cfg:e.extend({format:m}),encrypt:function(b,c,d,f){f=this.cfg.extend(f);var e=b.createEncryptor(d,f);c=e.finalize(c);e=e.cfg;return F.create({ciphertext:c,
key:d,iv:e.iv,algorithm:b,mode:e.mode,padding:e.padding,blockSize:b.blockSize,formatter:f.format})},decrypt:function(b,c,d,f){f=this.cfg.extend(f);c=this._parse(c,f.format);return b.createDecryptor(d,f).finalize(c.ciphertext)},_parse:function(b,c){return"string"==typeof b?c.parse(b,this):b}});d=(d.kdf={}).OpenSSL={execute:function(b,c,d,f){f||(f=j.random(8));b=r.create({keySize:c+d}).compute(b,f);d=j.create(b.words.slice(c),4*d);return b.sigBytes=4*c,F.create({key:b,iv:d,salt:f})}};var I=c.PasswordBasedCipher=
H.extend({cfg:H.cfg.extend({kdf:d}),encrypt:function(b,c,d,f){f=this.cfg.extend(f);d=f.kdf.execute(d,b.keySize,b.ivSize);f.iv=d.iv;b=H.encrypt.call(this,b,c,d.key,f);return b.mixIn(d),b},decrypt:function(b,c,d,f){f=this.cfg.extend(f);c=this._parse(c,f.format);d=f.kdf.execute(d,b.keySize,b.ivSize,c.salt);f.iv=d.iv;return H.decrypt.call(this,b,c,d.key,f)}})}b.exports=void 0;!0},function(b,c,d){c=d(5);d(12);d(13);d(14);d(15);var e=function(b,c){var d=(this._lBlock>>>b^this._rBlock)&c;this._rBlock^=d;
this._lBlock^=d<<b},j=function(b,c){var d=(this._rBlock>>>b^this._lBlock)&c;this._lBlock^=d;this._rBlock^=d<<b};d=c.lib;var q=d.WordArray;d=d.BlockCipher;var m=c.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],r=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,
21,23,25,27,28],t=[{"0":8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,
3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,
3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{"0":1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,
159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,
360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{"0":260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,
4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,
22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{"0":2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,
425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,
1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{"0":128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,
34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,
108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{"0":268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,
4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{"0":1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,
160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,
376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{"0":134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,
2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,
2147483679:134350848}],D=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],F=m.DES=d.extend({_doReset:function(){for(var b=this._key.words,c=[],d=0;56>d;d++){var f=s[d]-1;c[d]=b[f>>>5]>>>31-f%32&1}b=this._subKeys=[];for(f=0;16>f;f++){for(var e=b[f]=[],g=u[f],d=0;24>d;d++)e[d/6|0]|=c[(r[d]-1+g)%28]<<31-d%6,e[4+(d/6|0)]|=c[28+(r[d+24]-1+g)%28]<<31-d%6;e[0]=e[0]<<1|e[0]>>>31;for(d=1;7>d;d++)e[d]>>>=4*(d-1)+3;e[7]=e[7]<<5|e[7]>>>27}c=this._invSubKeys=[];for(d=0;16>d;d++)c[d]=b[15-d]},
encryptBlock:function(b,c){this._doCryptBlock(b,c,this._subKeys)},decryptBlock:function(b,c){this._doCryptBlock(b,c,this._invSubKeys)},_doCryptBlock:function(b,c,d){this._lBlock=b[c];this._rBlock=b[c+1];e.call(this,4,252645135);e.call(this,16,65535);j.call(this,2,858993459);j.call(this,8,16711935);e.call(this,1,1431655765);for(var f=0;16>f;f++){for(var g=d[f],l=this._lBlock,m=this._rBlock,q=0,r=0;8>r;r++)q|=t[r][((m^g[r])&D[r])>>>0];this._lBlock=m;this._rBlock=l^q}d=this._lBlock;this._lBlock=this._rBlock;
this._rBlock=d;e.call(this,1,1431655765);j.call(this,8,16711935);j.call(this,2,858993459);e.call(this,16,65535);e.call(this,4,252645135);b[c]=this._lBlock;b[c+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});c.DES=d._createHelper(F);m=m.TripleDES=d.extend({_doReset:function(){var b=this._key.words;this._des1=F.createEncryptor(q.create(b.slice(0,2)));this._des2=F.createEncryptor(q.create(b.slice(2,4)));this._des3=F.createEncryptor(q.create(b.slice(4,6)))},encryptBlock:function(b,c){this._des1.encryptBlock(b,
c);this._des2.decryptBlock(b,c);this._des3.encryptBlock(b,c)},decryptBlock:function(b,c){this._des3.decryptBlock(b,c);this._des2.encryptBlock(b,c);this._des1.decryptBlock(b,c)},keySize:6,ivSize:2,blockSize:2});c.TripleDES=d._createHelper(m);b.exports=c.TripleDES;!0},function(b,c,d){c=d(5);d(12);d(13);d(14);d(15);var e=function(){for(var b=this._X,c=this._C,d=0;8>d;d++)q[d]=c[d];c[0]=c[0]+1295307597+this._b|0;c[1]=c[1]+3545052371+(c[0]>>>0<q[0]>>>0?1:0)|0;c[2]=c[2]+886263092+(c[1]>>>0<q[1]>>>0?1:0)|
0;c[3]=c[3]+1295307597+(c[2]>>>0<q[2]>>>0?1:0)|0;c[4]=c[4]+3545052371+(c[3]>>>0<q[3]>>>0?1:0)|0;c[5]=c[5]+886263092+(c[4]>>>0<q[4]>>>0?1:0)|0;c[6]=c[6]+1295307597+(c[5]>>>0<q[5]>>>0?1:0)|0;c[7]=c[7]+3545052371+(c[6]>>>0<q[6]>>>0?1:0)|0;this._b=c[7]>>>0<q[7]>>>0?1:0;for(d=0;8>d;d++){var f=b[d]+c[d],e=65535&f,g=f>>>16;m[d]=((e*e>>>17)+e*g>>>15)+g*g^((4294901760&f)*f|0)+((65535&f)*f|0)}b[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0;b[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0;b[2]=m[2]+(m[1]<<16|m[1]>>>
16)+(m[0]<<16|m[0]>>>16)|0;b[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0;b[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0;b[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0;b[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0;b[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0};d=c.lib.StreamCipher;var j=[],q=[],m=[],s=c.algo.Rabbit=d.extend({_doReset:function(){for(var b=this._key.words,c=this.cfg.iv,d=0;4>d;d++)b[d]=16711935&(b[d]<<8|b[d]>>>24)|4278255360&(b[d]<<24|b[d]>>>8);for(var f=this._X=[b[0],b[3]<<16|b[2]>>>16,b[1],b[0]<<
16|b[3]>>>16,b[2],b[1]<<16|b[0]>>>16,b[3],b[2]<<16|b[1]>>>16],b=this._C=[b[2]<<16|b[2]>>>16,4294901760&b[0]|65535&b[1],b[3]<<16|b[3]>>>16,4294901760&b[1]|65535&b[2],b[0]<<16|b[0]>>>16,4294901760&b[2]|65535&b[3],b[1]<<16|b[1]>>>16,4294901760&b[3]|65535&b[0]],d=this._b=0;4>d;d++)e.call(this);for(d=0;8>d;d++)b[d]^=f[d+4&7];if(c){var d=c.words,c=d[0],d=d[1],c=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f=c>>>16|4294901760&d,g=d<<16|65535&c;b[0]^=c;
b[1]^=f;b[2]^=d;b[3]^=g;b[4]^=c;b[5]^=f;b[6]^=d;b[7]^=g;for(d=0;4>d;d++)e.call(this)}},_doProcessBlock:function(b,c){var d=this._X;e.call(this);j[0]=d[0]^d[5]>>>16^d[3]<<16;j[1]=d[2]^d[7]>>>16^d[5]<<16;j[2]=d[4]^d[1]>>>16^d[7]<<16;j[3]=d[6]^d[3]>>>16^d[1]<<16;for(d=0;4>d;d++)j[d]=16711935&(j[d]<<8|j[d]>>>24)|4278255360&(j[d]<<24|j[d]>>>8),b[c+d]^=j[d]},blockSize:4,ivSize:2});c.Rabbit=d._createHelper(s);b.exports=c.Rabbit;!0},function(b,c,d){c=d(5);d(12);d(13);d(14);d(15);var e=function(){for(var b=
this._S,c=this._i,d=this._j,f=0,e=0;4>e;e++){var c=(c+1)%256,d=(d+b[c])%256,g=b[c];b[c]=b[d];b[d]=g;f|=b[(b[c]+b[d])%256]<<24-8*e}return this._i=c,this._j=d,f};d=c.lib.StreamCipher;var j=c.algo,q=j.RC4=d.extend({_doReset:function(){for(var b=this._key,c=b.words,b=b.sigBytes,d=this._S=[],f=0;256>f;f++)d[f]=f;for(var e=f=0;256>f;f++){var g=f%b,e=(e+d[f]+(c[g>>>2]>>>24-8*(g%4)&255))%256,g=d[f];d[f]=d[e];d[e]=g}this._i=this._j=0},_doProcessBlock:function(b,c){b[c]^=e.call(this)},keySize:8,ivSize:0});
c.RC4=d._createHelper(q);j=j.RC4Drop=q.extend({cfg:q.cfg.extend({drop:192}),_doReset:function(){q._doReset.call(this);for(var b=this.cfg.drop;0<b;b--)e.call(this)}});c.RC4Drop=d._createHelper(j);b.exports=c.RC4;!0}],d=function(f){if(e[f])return e[f].exports;var g=e[f]={exports:{},id:f,loaded:!1};return b[f].call(g.exports,g,g.exports,d),g.loaded=!0,g.exports},e={};return d.m=b,d.c=e,d.p="",d(0)};"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?
define("SecureLS",[],b):"object"==typeof exports?exports.SecureLS=b():this.SecureLS=b();!0})();null!==SecureLS&&"undefined"!==typeof SecureLS&&(ig.global.SecureLS=SecureLS,ig.SecureLS=SecureLS)});ig.baked=!0;
ig.module("plugins.io.storage-manager").requires("impact.game","plugins.io.io-manager","plugins.secure-ls").defines(function(){ig.secure=new SecureLS({encodingType:"aes"});ig.Game.prototype.name="MJS-Game";ig.Game.prototype.version="1.0.0";ig.Game.prototype.sessionData={};ig.Game.prototype.hash=function(b){var c=0,d,e;if(0===b.length)return c;for(d=0;d<b.length;d++)e=b.charCodeAt(d),c=(c<<5)-c+e,c|=0;return c.toString(36)};ig.Game.prototype.initData=function(){return this.sessionData={sfx:1,bgm:1,
level:1,score:0}};ig.Game.prototype.setupStorageManager=function(){"undefined"!==typeof this.name&&"undefined"!==typeof this.version&&(this.io||(this.io=new IoManager),this.storage=this.io.storage,this.storageName=this.hash(this.name+"-v"+this.version).replace("-","s"),this.loadAll())};ig.Game.prototype.loadAll=function(){var b=ig.secure.get(this.storageName);""==b?(this.initData(),this.saveAll()):this.sessionData=JSON.parse(b)};ig.Game.prototype.saveAll=function(){ig.secure.set(this.storageName,
JSON.stringify(this.sessionData))};ig.Game.prototype.load=function(b){return this.sessionData[b]};ig.Game.prototype.save=function(b,c){this.sessionData[b]=c;this.saveAll()}});ig.baked=!0;
ig.module("plugins.addon.custom-storage").requires("impact.game","plugins.io.storage-manager").defines(function(){ig.Game.inject({loadAll:function(){var b=this.storage.get(this.storageName);if(null===b||"undefined"===typeof b)b=this.initData();else{try{var c=LZString.decompressFromUTF16(b),c=JSON.parse(atob(c))}catch(d){c=this.initData()}b=c}for(var e in b)this.sessionData[e]=b[e];this.saveAll()},saveAll:function(){var b=btoa(JSON.stringify(this.sessionData)),b=LZString.compressToUTF16(b);this.storage.set(this.storageName,
b)},load:function(b){var c=this.storage.get(this.storageName);try{var d=LZString.decompressFromUTF16(c),d=JSON.parse(atob(d))}catch(e){d=this.initData()}this.sessionData[b]=d[b];return this.sessionData[b]},save:function(b,c){var d=this.storage.get(this.storageName);try{var e=LZString.decompressFromUTF16(d),e=JSON.parse(atob(e))}catch(f){e=this.initData()}d=e;d[b]=c;d=btoa(JSON.stringify(d));d=LZString.compressToUTF16(d);this.storage.set(this.storageName,d)}})});ig.baked=!0;
ig.module("plugins.addon.random-generator").defines(function(){ig.RandomGenerator=ig.Class.extend({init:function(b){"undefined"===typeof b&&(b=[]);this.c=1;this.s2=this.s1=this.s0=0;this.sow(b)},sow:function(b){this.s0=this.hash(" ");this.s1=this.hash(this.s0);this.s2=this.hash(this.s1);this.c=1;if(b)for(var c=0;c<b.length&&null!=b[c];c++){var d=b[c];this.s0-=this.hash(d);this.s0+=~~(0>this.s0);this.s1-=this.hash(d);this.s1+=~~(0>this.s1);this.s2-=this.hash(d);this.s2+=~~(0>this.s2)}},rnd:function(){var b=
2091639*this.s0+2.3283064365386963E-10*this.c;this.c=b|0;this.s0=this.s1;this.s1=this.s2;return this.s2=b-this.c},hash:function(b){var c,d,e;e=4022871197;b=b.toString();for(d=0;d<b.length;d++)e+=b.charCodeAt(d),c=0.02519603282416938*e,e=c>>>0,c-=e,c*=e,e=c>>>0,c-=e,e+=4294967296*c;return 2.3283064365386963E-10*(e>>>0)},frac:function(){return this.rnd.apply(this)+1.1102230246251565E-16*(2097152*this.rnd.apply(this)|0)},realInRange:function(b,c){return this.frac()*(c-b)+b},integerInRange:function(b,
c){return Math.floor(this.realInRange(0,c-b+1)+b)},pick:function(b){var c=this.integerInRange(0,b.length-1);return b[c]}})});ig.baked=!0;
ig.module("plugins.addon.math-collection").defines(function(){ig.MathCollection=ig.Class.extend({DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,degToRad:function(b){return b*this.DEG_TO_RAD},radToDeg:function(b){return b*this.RAD_TO_DEG},angleBetween:function(b,c,d,e){return Math.atan2(e-c,d-b)},angleBetweenPoints:function(b,c){return this.angleBetween(b.x,b.y,c.x,c.y)},distance:function(b,c,d,e){b-=d;c-=e;return Math.sqrt(b*b+c*c)},rectContains:function(b,c,d){return 0>=b.width||0>=b.height?!1:c>=
b.x&&c<b.right&&d>=b.y&&d<b.bottom},rectIntersects:function(b,c){return 0>=b.width||0>=b.height||0>=c.width||0>=c.height?!1:!(b.right<c.x||b.bottom<c.y||b.x>c.right||b.y>c.bottom)},polygonContains:function(b,c,d){for(var e=!1,f=-1,g=b.points.length-1;++f<b.points.length;g=f){var l=b.points[f].x,p=b.points[f].y,j=b.points[g].x,g=b.points[g].y;if((p<=d&&d<g||g<=d&&d<p)&&c<(j-l)*(d-p)/(g-p)+l)e=!e}return e},circleContains:function(b,c,d){return 0<b.radius&&c>=b.left&&c<=b.right&&d>=b.top&&d<=b.bottom?
(b.x-c)*(b.x-c)+(b.y-d)*(b.y-d)<=b.radius*b.radius:!1},catmullRom:function(b,c,d,e,f){b=0.5*(d-b);e=0.5*(e-c);var g=f*f;return(2*c-2*d+b+e)*f*g+(-3*c+3*d-2*b-e)*g+b*f+c},catmullRomInterpolation:function(b,c){var d=b.length-1,e=d*c,f=Math.floor(e);return b[0]===b[d]?(0>c&&(f=Math.floor(e=d*(1+c))),this.catmullRom(b[(f-1+d)%d],b[f],b[(f+1)%d],b[(f+2)%d],e-f)):0>c?b[0]-(this.catmullRom(b[0],b[0],b[1],b[1],-e)-b[0]):1<c?b[d]-(this.catmullRom(b[d],b[d],b[d-1],b[d-1],e-d)-b[d]):this.catmullRom(b[f?f-1:
0],b[f],b[d<f+1?d:f+1],b[d<f+2?d:f+2],e-f)},factorial:function(b){if(0===b)return 1;for(var c=b;--b;)c*=b;return c},bernstein:function(b,c){return this.factorial(b)/this.factorial(c)/this.factorial(b-c)},bezierInterpolation:function(b,c){for(var d=0,e=b.length-1,f=0;f<=e;f++)d+=Math.pow(1-c,e-f)*Math.pow(c,f)*b[f]*this.bernstein(e,f);return d},linear:function(b,c,d){return(c-b)*d+b},linearInterpolation:function(b,c){var d=b.length-1,e=d*c,f=Math.floor(e);return 0>c?this.linear(b[0],b[1],e):1<c?this.linear(b[d],
b[d-1],d-e):this.linear(b[f],b[f+1>d?d:f+1],e-f)}})});ig.baked=!0;
ig.module("plugins.addon.custom-debug").defines(function(){ig.CustomDebug=ig.Class.extend({init:function(){},rect:function(b,c,d,e){var f=ig.system.context;f.save();f.globalAlpha=d;e&&(f.strokeStyle=e.strokeStyle,f.lineWidth=e.lineWidth,f.strokeRect(b.x,b.y,b.width,b.height));f.fillStyle=c;f.fillRect(b.x,b.y,b.width,b.height);f.restore()},circle:function(b,c,d,e){var f=ig.system.context;f.save();f.globalAlpha=d;f.beginPath();f.arc(b.x,b.y,b.radius,0,2*Math.PI,!1);e&&(ctx.strokeStyle=e.strokeStyle,
ctx.lineWidth=e.lineWidth,ctx.stroke());f.fillStyle=c;f.fill();f.restore()},polygon:function(b,c,d,e){if(b.points&&0!=b.points.length){var f=ig.system.context;f.save();f.globalAlpha=d;f.beginPath();d=b.points[0];f.moveTo(d.x,d.y);b=b.points;for(var g=1;g<b.length;g++)d=b[g],f.lineTo(d.x,d.y);f.closePath();e&&(f.strokeStyle=e.strokeStyle,f.lineWidth=e.lineWidth,f.stroke());f.fillStyle=c;f.fill();f.restore()}},satPolygon:function(b,c,d,e){var f=ig.system.context;f.save();f.globalAlpha=d;f.beginPath();
d=b.pointList[0];f.moveTo(d.x,d.y);b=b.pointList;for(var g=1;g<b.length;g++)d=b[g],f.lineTo(d.x,d.y);f.closePath();e&&(f.strokeStyle=e.strokeStyle,f.lineWidth=e.lineWidth,f.stroke());f.fillStyle=c;f.fill();f.restore()},satCircle:function(b,c,d,e){var f=ig.system.context;f.save();f.globalAlpha=d;f.beginPath();f.arc(b.center.x,b.center.y,b.radius,0,2*Math.PI,!1);e&&(ctx.strokeStyle=e.strokeStyle,ctx.lineWidth=e.lineWidth,ctx.stroke());f.fillStyle=c;f.fill();f.restore()},roundRect:function(b,c,d,e){var f=
ig.system.context;f.save();f.beginPath();f.moveTo(b.x+b.radius,b.y);f.lineTo(b.x+b.width-b.radius,b.y);f.quadraticCurveTo(b.x+b.width,b.y,b.x+b.width,b.y+b.radius);f.lineTo(b.x+b.width,b.y+b.height-b.radius);f.quadraticCurveTo(b.x+b.width,b.y+b.height,b.x+b.width-b.radius,b.y+b.height);f.lineTo(b.x+b.radius,b.y+b.height);f.quadraticCurveTo(b.x,b.y+b.height,b.x,b.y+b.height-b.radius);f.lineTo(b.x,b.y+b.radius);f.quadraticCurveTo(b.x,b.y,b.x+b.radius,b.y);f.closePath();f.globalAlpha=d;e&&(f.strokeStyle=
e.strokeStyle,f.lineWidth=e.lineWidth,f.stroke());f.fillStyle=c;f.fill();f.restore()},halfCircleRect:function(b,c,d,e){var f=ig.system.context;f.save();f.beginPath();var g=b.x+b.radius+b.tipRad,l=b.width-2*b.radius-2*b.tipRad;f.moveTo(g,b.y);f.lineTo(g+l,b.y);var p=b.x+b.width,j=b.y+b.height/2,q=g+l+b.tipRad,m=b.y,s=ig.game.math.angleBetween(q,m,p,j),r=q+Math.cos(s)*b.tipRad,s=m+Math.sin(s)*b.tipRad;f.quadraticCurveTo(q,m,r,s);m=b.y+b.height;s=ig.game.math.angleBetween(q,m,p,j);r=q+Math.cos(s)*b.tipRad;
s=m+Math.sin(s)*b.tipRad;f.quadraticCurveTo(p,j,r,s);f.quadraticCurveTo(q,m,g+l,b.y+b.height);p=b.y+b.height;f.lineTo(g,p);l=g-b.tipRad;m=ig.game.math.angleBetween(l,p,b.x,j);q=l+Math.cos(m)*b.tipRad;m=p+Math.sin(m)*b.tipRad;f.quadraticCurveTo(l,p,q,m);p=b.y;m=ig.game.math.angleBetween(l,p,b.x,j);q=l+Math.cos(m)*b.tipRad;m=p+Math.sin(m)*b.tipRad;f.quadraticCurveTo(b.x,j,q,m);f.quadraticCurveTo(l,p,g,b.y);f.globalAlpha=d;e&&(f.strokeStyle=e.strokeStyle,f.lineWidth=e.lineWidth,f.stroke());f.fillStyle=
c;f.fill();f.restore()}})});ig.baked=!0;ig.module("plugins.addon.add-signal").defines(function(){ig.AddSignal=ig.Class.extend({init:function(b){this.events=[];this.bindObject=b},add:function(b,c){if("function"!==typeof b)throw"Argument not a function";this.events.push(b.bind(c))},dispatch:function(){for(var b=0;b<this.events.length;b++)(0,this.events[b])(this.bindObject)}})});ig.baked=!0;
ig.module("plugins.addon.time-event").requires("plugins.addon.add-signal").defines(function(){ig.CustomTime=ig.Class.extend({init:function(){this._desiredFps=60;this.physicsElapsed=1/60;this.physicsElapsedMS=1E3*this.physicsElapsed},setTime:function(b){this._desiredFps=b;this.physicsElapsed=1/b;this.physicsElapsedMS=1E3*this.physicsElapsed},update:function(){var b=1/ig.system.tick;b!=this._desiredFps&&this.setTime(b)}});ig.TimeEvent=ig.Class.extend({events:[],add:function(b,c,d,e){b={curTime:0,duration:b,
callFunction:c,bindObject:null,isLooping:e?e:!1,loopCount:0,isPaused:!1};b.callFunction=new ig.AddSignal(b);b.callFunction.add(c,d);b.bindObject=d;this.events.push(b);return b},pauseAll:function(){for(var b=0;b<this.events.length;b++)this.events[b].isPaused=!0},resumeAll:function(){for(var b=0;b<this.events.length;b++)this.events[b].isPaused=!1},pause:function(b){b.isPaused=!0},resume:function(b){b.isPaused=!1},remove:function(b){b=this.events.indexOf(b);0>b||this.events.splice(b,1)},removeAll:function(){this.events=
[]},updateEvent:function(b){!b.isPaused&&b.curTime<b.duration&&(b.curTime+=0.001*ig.game.customTime.physicsElapsedMS,b.curTime>=b.duration&&(b.callFunction.dispatch(),b.isLooping?(b.curTime=0,b.loopCount++):this.remove(b)))},update:function(){for(var b=0;b<this.events.length;b++)this.updateEvent(this.events[b])}})});ig.baked=!0;
ig.module("plugins.addon.geometry").defines(function(){ig.Geometry=ig.Class.extend({rectangle:function(b,c,d,e){var f={};f.x=b;f.y=c;f.width=d;f.height=e;f.right=b+d;f.bottom=c+e;f.halfWidth=0.5*d;f.halfHeight=0.5*e;f.centerX=f.x+f.halfWidth;f.centerY=f.y+f.halfHeight;return f},roundRect:function(b,c,d,e,f){b=this.rectangle(b,c,d,e);b.radius=f;return b},halfCircleRect:function(b,c,d,e,f,g){b=this.rectangle(b,c,d,e);b.radius=f;b.tipRad=g;return b},circle:function(b,c,d){var e={x:0,y:0,diameter:0,radius:0,
right:0,left:0,top:0,bottom:0};e.x=b;e.y=c;e.diameter=d;e.radius=0.5*d;e.left=b-e.radius;e.right=b+e.radius;e.top=c-e.radius;e.bottom=c+e.radius;return e},polygon:function(b){var c={points:[],closed:!0};c.points=b;return c}});ig.Polygon=ig.Class.extend({points:[],closed:!0,init:function(b){this.points=b}})});ig.baked=!0;
ig.module("plugins.addon.world").defines(function(){ig.World={};ig.World.globalPos=function(b){var c=b.x,d=b.y;return b.groupParent?ig.World.parentPos(b.groupParent,c,d):{x:c,y:d}};ig.World.parentPos=function(b,c,d){c={x:c?c:0,y:d?d:0};for(d=!1;!d;)c=ig.World.countPos(b,c),b.groupParent?b=b.groupParent:d=!0;return c};ig.World.countPos=function(b,c){c.x=c.x*b.scale.x+b.x;c.y=c.y*b.scale.y+b.y;return c=ig.World.checkPointRotate(b,b._rotation,c)};ig.World.checkPointRotate=function(b,c,d){var e=b.x;b=
b.y;var f=d.x,g=d.y;d=ig.game.math.distance(e,b,f,g);f=ig.game.math.angleBetween(e,b,f,g);g={x:0,y:0};g.x=e+d*Math.cos(c+f);g.y=b+d*Math.sin(c+f);return g};ig.World.getBounds=function(b){for(var c=b[0],d=c.x,e=c.x,f=c.y,c=c.y,g=0;g<b.length;g++){var l=b[g];l.x<d&&(d=l.x);l.x>e&&(e=l.x);l.y<f&&(f=l.y);l.y>c&&(c=l.y)}return ig.game.geom.rectangle(d,f,e-d,c-f)}});ig.baked=!0;
ig.module("plugins.addon.asset-reader").requires("impact.image").defines(function(){ig.Asset={};ig.Asset.image=function(b,c,d){imgCache[b]?imgCache[b].path.img=c:imgCache[b]={path:{img:c,json:""}};b=ig.Image.cache[c];b||(b=new ig.Image(c),ig.Image.cache[c]=b);b.load(d)};ig.Asset.json=function(b,c,d){c=_SPRITESHEET[b];imgCache[b]||(imgCache[b]={path:{img:"",json:""}});ig.Asset.getJsonDataByKey(b)?console.log("json data exists"):jsonCache[b]=c;d&&d(c,b)};ig.Asset.scml=function(b,c,d){spriterCache[b]?
spriterCache[b].path=c:spriterCache[b]={path:c};b=SpriterScml.cache[c];(b?b:new SpriterScml(c)).load(d)};ig.Asset.getJsonDataByKey=function(b){var c=null;(b=jsonCache[b])&&(c=b);return c};ig.Asset.getJsonDataByImageName=function(b){var c=null,d;for(d in jsonCache){var e=jsonCache[d];e.meta.image==b&&(c=e)}return c}});ig.baked=!0;
ig.module("plugins.addon.call-asset").defines(function(){ig.CallAsset={};ig.CallAsset.checkJson=function(b){var c=[],d;for(d in jsonCache)for(var e=jsonCache[d],f=0;f<e.frames.length;f++)if(e.frames[f].filename==b){c.push(d);c.push(b);break}return c};ig.CallAsset.searchSpriteData=function(b){var c=b.split("/")[0],d=null;if(!jsonCache[c])return d;for(var c=jsonCache[c].frames,e=0;e<c.length;e++){var f=c[e];if(f.filename==b){d=f;break}}return d};ig.CallAsset.addImage=function(b,c,d,e,f){var g="";if(1<
d.split(".").length)g=d;else if(g=imgCache[d])g=g.path.img;else throw"Image is not found "+d;e=e?e:{};f=f?f:"ig.AddImage";"string"==typeof f&&(f=stringToFunction(f));return new f(b,c,g,e)};ig.CallAsset.addFrameImage=function(b,c,d,e,f){var g=ig.CallAsset.checkJson(d);if(2>g.length)throw"not a frame in image",d;if(b=ig.CallAsset.addImage(b,c,g[0],e,f))b.frameName=d,b.setFrame(),b.setProperty();return b};ig.CallAsset.addSprite=function(b,c,d,e,f){var g="";if(1<d.split(".").length)g=d;else if(g=imgCache[d])g=
g.path.img;else throw"Image is not found",d;e=e?e:{};f=f?f:EntitySprite;b=ig.game.spawnEntity(f,b,c,e);b.setProperties(g);return b};ig.CallAsset.addFrame=function(b,c,d,e,f){var g=ig.CallAsset.checkJson(d);if(2>g.length)throw"not a frame in image";if(b=ig.CallAsset.addSprite(b,c,g[0],e,f))b.frameName=d,b.setFrame(),b.setProperty();return b};ig.CallAsset.addSpriter=function(b,c,d,e,f){if(d=SpriterScml.cache[spriterCache[d].path])return e=e?e:{},f=f?f:EntitySpriterSprite,e.scml=d,ig.game.addGroup(b,
c,e,f)}});ig.baked=!0;
ig.module("plugins.addon.custom-image").defines(function(){ig.CustomImage=ig.Class.extend({x:0,y:0,children:[],groupParent:null,visible:!0,canvasPos:{x:0,y:0},setPosition:function(b,c){this.x=b;this.y=c},pos:{x:0,y:0,setTo:function(b,c){this.x=b;this.y=c}},size:{x:0,y:0},anchor:{x:0,y:0,setTo:function(b,c){this.x=b;this.y=0==c?c:c?c:this.x}},scale:{x:1,y:1,setTo:function(b,c){this.x=b;this.y=0==c?c:c?c:this.x}},_scale:{x:1,y:1,setTo:function(b,c){this.x=b*ig.system.scale;this.y=0==c?c:c?c*ig.system.scale:
this.x}},lastScale:{x:0,y:0,setTo:function(b,c){this.x=b;this.y=0==c?0:c?c:this.x}},inputEnabled:!1,frameName:"",alpha:1,currentPlay:"idle",angle:0,_angle:0,rotation:0,_rotation:0,exists:!0,alive:!0,_alive:!0,data:null,image:null,loaded:!1,width:0,height:0,init:function(b){this.path=b;if(b=ig.Image.cache[b])this.image=b,this.loaded=!0},ghostMode:function(){this._alive=!1;this.ghosting()},ghosting:function(){this.alive=!1;for(var b=0;b<this.children.length;b++)this.children[b].ghosting()},revive:function(){this._alive=
this.alive=!0;for(var b=0;b<this.children.length;b++){var c=this.children[b];c._alive&&c.revive()}},sorting:function(){for(var b=[],c=0;c<this.children.length;c++){var d=this.children[c];d&&d.exists&&b.push(d)}this.children=[];for(c=0;c<b.length;c++)this.children.push(b[c])},update:function(){this.sorting()},draw:function(b,c,d,e,f,g){if(this.loaded&&this.visible){d=d?d:0;e=e?e:0;f=f?f:this.width;g=g?g:this.height;var l=0,p=0,j=f,q=g,m=f,s=g;if(this.curFrameData){this.curFrameData.trimmed&&(l=this.curFrameData.spriteSourceSize.x,
p=this.curFrameData.spriteSourceSize.y);var m=this.curFrameData.frame.w,s=this.curFrameData.frame.h,j=l+m,r=p+s,u=0,q=0;f<j&&(u=j-f);g<r&&(q=r-g);j=m-u;q=s-q;if(0>=j||0>=q)return}b+=l;c+=p;ig.system.context.save();this.image.draw(b,c,d,e,j,q);ig.system.context.restore();ig.Image.drawCount++}}})});ig.baked=!0;
ig.module("plugins.addon.raw-image").requires("plugins.addon.custom-image").defines(function(){ig.RawImage=ig.CustomImage.extend({name:"Raw Image",sourceX:0,sourceY:0,spriteData:null,isReady:!1,frameName:"",_frameName:"",imgWidth:0,imgHeight:0,curFrameData:null,drawSize:{x:0,y:0},fullSize:{x:0,y:0},init:function(b,c){ig.merge(this,c);this.imgName="";for(var d in imgCache)imgCache[d].path.img==b&&(this.imgName=d);this.parent(b);this.checkProperties()},checkProperties:function(){var b=ig.Image.cache[this.path],
c=this.imgName.split("."),c=jsonCache[c[0]];if(b)this.width=b.width,this.height=b.height;else throw"image hasn't been loaded",this.imgName;c&&(this.spriteData=c);this.size.x=this.width;this.size.y=this.height;this.fullSize.x=this.size.x;this.fullSize.y=this.size.y;this.drawSize.x=this.width;this.drawSize.y=this.height},setFrame:function(){if(this.spriteData){if(0==this.frameName.length)this.curFrameData=null,this.sourceY=this.sourceX=0,this.width=this.image.width,this.height=this.image.height,this.size.x=
this.width,this.size.y=this.height,this.fullSize.x=this.size.x,this.fullSize.y=this.size.y,this.drawSize.x=this.size.x,this.drawSize.y=this.size.y;else{var b=ig.CallAsset.searchSpriteData(this.frameName);if(b)this.sourceX=b.frame.x,this.sourceY=b.frame.y,this.width=b.sourceSize.w,this.height=b.sourceSize.h,this.size.x=b.sourceSize.w,this.size.y=b.sourceSize.h,this.fullSize.x=this.size.x,this.fullSize.y=this.size.y,this.drawSize.x=this.size.x,this.drawSize.y=this.size.y,this.curFrameData=b;else throw"wrong frame name",
this.frameName;}this._frameName=this.frameName}else this.frameName=this._frameName},update:function(){this.parent();this._frameName!=this.frameName&&this.setFrame()}})});ig.baked=!0;
ig.module("plugins.addon.sprite-animation").requires("plugins.addon.raw-image").defines(function(){ig.SpriteAnimationSheet=ig.RawImage.extend({init:function(b,c,d,e){this.parent(d,e);this.x=b;this.y=c},draw:function(b,c){1>this.size.x||1>this.size.y?(this.checkProperties(),this.setFrame(),this.spriteParent.width=this.width,this.spriteParent.height=this.height,this.spriteParent.size.x=this.width,this.spriteParent.size.y=this.height):1>this.drawSize.x||1>this.drawSize.y||(b=!isNaN(b)?b:0,c=!isNaN(c)?
c:0,this.parent(b,c,this.sourceX,this.sourceY,this.drawSize.x,this.drawSize.y))}});ig.SpriteAnimation=ig.Class.extend({timer:null,sequence:[],frame:0,tile:0,loopCount:0,isPlaying:!1,init:function(b,c,d,e,f){this.spriteParent=f;this.sheet=b;this.pivot={x:b.width/2,y:b.height/2};this.timer=new ig.Timer;this.frameTime=c;this.sequence=d;this.stop=!!e;this.tile=this.sequence[0];this.onComplete=new ig.AddSignal(f);this.onLoop=new ig.AddSignal(f);this.onEnterFrame=new ig.AddSignal(f);this.onStart=new ig.AddSignal(f);
this.isStarting=this.isLooping=this.isComplete=!1;this.prevFrame=this.frame;this.isPaused=!1},setFrame:function(){this.sheet.frameName=this.tile;this.sheet.setFrame();this.sheet.frameName==this.tile&&(this.spriteParent.frameName=this.tile,this.spriteParent._frameName=this.spriteParent.frameName,this.spriteParent.width=this.sheet.width,this.spriteParent.height=this.sheet.height,this.spriteParent.setScale(this.spriteParent.scale.x,this.spriteParent.scale.y))},rewind:function(){this.timer.set();this.frame=
this.loopCount=0;this.tile=this.sequence[0];this.setFrame();return this},gotoFrame:function(b){this.timer.set(this.frameTime*-b-1E-4);this.update()},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},pause:function(){this.isPaused=!0},resume:function(){this.timer=new ig.Timer;this.isPaused=!1},update:function(){if(!this.isPaused){var b=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(b/this.sequence.length);this.frame=this.stop&&0<this.loopCount?
this.sequence.length-1:b%this.sequence.length;this.tile=this.sequence[this.frame];0==this.frame&&0==this.loopCount?this.isStarting||(this.isStarting=!0,this.onStart.dispatch()):this.isStarting=!1;0==this.frame&&0<this.loopCount?this.isLooping||(this.isLooping=!0,this.onLoop.dispatch()):this.isLooping&&(this.isLooping=!1);this.prevFrame!=this.frame&&(this.prevFrame=this.frame,this.setFrame(),this.onEnterFrame.dispatch());this.stop&&0<this.loopCount?this.isComplete||(this.isComplete=!0,this.isPlaying=
!1,this.onComplete.dispatch()):this.isComplete=!1}}});ig.GenerateFrameNames=function(b,c,d,e,f){void 0===e&&(e="");var g=[],l="";if(c<d)for(;c<=d;c++){l="";if("number"===typeof f){var p=c.toString();if(p.length<f)for(var j=f-p.length,q=0;q<j;q++)l+="0";l+=p}else l=c.toString();l=b+l+e;g.push(l)}else for(;c>=d;c--){if("number"===typeof f){p=c.toString();if(p.length<f){j=f-p.length;for(q=0;q<j;q++)l+="0"}l+=p}else l=c.toString();l=b+l+e;g.push(l)}return g}});ig.baked=!0;
ig.module("plugins.splash-loader").requires("impact.loader","impact.animation").defines(function(){ig.SplashLoader=ig.Loader.extend({tapToStartDivId:"tap-to-start",loadAssets:[{type:"json",name:"ingame"},{type:"json",name:"game"},{type:"json",name:"effects"}],customResources:[new ig.Image("media/graphics/backgrounds/bg-01.png"),new ig.Image("media/graphics/backgrounds/bg-02.png"),new ig.Image("media/graphics/sprites/ingame.png"),new ig.Image("media/graphics/sprites/game.png"),new ig.Image("media/graphics/sprites/effects.png")],
barBg:new ig.Image("media/graphics/loading/loading-bg.png"),barLoad:new ig.Image("media/graphics/loading/loading-bar.png"),logo:new ig.Image("media/graphics/loading/title.png"),midLogo:new ig.Image("media/graphics/loading/loading-logo.png"),init:function(b,c){this.parent(b,c);ig.apiHandler.run("MJSPreroll")},end:function(){this._endParent=this.parent;this._drawStatus=1;_SETTINGS.TapToStartAudioUnlock.Enabled?this.tapToStartDiv(function(){this._endParent();("undefined"===typeof ig.game||null==ig.game)&&
ig.system.setGame(this.gameClass)}.bind(this)):(this._endParent(),("undefined"===typeof ig.game||null==ig.game)&&ig.system.setGame(this.gameClass));this.draw()},tapToStartDiv:function(b){this.desktopCoverDIV=document.getElementById(this.tapToStartDivId);if(!this.desktopCoverDIV){this.desktopCoverDIV=document.createElement("div");this.desktopCoverDIV.id=this.tapToStartDivId;this.desktopCoverDIV.setAttribute("class","play");this.desktopCoverDIV.setAttribute("style","position: absolute; display: block; z-index: 999999; background-color: rgba(23, 32, 53, 0.7); visibility: visible; font-size: 10vmin; text-align: center; vertical-align: middle; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;");
this.desktopCoverDIV.innerHTML="<div style='color:white;background-color: rgba(255, 255, 255, 0.3); border: 2px solid #fff; font-size:20px; border-radius: 5px; position: relative; float: left; top: 50%; left: 50%; transform: translate(-50%, -50%);'><div style='padding:20px 50px; font-family: montserrat;'>"+_STRINGS.Splash.TapToStart+"</div></div>";(document.getElementById("play").parentNode||document.getElementById("ajaxbar")).appendChild(this.desktopCoverDIV);try{"undefined"!==typeof ig.sizeHandler?
"undefined"!==typeof ig.sizeHandler.coreDivsToResize&&(ig.sizeHandler.coreDivsToResize.push("#"+this.tapToStartDivId),"function"===typeof ig.sizeHandler.reorient&&ig.sizeHandler.reorient()):"undefined"!==typeof coreDivsToResize&&(coreDivsToResize.push(this.tapToStartDivId),"function"===typeof sizeHandler&&sizeHandler())}catch(c){console.log(c)}this.desktopCoverDIV.addEventListener("click",function(){ig.soundHandler.unlockWebAudio();this.setAttribute("style","visibility: hidden;");"function"===typeof b&&
b()})}},setupCustomAnimation:function(){this.animHeight=this.customAnim.height;this.animWidth=this.customAnim.width;this.customAnim=new ig.Animation(this.customAnim,0.025,[0,1,2,3,4,5,6,7])},animate:function(){ig.Timer.step();this.customAnim.update()},drawCheck:0,draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;1===this.drawCheck&&console.log("Font should be loaded before loader draw loop");2>this.drawCheck&&this.drawCheck++;ig.system.context.fillStyle="#000";ig.system.context.fillRect(0,
0,ig.system.width,ig.system.height);var b=ig.system.context;b.save();this.gw=ig.system.width;this.gh=ig.system.height;this.centerX=this.gw/2;this.centerY=this.gh/2;var c=this.gw<this.gh,d=imgCache["bg-01"],e=imgCache["bg-02"];if(d&&e){b.save();c=c?ig.Image.cache[d.path.img]:ig.Image.cache[e.path.img];d=Math.max(this.gw/c.width,this.gh/c.height);b.translate(this.centerX,this.centerY);b.scale(d,d);c.draw(-(c.width/2),-(c.height/2));b.restore();var e=this.centerX,f=0.88*this.gh;this.logo.draw(e-0.5*
this.logo.width,5);this.midLogo.draw(e-0.5*this.midLogo.width,0.55*this.gh-0.5*this.midLogo.height);c=e;d=f;0<this.barBg.width&&(c-=0.5*this.barBg.width);0<this.barBg.height&&(d-=0.5*this.barBg.height);this.barBg.draw(c,d);c=e;d=f;f=e=0;0<this.barLoad.width&&(c-=0.5*this.barLoad.width,e=this.barLoad.width*this._drawStatus);0<this.barLoad.height&&(d-=0.5*this.barLoad.height+2,f=this.barLoad.height);this.barLoad.draw(c,d,0,0,e,f);b.restore();this.drawVersion()}},drawVersion:function(){if("undefined"!==
typeof _SETTINGS.Versioning&&null!==_SETTINGS.Versioning&&_SETTINGS.Versioning.DrawVersion){var b=ig.system.context;fontSize=_SETTINGS.Versioning.FontSize;fontFamily=_SETTINGS.Versioning.FontFamily;fillStyle=_SETTINGS.Versioning.FillStyle;b.save();b.textBaseline="bottom";b.textAlign="left";b.font=fontSize+" "+fontFamily||"10px Arial";b.fillStyle=fillStyle||"#ffffff";b.fillText("v"+_SETTINGS.Versioning.Version+"+build."+_SETTINGS.Versioning.Build,10,ig.system.height-10);b.restore()}}})});
ig.baked=!0;
ig.module("plugins.addon.custom-splashloader").requires("plugins.splash-loader").defines(function(){ig.SplashLoader.inject({_unloadedAtlas:[],_unloadedCustomResources:[],isExists:!0,load:function(){ig.system.clear("#000");if(!this.resources.length&&!this.loadAssets.length&&!this.customResources.length)this.end();else{if(this.customResources.length)for(var b=0;b<this.customResources.length;b++)this._unloadedCustomResources.push(this.customResources[b].path);if(this.loadAssets.length)for(b=0;b<this.loadAssets.length;b++){var c=
this.loadAssets[b];c.loaded=!1;this._unloadedAtlas.push(c)}this.resources.length||(this.customResources.length?this.loadCustomResource():this.loadingAssets());for(b=0;b<this.resources.length;b++)this.loadResource(this.resources[b]);this._intervalId=setInterval(this.draw.bind(this),16)}},_loadCallback:function(b,c){if(c)this._unloaded.erase(b);else throw"Failed to load resource: "+b;this.status=1-(this._unloaded.length+this._unloadedAtlas.length+this._unloadedCustomResources.length)/(this.resources.length+
this.loadAssets.length+this.customResources.length);0==this._unloaded.length&&(this.customResources.length?this.loadCustomResource():this.loadAssets.length?this.loadingAssets():setTimeout(this.end.bind(this),250))},loadCustomResource:function(){for(var b=0;b<this.customResources.length;b++)this.customResources[b].load(this._loadCustomCallback.bind(this))},_loadCustomCallback:function(b,c){if(c)this.storeImgPathFromResources(b),this._unloadedCustomResources.erase(b);else throw"Failed to load resource: "+
b;this.status=1-(this._unloaded.length+this._unloadedAtlas.length+this._unloadedCustomResources.length)/(this.resources.length+this.loadAssets.length+this.customResources.length);0==this._unloadedCustomResources.length&&(this.loadAssets.length?this.loadingAssets():setTimeout(this.end.bind(this),250))},storeImgPathFromResources:function(b){for(var c=b.split("."),d="",e=0;e<c.length-1;e++)d+=c[e];d=d.split("/");d=d[d.length-1];imgCache[d]||(imgCache[d]={path:{img:"",json:""}});e=c[c.length-1];"png"==
e||"PNG"==e||"jpg"==e||"JPG"==e?imgCache[d].path.img=b:"scml"==e?spriterCache[d]?spriterCache[d].path=b:spriterCache[d]={path:b}:imgCache[d].path[c[c.length-1]]=b},loadingAssets:function(){for(var b=0;b<this.loadAssets.length;b++){var c=this.loadAssets[b],d=null;"image"==c.type?d=this.imgLoaded.bind(this):"json"==c.type?(c.path="",d=this.jsonLoaded.bind(this)):"scml"==c.type&&(d=this.spriterLoaded.bind(this));ig.Asset[c.type](c.name,c.path,d);console.log(c.type)}this.loadAssets.length||setTimeout(this.end.bind(this),
250)},spriterLoaded:function(b,c){if(c)for(var d=0;d<this._unloadedAtlas.length;d++){var e=this._unloadedAtlas[d];e.path==b&&"scml"==e.type&&(this._unloadedAtlas[d].loaded=!0)}else throw"Failed to load scml: "+b;this.checkUnloadedAtlas()},jsonLoaded:function(b,c){if(b){for(var d=0;d<this._unloadedAtlas.length;d++)b=this._unloadedAtlas[d],b.name==c&&"json"==b.type&&(this._unloadedAtlas[d].loaded=!0);console.log("Json Loaded")}else throw"Failed to load atlas: "+c;this.checkUnloadedAtlas()},imgLoaded:function(b,
c){if(c)for(var d=0;d<this._unloadedAtlas.length;d++){var e=this._unloadedAtlas[d];e.path==b&&"image"==e.type&&(this._unloadedAtlas[d].loaded=!0)}else throw"Failed to load image: "+b;this.checkUnloadedAtlas()},checkUnloadedAtlas:function(){for(var b=0,c=0;c<this._unloadedAtlas.length;c++)this._unloadedAtlas[c].loaded&&b++;this.status=1-(this._unloaded.length+(this._unloadedAtlas.length-b)+this._unloadedCustomResources.length)/(this.resources.length+this.loadAssets.length+this.customResources.length);
b==this.loadAssets.length&&setTimeout(this.end.bind(this),250)}})});ig.baked=!0;
ig.module("plugins.addon.entity-debug").defines(function(){ig.EntityDebug=ig.Class.extend({colors:{names:"#fff",velocities:"#0f0",boxes:"#f00"},drawDebugBoxes:function(){if(ig.game.entities.length){var b=ig.system.context;b.save();b.strokeStyle=this.colors.boxes;b.lineWidth=1;ig.game.getEntitiesByType(EntityGroup);for(var c=0;c<ig.game.entities.length;c++){var d=ig.game.entities[c];d instanceof EntityGroup||b.strokeRect(ig.system.getDrawPos(d.pos.x.round())-0.5,ig.system.getDrawPos(d.pos.y.round())-
0.5,d.size.x*ig.system.scale,d.size.y*ig.system.scale)}b.restore()}}})});ig.baked=!0;
ig.module("game.entities.addon.custom-entity").requires("impact.entity").defines(function(){EntityPos=ig.Class.extend({x:0,y:0,init:function(b){this.parentObj=b;this.x=b.x;this.y=b.y},setTo:function(b,c){this.x=b?b:this.x;this.y=c?c:this.y;this.parentObj.x=this.x;this.parentObj.y=this.y}});EntityCustomEntity=ig.Entity.extend({name:"Entity",exists:!0,alive:!0,_alive:!0,visible:!0,_visible:!0,zIndex:-1,isResponsive:!0,x:0,y:0,canvasPos:{x:0,y:0},setPosition:function(b,c){this.x=b?b:this.x;this.y=c?
c:this.x},children:[],groupParent:null,anchor:{x:0,y:0,setTo:function(b,c){this.x=b;this.y=0==c?0:c?c:this.x}},scale:{x:1,y:1,setTo:function(b,c){this.x=b;this.y=0==c?0:c?c:this.x}},_scale:{x:1,y:1,setTo:function(b,c){this.x=Math.abs(b)*ig.system.scale;this.y=0==c?0:c?Math.abs(c)*ig.system.scale:this.x}},inputEnabled:!1,frameName:"",alpha:1,currentPlay:"idle",width:0,height:0,angle:0,_angle:0,rotation:0,_rotation:0,isClicked:!1,lastScale:{x:0,y:0,setTo:function(b,c){this.x=b;this.y=0==c?0:c?c:this.x}},
gravityFactor:0,forseenVisible:!1,isCameraLock:!1,useCustomEntity:!0,init:function(b,c,d){this.parent(b,c,d);this.position=new EntityPos(this)},setProperty:function(){},setRotation:function(b){this._rotation=b;this.angle=this.rotation.toDeg()},setAngle:function(b){this._angle=b;this.rotation=this.angle.toRad()},getBounds:function(b,c,d,e){for(var f=0;f<this.children.length;f++){var g=this.children[f];g&&g.exists&&g.getBounds&&(g=g.getBounds(),null==b?b=g.x:g.x<b&&(b=g.x),null==c?c=g.right:g.right>
c&&(c=g.right),null==d?d=g.y:g.y<d&&(d=g.y),null==e?e=g.bottom:g.bottom>e&&(e=g.bottom))}return ig.game.geom.rectangle(b,d,c-b,e-d)},toLocal:function(b,c){return new Vector2(b-this.pos.x,c-this.pos.y)},toGlobal:function(b,c){return ig.World.parentPos(this,b,c)},updateChildren:function(){for(var b=0;b<this.children.length;b++){var c=this.children[b];c&&c.exists&&c.alive&&c.update&&c.update()}this.visible!=this._visible&&(this._visible=this.visible)},drawChildren:function(){for(var b=0;b<this.children.length;b++){var c=
this.children[b];c&&c.exists&&c.alive&&c.draw&&c.draw()}},updateOtherEntities:function(){if(!(!this instanceof ig.Entity))for(var b=ig.game.entities.indexOf(this),c=0;c<b;c++){var d=ig.game.entities[c],e=ig.game.checkedOtherEntities.indexOf(d);!d.useCustomEntity&&0>e&&(d.update(),ig.game.checkedOtherEntities.push(d))}},drawOtherEntities:function(){if(!(!this instanceof ig.Entity)){var b=ig.system.context;b.save();b.setTransform(1,0,0,1,0,0);for(var c=ig.game.entities.indexOf(this),d=0;d<c;d++){var e=
ig.game.entities[d],f=ig.game.drawedOtherEntities.indexOf(e);!e.useCustomEntity&&0>f&&(e.draw(),ig.game.drawedOtherEntities.push(e))}b.restore()}},ghostMode:function(){this._alive=!1;this.ghosting()},ghosting:function(){this.alive=!1;for(var b=0;b<this.children.length;b++)this.children[b].ghosting()},revive:function(){this._alive=this.alive=!0;for(var b=0;b<this.children.length;b++){var c=this.children[b];c._alive&&c.revive()}},sorting:function(){for(var b=[],c=0;c<this.children.length;c++){var d=
this.children[c];d&&d.exists&&b.push(d)}this.children=[];for(c=0;c<b.length;c++)this.children.push(b[c])},kill:function(){this.exists=!1;for(var b=0;b<this.children.length;b++)this.children[b].kill();ig.game.checkZIndexGroups();this.clearContext();this.parent()},clearContext:function(){var b=ig.system.context;b.save();b.clearRect(this.pos.x,this.pos.y,this.width,this.height);b.restore()}})});ig.baked=!0;
ig.module("plugins.addon.custom-animation").requires("impact.animation","plugins.addon.raw-image","plugins.addon.add-signal").defines(function(){ig.CustomAnimSheet=ig.AnimationSheet.extend({init:function(b,c,d){this.image=new ig.RawImage(b);this.width=c?c:this.image.size.x;this.height=d?d:this.image.size.y}});ig.CustomAnimation=ig.Animation.extend({init:function(b,c,d,e,f){this.parent(b,c,d,e);this.onComplete=new ig.AddSignal(f);this.onLoop=new ig.AddSignal(f);this.onEnterFrame=new ig.AddSignal(f);
this.onStart=new ig.AddSignal(f);this.isStarting=this.isLooping=this.isComplete=!1;this.prevFrame=this.frame;this.isPaused=!1},update:function(){this.isPaused||(this.parent(),this.sheet.image.update(),0==this.frame&&0==this.loopCount?this.isStarting||(this.isStarting=!0,this.onStart.dispatch()):this.isStarting=!1,0==this.frame&&0<this.loopCount?this.isLooping||(this.isLooping=!0,this.onLoop.dispatch()):this.isLooping&&(this.isLooping=!1),this.prevFrame!=this.frame&&(this.prevFrame=this.frame,this.onEnterFrame.dispatch()),
this.stop&&0<this.loopCount?this.isComplete||(this.isComplete=!0,this.onComplete.dispatch()):this.isComplete=!1)},draw:function(b,c){var d=Math.max(this.sheet.width,this.sheet.height);b>ig.system.width||c>ig.system.height||0>b+d||0>c+d||1>this.sheet.width||1>this.sheet.height||this.sheet.image.drawTile(b,c,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y)}})});ig.baked=!0;
ig.module("game.entities.addon.sprite").requires("game.entities.addon.custom-entity","plugins.addon.raw-image","plugins.addon.custom-animation","plugins.addon.sprite-animation","plugins.addon.add-signal").defines(function(){EntitySprite=EntityCustomEntity.extend({name:"Sprite",type:ig.Entity.TYPE.A,setAnimSheet:{},setAnims:{},typeSprite:0,init:function(b,c,d){this.x=b;this.y=c;this.onClick=new ig.AddSignal(this);this.onRelease=new ig.AddSignal(this);this.parent(b,c,d)},setProperties:function(b){this._frameName=
this.frameName="";this.anims={};this.currentAnim=null;this.imgName="";for(var c in imgCache)imgCache[c].path.img==b&&(this.imgName=c);this.path=b;this.animSheet=ig.CallAsset.addImage(0,0,this.imgName,{spriteParent:this},"ig.SpriteAnimationSheet");this.width=this.animSheet.width;this.height=this.animSheet.height;this.size.x=this.width;this.size.y=this.height;this.update()},addAnim:function(b,c,d,e){if(!this.animSheet)throw"No animSheet to add the animation "+b+" to.";c=new ig.SpriteAnimation(this.animSheet,
c,d,e,this);return this.anims[b]=c},playAnim:function(b){var c=this.anims[b];c&&(this.currentPlay=b,this.currentAnim=c,this.currentAnim.isPlaying=!0,this.currentAnim.rewind())},stopAnim:function(b){if(b=this.anims[b])this.currentAnim.isPlaying=!1,this.currentPlay="",this.currentAnim=null,b.rewind()},addChild:function(b){b.groupParent=this;this.children.push(b);ig.game.checkZIndexGroups();b.setProperty&&b.setProperty()},removeChild:function(b){var c=this.children.indexOf(b);this.children.splice(c,
1);b.zIndex=-1;b.groupParent=null;ig.game.checkZIndexGroups()},setScale:function(b,c){this.scale.setTo(b,c);this.lastScale.setTo(b,c);this._scale.setTo(Math.abs(b),Math.abs(c))},getBounds:function(){var b=ig.game.geom.rectangle(this.pos.x,this.pos.y,this.size.x,this.size.y);return b=this.parent(b.x,b.right,b.y,b.bottom)},setProperty:function(){var b=this.width,c=this.height,d=-(b*this.anchor.x),e=-(c*this.anchor.y),f=ig.game.screen.x,g=ig.game.screen.y;this.isCameraLock&&(g=f=0);c=ig.game.geom.rectangle(d,
e,b,c);b=[];b[0]={x:c.x,y:c.y};b[1]={x:c.right,y:c.y};b[2]={x:c.right,y:c.bottom};b[3]={x:c.x,y:c.bottom};for(c=0;c<b.length;c++)d=ig.World.parentPos(this,b[c].x,b[c].y),b[c]={x:d.x,y:d.y};b=ig.World.getBounds(b);this.pos.x=b.x-f;this.pos.y=b.y-g;ig.game.useResponsive&&this.isResponsive&&(f=ig.responsive.toAnchor(this.pos.x,this.pos.y,ig.game.anchorType),this.pos.x=f.x,this.pos.y=f.y);this.size.x=b.width;this.size.y=b.height;f=this.lastScale.y;g=this.scale.y;if(this.scale.x!=this.lastScale.x||g!=
f)this.scale.x=parseFloat(this.scale.x.toFixed(3)),this.scale.y=parseFloat(this.scale.y.toFixed(3)),this.setScale(this.scale.x,this.scale.y);(this.position.x!=this.x||this.position.y!=this.y)&&this.position.setTo(this.x,this.y);this.angle!=this._angle&&this.setAngle(this.angle);this.rotation!=this._rotation&&this.setRotation(this.rotation)},update:function(){this.updateOtherEntities();this.exists&&!(0>this.zIndex)&&(this._frameName!=this.frameName&&this.setFrame(),this.updateVel(),this.setProperty(),
this.sorting(),this.currentAnim&&this.currentAnim.update(),this.updateChildren(),this.isClicked&&(ig.input.state("click")||this.released()))},setFrame:function(){this.animSheet.frameName=this.frameName;this.animSheet.setFrame();this.animSheet.frameName==this.frameName&&(this._frameName=this.frameName,this.width=this.animSheet.width,this.height=this.animSheet.height)},draw:function(){this.drawOtherEntities();if(this.exists&&!(ig.game.addOnReady&&0>this.zIndex)&&this.visible){var b=ig.game.screen.x,
c=ig.game.screen.y;this.isCameraLock&&(c=b=0);var d=this.groupParent?ig.game.parentPos(this.groupParent):{x:0,y:0},b=d.x+this.x-b,c=d.y+this.y-c;curState();ig.game.useResponsive&&this.isResponsive&&(c=ig.responsive.toAnchor(b,c,ig.game.anchorType),b=c.x,c=c.y);var e=d=1;0>this.scale.x&&(d=-1);0>this.scale.y&&(e=-1);var f=ig.system.context;f.save();1!=this.alpha&&(ig.system.context.globalAlpha*=this.alpha);f.translate(ig.system.getDrawPos(b),ig.system.getDrawPos(c));f.rotate(this.rotation);f.scale(this._scale.x,
this._scale.y);if(0>d||0>e)f.save(),f.scale(d,e);this.animSheet.draw(-(this.width*this.anchor.x),-(this.height*this.anchor.y));f.translate(ig.system.getDrawPos(-b),ig.system.getDrawPos(-c));this.drawChildren();(0>d||0>e)&&f.restore();f.restore()}},clicked:function(){this.isClicked||(this.isClicked=!0,this.onClick.dispatch(this))},released:function(){this.isClicked&&(this.isClicked=!1,this.onRelease.dispatch(this))},updateVel:function(){this.last.x=this.x;this.last.y=this.y;this.vel.y+=ig.game.gravity*
ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var b=ig.game.collisionMap.trace(this.x,this.y,this.vel.x*ig.system.tick,this.vel.y*ig.system.tick,this.size.x,this.size.y);this.handleMovementTrace(b)},handleMovementTrace:function(b){this.standing=!1;b.collision.y&&(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:
(0<this.vel.y&&(this.standing=!0),this.vel.y=0));b.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>this.minBounceVelocity?this.vel.x*-this.bounciness:0);if(b.collision.slope){var c=b.collision.slope;if(0<this.bounciness){var d=this.vel.x*c.nx+this.vel.y*c.ny;this.vel.x=(this.vel.x-2*c.nx*d)*this.bounciness;this.vel.y=(this.vel.y-2*c.ny*d)*this.bounciness}else d=(this.vel.x*c.x+this.vel.y*c.y)/(c.x*c.x+c.y*c.y),this.vel.x=c.x*d,this.vel.y=c.y*d,c=Math.atan2(c.x,c.y),c>this.slopeStanding.min&&
c<this.slopeStanding.max&&(this.standing=!0)}this.x=b.pos.x;this.y=b.pos.y}})});ig.baked=!0;
ig.module("game.entities.addon.group").requires("game.entities.addon.custom-entity").defines(function(){EntityGroup=EntityCustomEntity.extend({name:"Group",init:function(b,c,d){this.x=b?b:0;this.y=c?c:0;this.parent(b,c,d)},add:function(b){b.groupParent=this;this.children.push(b);ig.game.checkZIndexGroups();b.setProperty&&b.setProperty();this.setLength()},remove:function(b){var c=this.children.indexOf(b);this.children.splice(c,1);b.zIndex=-1;b.groupParent=null;ig.game.checkZIndexGroups();b.setProperty&&
b.setProperty();this.setLength()},removeAll:function(){for(var b=0;b<this.children.length;b++){var c=this.children[b];c.zIndex=-1;c.groupParent=null}this.children=[];ig.game.checkZIndexGroups();this.setProperty();this.setLength()},bringToTop:function(b){var c=this.children.indexOf(b);0>c||(this.children.splice(c,1),this.children.push(b),ig.game.checkZIndexGroups())},sendToBack:function(b){var c=this.children.indexOf(b);0>c||(this.children.splice(c,1),this.children.splice(0,0,b),ig.game.checkZIndexGroups())},
getBounds:function(){return this.parent(this.pos.x,this.pos.x,this.pos.y,this.pos.y)},setProperty:function(){var b=this.groupParent?ig.World.parentPos(this.groupParent,this.x,this.y):{x:this.x,y:this.y},c=b.x,b=b.y,d=ig.game.screen.x,e=ig.game.screen.y;this.isCameraLock&&(e=d=0);this.pos.x=c-d;this.pos.y=b-e;ig.game.useResponsive&&this.isResponsive&&(c=ig.responsive.toAnchor(this.pos.x,this.pos.y,ig.game.anchorType),this.pos.x=c.x,this.pos.y=c.y);c=this.lastScale.y;b=this.scale.y;if(this.scale.x!=
this.lastScale.x||b!=c)this.scale.x=parseFloat(this.scale.x.toFixed(2)),this.scale.y=parseFloat(this.scale.y.toFixed(2)),this.setScale(this.scale.x,this.scale.y);(this.position.x!=this.x||this.position.y!=this.y)&&this.position.setTo(this.x,this.y);this.angle!=this._angle&&this.setAngle(this.angle);this.rotation!=this._rotation&&this.setRotation(this.rotation);this.anchor.setTo(0)},setScale:function(b,c){this.scale.setTo(b,c);this.lastScale.setTo(b,c);this._scale.setTo(b,c)},setLength:function(){var b=
this.getBounds();this.width=b.width;this.height=b.height;this.size.x=this.width;this.size.y=this.height},sortByYAscending:function(){for(var b=[];b.length<this.children.length;){for(var c=null,d=0;d<this.children.length;d++){var e=this.children[d];if(!(0<=b.indexOf(e)))if(c){var f=e.getBounds(),f=f.y+f.height,g=c.getBounds();f<g.y+g.height&&(c=e)}else c=e}b.push(c)}this.children=[];for(d=0;d<b.length;d++)e=b[d],this.children.push(e);ig.game.checkZIndexGroups();this.setLength()},update:function(){this.updateOtherEntities();
this.exists&&!(ig.game.addOnReady&&0>this.zIndex)&&(this.sorting(),this.updateChildren(),this.setLength(),this.setProperty())},draw:function(){this.drawOtherEntities();if(this.exists&&!(ig.game.addOnReady&&0>this.zIndex)&&this.visible){var b=ig.game.screen.x,c=ig.game.screen.y;this.isCameraLock&&(c=b=0);var d=this.groupParent?ig.game.parentPos(this.groupParent):{x:0,y:0},b=d.x+this.x-b,c=d.y+this.y-c;ig.game.useResponsive&&this.isResponsive&&(c=ig.responsive.toAnchor(b,c,ig.game.anchorType),b=c.x,
c=c.y);var e=d=1;0>this.scale.x&&(d=-1);0>this.scale.y&&(e=-1);var f=ig.system.context;f.save();1!=this.alpha&&(ig.system.context.globalAlpha*=this.alpha);f.translate(ig.system.getDrawPos(b),ig.system.getDrawPos(c));f.rotate(this.rotation);f.scale(this._scale.x,this._scale.y);if(0>d||0>e)f.save(),f.scale(d,e);f.translate(ig.system.getDrawPos(-b),ig.system.getDrawPos(-c));this.drawChildren();(0>d||0>e)&&f.restore();f.restore()}}})});ig.baked=!0;
ig.module("plugins.addon.add-image").requires("plugins.addon.raw-image").defines(function(){ig.ImagePosition=ig.Class.extend({x:0,y:0,init:function(b){this.parentObj=b;this.x=b.x;this.y=b.y},setTo:function(b,c){this.x=b?b:this.x;this.y=c?c:this.y;this.parentObj.x=this.x;this.parentObj.y=this.y}});ig.AddImage=ig.RawImage.extend({name:"Image",sourceX:0,sourceY:0,spriteData:null,isReady:!1,isResponsive:!0,isCameraLock:!1,init:function(b,c,d,e){this.parent(d,e);this.x=b;this.y=c;this.position=new ig.ImagePosition(this)},
addChild:function(b){b.groupParent=this;this.children.push(b);ig.game.checkZIndexGroups()},removeChild:function(b){var c=this.children.indexOf(b);this.children.splice(c,1);b.zIndex=-1;b.groupParent=null;ig.game.checkZIndexGroups()},setProperty:function(){var b=this.width,c=this.height,d=-(b*this.anchor.x),e=-(c*this.anchor.y),f=ig.game.screen.x,g=ig.game.screen.y;this.isCameraLock&&(g=f=0);c=ig.game.geom.rectangle(d,e,b,c);b=[];b[0]={x:c.x,y:c.y};b[1]={x:c.right,y:c.y};b[2]={x:c.right,y:c.bottom};
b[3]={x:c.x,y:c.bottom};for(c=0;c<b.length;c++)d=ig.World.parentPos(this,b[c].x,b[c].y),b[c]={x:d.x,y:d.y};b=ig.World.getBounds(b);this.pos.x=b.x-f;this.pos.y=b.y-g;ig.game.useResponsive&&this.isResponsive&&(f=ig.responsive.toAnchor(this.pos.x,this.pos.y,ig.game.anchorType),this.pos.x=f.x,this.pos.y=f.y);this.size.x=b.width;this.size.y=b.height;f=this.lastScale.y;g=this.scale.y;if(this.scale.x!=this.lastScale.x||g!=f)this.scale.x=parseFloat(this.scale.x.toFixed(3)),this.scale.y=parseFloat(this.scale.y.toFixed(3)),
this.setScale(this.scale.x,this.scale.y);(this.position.x!=this.x||this.position.y!=this.y)&&this.position.setTo(this.x,this.y);this.angle!=this._angle&&this.setAngle(this.angle);this.rotation!=this._rotation&&this.setRotation(this.rotation)},setAngle:function(b){this._angle=b;this.rotation=this.angle.toRad()},setRotation:function(b){this._rotation=b;this.angle=this.rotation.toDeg()},getBounds:function(){return ig.game.geom.rectangle(this.pos.x,this.pos.y,this.size.x,this.size.y)},updateChildren:function(){for(var b=
0;b<this.children.length;b++){var c=this.children[b];c&&c.exists&&c.alive&&c.update&&c.update()}},drawChildren:function(){for(var b=0;b<this.children.length;b++){var c=this.children[b];c&&c.exists&&c.alive&&c.draw&&c.draw()}},kill:function(){this.exists=!1;for(var b=0;b<this.children.length;b++)this.children[b].kill();ig.game.checkZIndexGroups();b=ig.system.context;b.save();b.clearRect(this.pos.x,this.pos.y,this.width,this.height);b.restore()},setScale:function(b,c){this.scale.setTo(b,c);this.lastScale.setTo(b,
c);this._scale.setTo(Math.abs(b),Math.abs(c))},update:function(){this.parent();this.setProperty();this.updateChildren()},draw:function(){if(this.exists&&this.visible&&this.alive)if(1>this.size.x||1>this.size.y)this.checkProperties(),this.setFrame();else if(!(1>this.drawSize.x||1>this.drawSize.y)){var b=this.groupParent?ig.game.parentPos(this.groupParent):{x:0,y:0},c=b.x,b=b.y,d=ig.game.screen.x,e=ig.game.screen.y;this.isCameraLock&&(e=d=0);c=c+this.x-d;b=b+this.y-e;ig.game.useResponsive&&this.isResponsive&&
(b=ig.responsive.toAnchor(c,b,ig.game.anchorType),c=b.x,b=b.y);var e=this.sourceX,d=this.sourceY,f=this.drawSize.x,g=this.drawSize.y,l=1,p=1;0>this.scale.x&&(l=-1);0>this.scale.y&&(p=-1);this.rotation.toDeg();var j=this.width*this.anchor.x,q=this.height*this.anchor.y,m=ig.system.context;m.save();1!=this.alpha&&(m.globalAlpha*=this.alpha);m.translate(ig.system.getDrawPos(c),ig.system.getDrawPos(b));m.rotate(this.rotation);m.scale(this._scale.x,this._scale.y);if(0>l||0>p)m.save(),m.scale(l,p);m.translate(ig.system.getDrawPos(-c),
ig.system.getDrawPos(-b));m.translate(ig.system.getDrawPos(c-j),ig.system.getDrawPos(b-q));this.parent(0,0,e,d,f,g,!1,!1);m.translate(ig.system.getDrawPos(-c+j),ig.system.getDrawPos(-b+q));this.drawChildren();(0>l||0>p)&&m.restore();ig.system.context.restore()}}})});ig.baked=!0;
ig.module("game.entities.addon.custom-text").requires("game.entities.addon.custom-entity","plugins.addon.add-signal").defines(function(){EntityCustomText=EntityCustomEntity.extend({name:"Text",fontType:"",fontSize:12,lineSpacing:0,fill:"#ffffff",wordWrap:!1,wordWrapWidth:0,letterSpacing:0,isJustified:!1,offsetHeight:0,offsetWidth:0,textOffsetX:0,textOffsetY:0,stroke:"black",strokeThickness:0,lines:[],miterLimit:2,textAnchor:{x:0,y:0},exists:!0,separator:" ",showText:"",align:"left",style:{enableShadow:!1,
shadowOffsetX:0,shadowOffsetY:0,shadowColor:"black",shadowBlur:0,shadowStroke:!1,shadowFill:!1},textReady:!1,gradientData:{enabled:!1,colorStopper:[],typeGradient:"linear",gradientPos:{x1:0,y1:0,x2:0,y2:0},gradient:null},init:function(b,c,d){this.x=b;this.y=c;this.parent(b,c,d);this.showText="";this.onClick=new ig.AddSignal(this);this.onRelease=new ig.AddSignal(this);this.textCanvas=ig.$new("canvas")},inputProperty:function(b,c,d){this.showText=b;this.fontSize=c;this.fontType=d;this.updateText()},
setShadow:function(b,c,d,e,f,g){void 0===b&&(b=0);void 0===c&&(c=0);void 0===d&&(d="rgba(0, 0, 0, 1)");void 0===e&&(e=0);void 0===f&&(f=!0);void 0===g&&(g=!0);this.style.shadowOffsetX=b;this.style.shadowOffsetY=c;this.style.shadowColor=d;this.style.shadowBlur=e;this.style.shadowStroke=f;this.style.shadowFill=g;this.style.enableShadow=!0;return this},checkLines:function(){var b="";try{var c=this.showText,d=c.split("\n")}catch(e){throw"text not detected";}c=this.showText;d=c.split("\n");if(this.wordWrap){var c=
this.textCanvas.getContext("2d"),f=this.fontSize+"px "+this.fontType;c.save();c.font=f;0<this.strokeThickness&&(c.strokeStyle=this.stroke,c.lineWidth=this.strokeThickness);for(f=0;f<d.length;f++){for(var g=d[f].split(this.separator),l=0,p=0;p<g.length;p++){var j=g[p],q="";0<p&&(q=this.separator);var q=q+j,m=c.measureText(q).width,l=l+(m+(q.length-1)*this.letterSpacing);l>=this.wordWrapWidth&&0<p&&(q="\n"+j,l=c.measureText(j).width);b+=q}f<d.length-1&&(b+="\n")}c.restore();return b}return c},updateText:function(){this.lines=
[];for(var b=this.checkLines().split("\n"),c=0;c<b.length;c++)this.lines.push(b[c]);this.textAnchor.x=0;switch(this.align){case "right":this.textAnchor.x=1;break;case "center":this.textAnchor.x=0.5;break;case "left":this.textAnchor.x=0}this.getDimension()},getDimension:function(){var b=this.textCanvas.getContext("2d"),c=this.fontSize+"px "+this.fontType;b.save();b.font=c;for(var c=null,d=0,e=0;e<this.lines.length;e++){for(var f=this.lines[e],g=0,l=0;l<f.length;l++)var p=b.measureText(f[l]).width,
g=g+p;g+=(f.length-1)*this.letterSpacing;c?g>c&&(c=g):c=g;f=0;e<this.lines.length-1&&(f=this.lineSpacing);d+=this.fontSize+f}b.restore();this.width=c+this.strokeThickness+this.offsetWidth;this.height=d+this.strokeThickness+this.offsetHeight;this.textCanvas.width=this.width;this.textCanvas.height=this.height},setLength:function(){var b=this._scale.x*this.width,c=this._scale.y*this.height,b=this.groupParent?ig.World.getGlobalDimension(this.groupParent,b,c):{width:b,height:c};return{x:b.width,y:b.height}},
setScale:function(b,c){this.scale.setTo(b,c);this.lastScale.setTo(b,c);this._scale.setTo(Math.abs(b),Math.abs(c))},setText:function(b){this.showText=b+""},getBounds:function(){var b=ig.game.geom.rectangle(this.pos.x,this.pos.y,this.size.x,this.size.y);return b=this.parent(b.x,b.right,b.y,b.bottom)},setProperty:function(){var b=this.width,c=this.height,c=ig.game.geom.rectangle(-(b*this.anchor.x),-(c*this.anchor.y),b,c),b=[];b[0]={x:c.x,y:c.y};b[1]={x:c.right,y:c.y};b[2]={x:c.right,y:c.bottom};b[3]=
{x:c.x,y:c.bottom};for(c=0;c<b.length;c++){var d=ig.World.parentPos(this,b[c].x,b[c].y);b[c]={x:d.x,y:d.y}}b=ig.World.getBounds(b);this.pos.x=b.x;this.pos.y=b.y;ig.game.useResponsive&&this.isResponsive&&(c=ig.responsive.toAnchor(this.pos.x,this.pos.y,ig.game.anchorType),this.pos.x=c.x,this.pos.y=c.y);this.size.x=b.width;this.size.y=b.height;b=this.lastScale.y;c=this.scale.y;if(this.scale.x!=this.lastScale.x||c!=b)this.scale.x=parseFloat(this.scale.x.toFixed(3)),this.scale.y=parseFloat(this.scale.y.toFixed(3)),
this.setScale(this.scale.x,this.scale.y);(this.position.x!=this.x||this.position.y!=this.y)&&this.position.setTo(this.x,this.y);this.angle!=this._angle&&this.setAngle(this.angle);this.rotation!=this._rotation&&this.setRotation(this.rotation)},addChild:function(b){b.groupParent=this;this.children.push(b);ig.game.checkZIndexGroups()},removeChild:function(b){var c=this.children.indexOf(b);this.children.splice(c,1);b.zIndex=-1;b.groupParent=null;ig.game.checkZIndexGroups()},checkPointer:function(){if(this.inputEnabled){var b=
ig.game.geom.rectangle(this.pos.x,this.pos.y,this.size.x,this.size.y),c=ig.game.pointer.pos;c.x>=b.x&&c.x<=b.right&&c.y>=b.y&&c.y<=b.bottom&&ig.game.pointer.check(this)}},update:function(){this.updateOtherEntities();this.exists&&!(ig.game&&ig.game.addOnReady&&0>this.zIndex)&&(this.sorting(),this.updateText(),this.setProperty(),this.updateChildren(),this.checkPointer(),this.isClicked&&(ig.input.state("click")||this.released()))},setGradient:function(b,c,d,e,f,g,l,p){this.gradientData.enabled=!0;this.gradientData.gradientPos=
{x1:b,y1:c,x2:d,y2:e,r1:l,r2:p};this.gradientData.colorStopper=f;this.gradientData.typeGradient=g?g:"linear"},draw:function(){this.drawOtherEntities();if(this.exists&&!(ig.game.addOnReady&&0>this.zIndex)&&this.visible&&Math.floor(this.size.x)&&Math.floor(this.size.y)){var b=ig.game.screen.x,c=ig.game.screen.y;this.isCameraLock&&(c=b=0);var d=this.groupParent?ig.game.parentPos(this.groupParent):{x:0,y:0},b=d.x+this.x-b,c=d.y+this.y-c;ig.game.useResponsive&&this.isResponsive&&(c=ig.responsive.toAnchor(b,
c,ig.game.anchorType),b=c.x,c=c.y);var e=d=1;0>this.scale.x&&(d=-1);0>this.scale.y&&(e=-1);var f=ig.system.context;f.save();1!=this.alpha&&(ig.system.context.globalAlpha*=this.alpha);f.translate(ig.system.getDrawPos(b),ig.system.getDrawPos(c));f.rotate(this.rotation);f.scale(this._scale.x,this._scale.y);if(0>d||0>e)f.save(),f.scale(d,e);var g=this.width*this.anchor.x,l=this.height*this.anchor.y;f.save();f.translate(-g,-l);this.drawTextContext();this.drawTextCanvas();f.restore();f.translate(ig.system.getDrawPos(-b),
ig.system.getDrawPos(-c));this.drawChildren();(0>d||0>e)&&f.restore();f.restore()}},drawTextCanvas:function(){Math.floor(this.textCanvas.width)&&Math.floor(this.textCanvas.height)&&ig.system.context.drawImage(this.textCanvas,0,0,this.textCanvas.width,this.textCanvas.height,0,0,this.textCanvas.width,this.textCanvas.height)},drawTextContext:function(){var b=this.textCanvas.getContext("2d");b.clearRect(0,0,this.textCanvas.width,this.textCanvas.height);b.save();var c=this.fontSize+"px "+this.fontType;
if(this.gradientData.enabled)for(var d=this.gradientData.gradientPos,d="linear"==this.gradientData.typeGradient?b.createLinearGradient(d.x1,d.y1,d.x2,d.y2):b.createRadialGradient(d.x1,d.y1,d.r1,d.x2,d.y2,d.r2),e=this.gradientData.colorStopper,f=0;f<e.length;f++){var g=this.gradientData.colorStopper[f];d.addColorStop(g.stopper,g.color)}else d=this.fill;b.fillStyle=d;b.textBaseline="alphabetic";b.font=c;b.textAlign="left";b.miterLimit=this.miterLimit;c=this.width*this.textAnchor.x+this.textOffsetX;
d=0+this.textOffsetY;this.style.enableShadow&&(b.save(),b.shadowOffsetX=this.style.shadowOffsetX,b.shadowOffsetY=this.style.shadowOffsetY,b.shadowColor=this.style.shadowColor,b.shadowBlur=this.style.shadowBlur);this.drawText(c,d,!0);this.style.enableShadow&&0<this.strokeThickness&&b.restore();this.drawText(c,d);this.style.enableShadow&&0>=this.strokeThickness&&b.restore();b.restore()},drawText:function(b,c,d){for(var e=this.textCanvas.getContext("2d"),f=0;f<this.lines.length;f++){var g=this.lines[f],
l=g.length,p=this.fontSize+this.lineSpacing,j=e.measureText(g).width+(l-1)*this.letterSpacing,p=c+0.8*this.fontSize+f*p,q=0;if("left"==this.align||"center"==this.align)for(var m=0;m<l;m++){var s=g[m],r=e.measureText(s).width,u=r+this.letterSpacing,r=b+q;"center"==this.align&&(r=b-j/2+q);0<this.strokeThickness&&(r+=this.strokeThickness/2);d?this.drawStroke(r,p,s):e.fillText(s,r,p);q+=u}else if("right"==this.align)for(m=l-1;0<=m;m--)s=g[m],r=e.measureText(s).width,u=r+this.letterSpacing,r=b-q-r,0<this.strokeThickness&&
(r+=this.strokeThickness/2),d?this.drawStroke(r,p,s):e.fillText(s,r,p),q+=u}},drawStroke:function(b,c,d){var e=this.textCanvas.getContext("2d");0<this.strokeThickness&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.strokeText(d,b,c))},clicked:function(){this.isClicked||(this.isClicked=!0,this.onClick.dispatch(this))},released:function(){this.isClicked&&(this.isClicked=!1,this.onRelease.dispatch(this))}})});ig.baked=!0;
ig.module("game.entities.addon.manual-draw-entity").requires("game.entities.addon.custom-entity","plugins.addon.add-signal").defines(function(){EntityManualDrawEntity=EntityCustomEntity.extend({type:ig.Entity.TYPE.A,init:function(b,c,d){this.x=b;this.y=c;this.onClick=new ig.AddSignal(this);this.onRelease=new ig.AddSignal(this);this.parent(b,c,d)},setShape:function(b,c){this.width=b;this.height=c;this.size.x=this.width;this.size.y=this.height},addChild:function(b){b.groupParent=this;this.children.push(b);
ig.game.checkZIndexGroups();b.setProperty&&b.setProperty()},removeChild:function(b){var c=this.children.indexOf(b);this.children.splice(c,1);b.zIndex=-1;b.groupParent=null;ig.game.checkZIndexGroups()},setScale:function(b,c){this.scale.setTo(b,c);this.lastScale.setTo(b,c);this._scale.setTo(Math.abs(b),Math.abs(c))},getBounds:function(){var b=ig.game.geom.rectangle(this.pos.x,this.pos.y,this.size.x,this.size.y);return b=this.parent(b.x,b.right,b.y,b.bottom)},setProperty:function(){var b=this.width,
c=this.height,d=-(b*this.anchor.x),e=-(c*this.anchor.y),f=ig.game.screen.x,g=ig.game.screen.y;this.isCameraLock&&(g=f=0);c=ig.game.geom.rectangle(d,e,b,c);b=[];b[0]={x:c.x,y:c.y};b[1]={x:c.right,y:c.y};b[2]={x:c.right,y:c.bottom};b[3]={x:c.x,y:c.bottom};for(c=0;c<b.length;c++)d=ig.World.parentPos(this,b[c].x,b[c].y),b[c]={x:d.x,y:d.y};b=ig.World.getBounds(b);this.pos.x=b.x-f;this.pos.y=b.y-g;ig.game.useResponsive&&this.isResponsive&&(f=ig.responsive.toAnchor(this.pos.x,this.pos.y,ig.game.anchorType),
this.pos.x=f.x,this.pos.y=f.y);this.size.x=b.width;this.size.y=b.height;f=this.lastScale.y;g=this.scale.y;if(this.scale.x!=this.lastScale.x||g!=f)this.scale.x=parseFloat(this.scale.x.toFixed(3)),this.scale.y=parseFloat(this.scale.y.toFixed(3)),this.setScale(this.scale.x,this.scale.y);(this.position.x!=this.x||this.position.y!=this.y)&&this.position.setTo(this.x,this.y);this.angle!=this._angle&&this.setAngle(this.angle);this.rotation!=this._rotation&&this.setRotation(this.rotation)},update:function(){this.updateOtherEntities();
this.exists&&!(0>this.zIndex)&&(this.setProperty(),this.sorting(),this.updateChildren(),this.isClicked&&(ig.input.state("click")||this.released()))},draw:function(){this.drawOtherEntities();if(this.exists&&!(ig.game.addOnReady&&0>this.zIndex)&&this.visible&&Math.floor(this.size.x)&&Math.floor(this.size.y)){var b=ig.game.screen.x,c=ig.game.screen.y;this.isCameraLock&&(c=b=0);var d=this.groupParent?ig.game.parentPos(this.groupParent):{x:0,y:0},b=d.x+this.x-b,c=d.y+this.y-c;ig.game.useResponsive&&this.isResponsive&&
(c=ig.responsive.toAnchor(b,c,ig.game.anchorType),b=c.x,c=c.y);var e=d=1;0>this.scale.x&&(d=-1);0>this.scale.y&&(e=-1);var f=ig.system.context;f.save();1!=this.alpha&&(ig.system.context.globalAlpha*=this.alpha);f.translate(ig.system.getDrawPos(b),ig.system.getDrawPos(c));f.rotate(this.rotation);f.scale(this._scale.x,this._scale.y);if(0>d||0>e)f.save(),f.scale(d,e);var g=this.width*this.anchor.x,l=this.height*this.anchor.y;f.save();f.translate(-g,-l);this.drawShape();f.restore();f.translate(ig.system.getDrawPos(-b),
ig.system.getDrawPos(-c));this.drawChildren();(0>d||0>e)&&f.restore();f.restore()}},drawShape:function(){},clicked:function(){this.isClicked||(this.isClicked=!0,this.onClick.dispatch(this))},released:function(){this.isClicked&&(this.isClicked=!1,this.onRelease.dispatch(this))}})});ig.baked=!0;
ig.module("game.entities.objects.click-btn").requires("game.entities.addon.sprite").defines(function(){EntityClickBtn=EntitySprite.extend({name:"click-btn",btnType:1,clickableLayer:null,setProperties:function(b){this.parent(b);this.onStartClick=new ig.AddSignal(this);this.onGoing=!1;this.inputEnabled=!0;this.anchor.setTo(0.5)},changePage:function(b){ig.game.changePage(b)},moreGames:function(){this.setProperty();this.div_layer_name=this.name="more-games";_SETTINGS.MoreGames.Enabled?(_SETTINGS.MoreGames.Link&&
(this.link=_SETTINGS.MoreGames.Link),_SETTINGS.MoreGames.NewWindow&&(this.newWindow=_SETTINGS.MoreGames.NewWindow),this.clickableLayer=new ClickableDivLayer(this)):this.kill()},show:function(){if(this.exists&&"more-games"==this.name){var b=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(b)}},hide:function(){if(this.exists&&"more-games"==this.name){var b=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(b)}},tweenClick:function(){csound.sfxPlay("click");
var b=0.9*this.scale.x,c=0.9*this.scale.y;(new ig.TweenDef(this.scale)).to({x:b,y:c},65).easing(ig.Tween.Easing.Bounce.EaseInOut).repeat(1).yoyo(!0).onComplete(function(){this.onGoing=!1;this.inputEnabled=!0;this.onClick.dispatch();this.released()}.bind(this)).start()},checkArea:function(){},clicked:function(){if((!ig.game.transition||!ig.game.transition.isClosed)&&!this.isClicked&&!this.onGoing)this.inputEnabled=!1,this.onGoing=this.isClicked=!0,this.onStartClick.dispatch(),this.tweenClick()},released:function(){this.isClicked&&
!this.onGoing&&(this.isClicked=!1,this.onRelease.dispatch())},update:function(){this.parent();this.clickableLayer&&this.clickableLayer.update(this.pos.x,this.pos.y,this.size.x,this.size.y)},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.buttons.button-sound").requires("game.entities.addon.sprite").defines(function(){EntityButtonSound=EntitySprite.extend({btnType:"bgm",init:function(b,c,d){this.parent(b,c,d);this.setProperties(imgCache.ingame.path.img);this.frameName="ingame/buttons/ok-btn";this.setFrame();this.btnText=ig.game.addText(0,0,"",70,fonts.font1);this.btnText.anchor.setTo(0.5);this.addChild(this.btnText);this.saveName=this.btnType+"On";this.soundName=this.btnType+"Player";this.inputEnabled=!0;this.anchor.setTo(0.5);
this.scale.setTo(0.8);this.onClick.add(this.checkSound,this);this.changeFrame()},checkSound:function(){ig.game.sessionData[this.saveName]=!ig.game.sessionData[this.saveName];ig.game.sessionData[this.saveName]?(ig.soundHandler[this.soundName].unmute(),"bgm"==this.btnType&&(ig.soundHandler.bgmPlayer.soundList.background.playing()||ig.soundHandler.bgmPlayer.play("background"))):ig.soundHandler[this.soundName].mute();this.changeFrame();ig.game.save(this.saveName,ig.game.sessionData[this.saveName])},changeFrame:function(){ig.game.sessionData[this.saveName]?
this.btnText.setText(_STRINGS.Buttons.on):this.btnText.setText(_STRINGS.Buttons.off)},clicked:function(){csound.sfxPlay("click");this.parent()},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.objects.options").requires("game.entities.addon.group","plugins.addon.add-signal","game.entities.buttons.button-sound").defines(function(){EntityOptions=EntityGroup.extend({name:"setting-group",init:function(b,c,d){this.parent(b,c,d);this.isSfxClicked=this.isBgmClicked=this.onGoing=this.isActive=!1;this.onResume=new ig.AddSignal(this);this.startResume=new ig.AddSignal(this);this.onPause=new ig.AddSignal(this);this.onStartPause=new ig.AddSignal(this);this.create()},create:function(){this.mode=
"setting";this.bg=ig.CallAsset.addFrameImage(0,0,"ingame/settings/settings");this.bg.anchor.setTo(0.5);this.bg.y+=0.5*this.bg.size.y;this.add(this.bg);this.showTitle=ig.game.addText(0,this.bg.y-0.3*this.bg.size.y,_STRINGS.Game.settings,120,fonts.font1);this.showTitle.anchor.setTo(0.5);this.showTitle.fill="#B66200";this.add(this.showTitle);this.bgmIcon=ig.CallAsset.addFrameImage(this.bg.x-0.15*this.bg.width,this.bg.y-0.14*this.bg.height,"ingame/settings/bgm-icon");this.bgmIcon.anchor.setTo(0.5);this.add(this.bgmIcon);
this.bgmBtn=ig.game.spawnEntity(EntityButtonSound,0.13*this.bg.width,this.bgmIcon.y);this.add(this.bgmBtn);this.sfxIcon=ig.CallAsset.addFrameImage(this.bgmIcon.x,this.bgmIcon.y+this.bgmBtn.height+5,"ingame/settings/sfx-icon");this.sfxIcon.anchor.setTo(0.5);this.add(this.sfxIcon);this.sfxBtn=ig.game.spawnEntity(EntityButtonSound,this.bgmBtn.x,this.sfxIcon.y,{btnType:"sfx"});this.add(this.sfxBtn);this.okBtn=ig.CallAsset.addFrame(0,this.bg.y+0.25*this.bg.size.y,"ingame/buttons/ok-btn",{},EntityClickBtn);
this.okBtn.onClick.add(function(){this.disappear()},this);this.add(this.okBtn);var b=ig.game.addText(0.01,0.01,_STRINGS.Buttons.ok,70,fonts.font1);b.anchor.setTo(0.5);b.fill="white";this.okBtn.addChild(b);this.prepare()},pauseFunction:function(){this.mode="pause";this.showTitle.setText(_STRINGS.Game.paused);var b=this.okBtn.position;this.okBtn.kill();this.okBtn=ig.CallAsset.addFrame(0,b.y,"ingame/buttons/play-small",{},EntityClickBtn);this.okBtn.onClick.add(function(){this.disappear()},this);this.okBtn.onStartClick.add(function(){this.buttonEnabled()},
this);this.add(this.okBtn);this.homeBtn=ig.CallAsset.addFrame(this.okBtn.x+0.5*this.okBtn.size.x,this.okBtn.y,"ingame/buttons/menu",{},EntityClickBtn);this.homeBtn.x+=0.7*this.homeBtn.size.x;this.homeBtn.onStartClick.add(ig.game.disableBtns,ig.game);this.homeBtn.onClick.add(function(b){b.changePage(LevelMainmenu)},this);this.add(this.homeBtn);this.replayBtn=ig.CallAsset.addFrame(this.okBtn.x-0.5*this.okBtn.size.x,this.okBtn.y,"ingame/buttons/replay",{},EntityClickBtn);this.replayBtn.x-=1.1*this.replayBtn.size.x;
this.replayBtn.onStartClick.add(ig.game.disableBtns,ig.game);this.replayBtn.onClick.add(function(b){b.changePage(LevelGameplay)},this);this.add(this.replayBtn)},prepare:function(){this.y=1.1*-this.bg.size.y;this.alpha=0;this.visible=!1;curState().greyBg.alpha=0},moreBtnSetting:function(){if(_SETTINGS.MoreGames.Enabled){var b=ig.game.director.levels.indexOf(LevelMainmenu);ig.game.director.currentLevel==b&&(this.isActive?curState().moreBtn.hide():curState().moreBtn.show())}},buttonEnabled:function(){this.okBtn.inputEnabled=
this.isActive?!0:!1},appear:function(){if(!this.onGoing){this.onStartPause.dispatch();this.visible=this.isActive=this.onGoing=!0;this.buttonEnabled();this.moreBtnSetting();var b=curState().centerY-0.5*this.bg.size.y;curState().greyBg.visible=!0;(new ig.TweenDef(curState().greyBg)).to({alpha:1},300).start();(new ig.TweenDef(this)).to({alpha:1,y:b},300).onComplete(function(){this.onGoing=!1;this.onPause.dispatch()}.bind(this)).start();"pause"==this.mode&&(curState().gamePaused=!0)}},disappear:function(){if(!this.onGoing){this.onGoing=
!0;this.isActive=!1;this.startResume.dispatch();(new ig.TweenDef(curState().greyBg)).to({alpha:0},300).start();var b=1.1*-this.bg.size.y;(new ig.TweenDef(this)).to({alpha:0,y:b},300).onComplete(function(){this.visible=this.onGoing=!1;curState().greyBg.visible=!1;"pause"==this.mode&&(curState().gamePaused=!1);this.moreBtnSetting();this.onResume.dispatch()}.bind(this)).start()}},update:function(){this.parent()}})});ig.baked=!0;
ig.module("plugins.addon.game-data").defines(function(){ig.GameData={totalStages:30,stage:6,fps:60,defaultMoves:10,defaultScore:1E3,defaultMove:10,defPieceScore:50,trialMode:!0,unlockPowerUp:[1,3,5,2],stageMaps:[[[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],[[0,0,0,1,0,0,0],[0,0,1,1,1,0,0],[0,1,1,1,1,1,0],[1,1,1,1,1,1,1],[0,1,1,1,1,1,0],[0,0,1,1,1,0,0],[0,0,0,1,0,0,0]],[[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[1,1,1,1,1,1,1],[1,1,1,1,1,1,
1],[1,1,1,1,1,1,1],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0]],[[1,1,1,1,1,1,1],[1,1,1,0,1,1,1],[1,1,0,0,0,1,1],[1,1,1,0,1,1,1],[1,1,0,0,0,1,1],[1,1,1,0,1,1,1],[1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,1,0,1,1],[1,0,0,0,0,0,1],[1,1,0,1,0,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],[[0,0,1,0,1,0,0],[0,1,1,1,1,1,0],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[0,1,1,1,1,1,0],[0,0,1,1,1,0,0],[0,0,0,1,0,0,0]]],stageMoves:[10],stageGoals:[1E3],openAllStage:function(){},openStageUntil:function(b,c){ig.game.sessionData.unlockedStages=
[];for(var d=0;d<b;d++)ig.game.sessionData.unlockedStages[d]=3;c&&ig.game.changePage(LevelStage)},nextScore:function(b){return ig.GameData.defaultScore+0.8*b*ig.GameData.defaultScore},decideGoals:function(){}}});ig.baked=!0;
ig.module("plugins.addon.transition").defines(function(){ig.Transition=ig.Class.extend({tweenTransition:null,name:"Transition",isClosed:!1,isRunning:!1,tweenTime:300,fill:"white",init:function(){},create:function(){this.alpha=1;this.isClosed=!0},update:function(){},draw:function(){var b=ig.game.geom.rectangle(0,0,ig.system.width,ig.system.height);ig.game.geomDebug.rect(b,this.fill,this.alpha)},close:function(b){!this.isRunning&&!this.isClosed&&(curState().curtainBg&&(curState().curtainBg.visible=
!0),this.isRunning=!0,this.stateIdx=b,(new ig.TweenDef(this)).to({alpha:1},this.tweenTime).onComplete(function(){this.isRunning=!1;this.isClosed=!0;ig.game.director.loadLevel(this.stateIdx)}.bind(this)).start())},open:function(){!this.isRunning&&this.isClosed&&(this.isRunning=!0,(new ig.TweenDef(this)).to({alpha:0},this.tweenTime).onComplete(function(){this.isClosed=this.isRunning=!1;curState().curtainBg&&(curState().curtainBg.visible=!1)}.bind(this)).start())}})});ig.baked=!0;
ig.module("plugins.addon.state-addon").requires("impact.game","plugins.addon.custom-storage","plugins.addon.random-generator","plugins.addon.math-collection","plugins.addon.custom-debug","plugins.addon.time-event","plugins.addon.geometry","plugins.addon.world","plugins.addon.asset-reader","plugins.addon.call-asset","plugins.addon.sprite-animation","plugins.addon.custom-splashloader","plugins.addon.entity-debug","game.entities.addon.custom-entity","plugins.addon.custom-image","plugins.addon.raw-image",
"game.entities.addon.sprite","game.entities.addon.group","plugins.addon.add-image","game.entities.addon.custom-text","game.entities.addon.manual-draw-entity","game.entities.objects.click-btn","game.entities.objects.options","plugins.addon.game-data","plugins.addon.transition").defines(function(){ig.Game.inject({groups:[],addOnReady:!1,useResponsive:!1,anchorType:"default",lastSystemSize:{x:0,y:0},pluginVersion:"1.0.12",checkedOtherEntities:[],drawedOtherEntities:[],prepareGame:function(){this.addOnReady=
!1;this.gw=ig.system.width;this.gh=ig.system.height;ig.responsive&&(this.useResponsive=!0,this.gw=ig.responsive.originalWidth,this.gh=ig.responsive.originalHeight);this.isPortrait=ig.system.width<ig.system.height;this.lastSystemSize.x=0;this.lastSystemSize.y=0;this.centerX=this.gw/2;this.centerY=this.gh/2;this.rnd=new ig.RandomGenerator([(Date.now()*Math.random()).toString()]);this.math=new ig.MathCollection;this.customTime=new ig.CustomTime;this.transition=new ig.Transition;this.transition.create();
this.geomDebug=new ig.CustomDebug;this.geom=new ig.Geometry;this.entityDebug=new ig.EntityDebug},loadLevel:function(b){ig.game.addOnReady=!1;this.parent(b)},disableBtns:function(){for(var b=0;b<ig.game.entities.length;b++)ig.game.entities[b].inputEnabled=!1;_SETTINGS.MoreGames.Enabled&&curState().moreBtn&&curState().moreBtn.exists&&curState().moreBtn.hide()},updateGroups:function(){for(var b=0;b<this.groups.length;b++)this.groups[b].update()},drawGroups:function(){for(var b=0;b<this.groups.length;b++)this.groups[b].draw()},
update:function(){if(ig.game.addOnReady){this._levelToLoad&&(this.loadLevel(this._levelToLoad),this._levelToLoad=null);this.customTime&&this.customTime.update();this.checkedOtherEntities=[];this.updateGroups();for(var b=0;b<this.entities.length;b++){var c=this.entities[b],d=this.checkedOtherEntities.indexOf(c);!c.useCustomEntity&&0>d&&(c.update(),this.checkedOtherEntities.push(c))}this.transition&&this.transition.update();this.checkEntities();for(c=0;c<this._deferredKill.length;c++)this._deferredKill[c].erase(),
this.entities.erase(this._deferredKill[c]);this._deferredKill=[];if(this._doSortEntities||this.autoSort)this.sortEntities(),this._doSortEntities=!1;for(var e in this.backgroundAnims)for(b in c=this.backgroundAnims[e],c)c[b].update()}else this.parent();if(this.useResponsive&&(this.lastSystemSize.x!=ig.system.width||this.lastSystemSize.y!=ig.system.height)){this.isPortrait=ig.system.width<ig.system.height;this.lastSystemSize.x=ig.system.width;this.lastSystemSize.y=ig.system.height;for(b=0;b<this.entities.length;b++)e=
this.entities[b],"function"==typeof e.updateOnOrientationChange&&e.updateOnOrientationChange()}},draw:function(){if(ig.game.addOnReady){this.clearColor&&ig.system.clear(this.clearColor);this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var b;for(b=0;b<this.backgroundMaps.length;b++){var c=this.backgroundMaps[b];if(c.foreground)break;c.setScreenPos(this.screen.x,this.screen.y);c.draw()}this.drawedOtherEntities=[];
this.drawGroups();for(c=0;c<this.entities.length;c++){var d=this.entities[c],e=this.drawedOtherEntities.indexOf(d);!d.useCustomEntity&&0>e&&(d.draw(),this.drawedOtherEntities.push(d))}this.transition&&this.transition.draw();ig.Entity._debugEnableChecks&&ig.Entity._debugShowBoxes&&this.entityDebug.drawDebugBoxes();for(b;b<this.backgroundMaps.length;b++)c=this.backgroundMaps[b],c.setScreenPos(this.screen.x,this.screen.y),c.draw()}else this.parent()},parentPos:function(b){for(var c={x:0,y:0},d=!1;!d;)c=
this.countPos(b,c),b.groupParent?b=b.groupParent:d=!0;return c},countPos:function(b,c){c.x+=b.x;c.y+=b.y;return c},checkVisibility:function(b){var c=!0;if(b.visible)for(var d=!1;!d;)b.groupParent?(b=b.groupParent,b.visible||b.forseenVisible||(c=!1)):d=!0;else b.forseenVisible||(c=!1);return c},checkZIndexGroups:function(){for(var b=this.tempZIndex=0;b<this.groups.length;b++){var c=this.groups[b];c.zIndex=this.tempZIndex;this.tempZIndex++;c.children&&0<c.children.length&&this.checkZIndexChildren(c)}this.sortEntitiesDeferred()},
checkZIndexChildren:function(b){b=b.children;for(var c=0;c<b.length;c++){var d=b[c];d.zIndex=this.tempZIndex;this.tempZIndex++;d.children&&0<d.children.length&&this.checkZIndexChildren(d)}},generateFrameNames:function(b,c,d){d=d?d:[];for(var e=[];b<=c;b++)0<=d.indexOf(b)||e.push(b);return e},addGroup:function(b,c,d,e){e=e?e:EntityGroup;return ig.game.spawnEntity(e,b,c,d)},addText:function(b,c,d,e,f,g,l){l=l?l:EntityCustomText;b=ig.game.spawnEntity(l,b,c,g);b.inputProperty(d,e,f);return b},changePage:function(b){ig.game.disableBtns();
var c=isNaN(b)?ig.game.director.levels.indexOf(b):b;this.transition?ig.game.transition.close(c):ig.game.director.jumpTo(b)},decideHHMMSS:function(b){b=this.countSec(b);var c=parseInt(b/3600),d=b-3600*c;b=parseInt(d/60);var d=parseInt(d-60*b),e=c+"";10>c&&(e="0"+c);c=b+"";10>b&&(c="0"+b);b=d+"";10>d&&(b="0"+d);return{h:e,m:c,s:b}},countMin:function(b){b=this.countSec(b);var c=parseInt(b/60);b=parseInt(b-60*c);var d=c+"";10>c&&(d="0"+c);c=b+"";10>b&&(c="0"+b);return d+":"+c},countSec:function(b){var c=
Math.floor(b),d=c;0<c?0<b%c&&(d=c+1):d=b>c?d+1:0;return d},writeThousands:function(b){var c=b+"";if(1E3<=b){b=0;for(var d=c,c="",e=d.length-1;0<=e;e--){var f=d[e];0==b%3&&e<d.length-1&&(f+=",",b=0);c=f+c;b++}}return c},upperCase:function(b){return b[0].toUpperCase()+b.slice(1)}})});
var fontReady=!1,fonts={font1:"rager"},_t=function(b){for(var c=b,d=1;d<arguments.length;d++)for(var e=!1;!e;){var f=c.replace("%"+d,arguments[d]);f!=c?c=f:e=!0}return c},curState=function(){return ig.game.controller},csound={sfxPlay:function(b){try{return ig.soundHandler.sfxPlayer.play(b)}catch(c){}},sfxStop:function(b){return ig.soundHandler.sfxPlayer.soundList[b].stop()},sfxIsPlaying:function(b){return ig.soundHandler.sfxPlayer.soundList[b].playing()},sfxVol:function(b,c){ig.soundHandler.sfxPlayer.soundList[b].volume(c)}},
stringToFunction=function(b){b=b.split(".");for(var c=window||this,d=0,e=b.length;d<e;d++)c=c[b[d]];if("function"!==typeof c)throw Error("function not found");return c},jsonCache={},imgCache={},spriterCache={},hiddenCanvases={},passSplash=!1,LZString=function(){function b(b,c){if(!d[b]){d[b]={};for(var e=0;e<b.length;e++)d[b][b.charAt(e)]=e}return d[b][c]}var c=String.fromCharCode,d={},e={compressToBase64:function(b){if(null==b)return"";b=e._compress(b,6,function(b){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)});
switch(b.length%4){default:case 0:return b;case 1:return b+"===";case 2:return b+"==";case 3:return b+"="}},decompressFromBase64:function(c){return null==c?"":""==c?null:e._decompress(c.length,32,function(d){return b("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c.charAt(d))})},compressToUTF16:function(b){return null==b?"":e._compress(b,15,function(b){return c(b+32)})+" "},decompressFromUTF16:function(b){return null==b?"":""==b?null:e._decompress(b.length,16384,function(c){return b.charCodeAt(c)-
32})},compressToUint8Array:function(b){b=e.compress(b);for(var c=new Uint8Array(2*b.length),d=0,p=b.length;p>d;d++){var j=b.charCodeAt(d);c[2*d]=j>>>8;c[2*d+1]=j%256}return c},decompressFromUint8Array:function(b){if(null===b||void 0===b)return e.decompress(b);for(var d=Array(b.length/2),l=0,p=d.length;p>l;l++)d[l]=256*b[2*l]+b[2*l+1];var j=[];return d.forEach(function(b){j.push(c(b))}),e.decompress(j.join(""))},compressToEncodedURIComponent:function(b){return null==b?"":e._compress(b,6,function(b){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$".charAt(b)})},
decompressFromEncodedURIComponent:function(c){return null==c?"":""==c?null:(c=c.replace(/ /g,"+"),e._decompress(c.length,32,function(d){return b("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",c.charAt(d))}))},compress:function(b){return e._compress(b,16,function(b){return c(b)})},_compress:function(b,c,d){if(null==b)return"";var e,j,q,m={},s={},r="",u="",t="",D=2,F=3,H=2,I=[],v=0,G=0;for(q=0;q<b.length;q+=1)if(r=b.charAt(q),Object.prototype.hasOwnProperty.call(m,r)||(m[r]=F++,
s[r]=!0),u=t+r,Object.prototype.hasOwnProperty.call(m,u))t=u;else{if(Object.prototype.hasOwnProperty.call(s,t)){if(256>t.charCodeAt(0)){for(e=0;H>e;e++)v<<=1,G==c-1?(G=0,I.push(d(v)),v=0):G++;j=t.charCodeAt(0);for(e=0;8>e;e++)v=v<<1|1&j,G==c-1?(G=0,I.push(d(v)),v=0):G++,j>>=1}else{j=1;for(e=0;H>e;e++)v=v<<1|j,G==c-1?(G=0,I.push(d(v)),v=0):G++,j=0;j=t.charCodeAt(0);for(e=0;16>e;e++)v=v<<1|1&j,G==c-1?(G=0,I.push(d(v)),v=0):G++,j>>=1}D--;0==D&&(D=Math.pow(2,H),H++);delete s[t]}else{j=m[t];for(e=0;H>
e;e++)v=v<<1|1&j,G==c-1?(G=0,I.push(d(v)),v=0):G++,j>>=1}D--;0==D&&(D=Math.pow(2,H),H++);m[u]=F++;t=String(r)}if(""!==t){if(Object.prototype.hasOwnProperty.call(s,t)){if(256>t.charCodeAt(0)){for(e=0;H>e;e++)v<<=1,G==c-1?(G=0,I.push(d(v)),v=0):G++;j=t.charCodeAt(0);for(e=0;8>e;e++)v=v<<1|1&j,G==c-1?(G=0,I.push(d(v)),v=0):G++,j>>=1}else{j=1;for(e=0;H>e;e++)v=v<<1|j,G==c-1?(G=0,I.push(d(v)),v=0):G++,j=0;j=t.charCodeAt(0);for(e=0;16>e;e++)v=v<<1|1&j,G==c-1?(G=0,I.push(d(v)),v=0):G++,j>>=1}D--;0==D&&(D=
Math.pow(2,H),H++);delete s[t]}else{j=m[t];for(e=0;H>e;e++)v=v<<1|1&j,G==c-1?(G=0,I.push(d(v)),v=0):G++,j>>=1}D--;0==D&&(Math.pow(2,H),H++)}j=2;for(e=0;H>e;e++)v=v<<1|1&j,G==c-1?(G=0,I.push(d(v)),v=0):G++,j>>=1;for(;;){if(v<<=1,G==c-1){I.push(d(v));break}G++}return I.join("")},decompress:function(b){return null==b?"":""==b?null:e._decompress(b.length,32768,function(c){return b.charCodeAt(c)})},_decompress:function(b,d,e){var p,j,q,m,s,r,u=[],t=4,D=4,F=3;j="";var H=[],I=e(0),v=d,G=1;for(p=0;3>p;p+=
1)u[p]=p;j=0;m=Math.pow(2,2);for(s=1;s!=m;)q=I&v,v>>=1,0==v&&(v=d,I=e(G++)),j|=(0<q?1:0)*s,s<<=1;switch(j){case 0:j=0;m=Math.pow(2,8);for(s=1;s!=m;)q=I&v,v>>=1,0==v&&(v=d,I=e(G++)),j|=(0<q?1:0)*s,s<<=1;r=c(j);break;case 1:j=0;m=Math.pow(2,16);for(s=1;s!=m;)q=I&v,v>>=1,0==v&&(v=d,I=e(G++)),j|=(0<q?1:0)*s,s<<=1;r=c(j);break;case 2:return""}p=u[3]=r;for(H.push(r);;){if(G>b)return"";j=0;m=Math.pow(2,F);for(s=1;s!=m;)q=I&v,v>>=1,0==v&&(v=d,I=e(G++)),j|=(0<q?1:0)*s,s<<=1;switch(r=j){case 0:j=0;m=Math.pow(2,
8);for(s=1;s!=m;)q=I&v,v>>=1,0==v&&(v=d,I=e(G++)),j|=(0<q?1:0)*s,s<<=1;u[D++]=c(j);r=D-1;t--;break;case 1:j=0;m=Math.pow(2,16);for(s=1;s!=m;)q=I&v,v>>=1,0==v&&(v=d,I=e(G++)),j|=(0<q?1:0)*s,s<<=1;u[D++]=c(j);r=D-1;t--;break;case 2:return H.join("")}if(0==t&&(t=Math.pow(2,F),F++),u[r])j=u[r];else{if(r!==D)return null;j=p+p.charAt(0)}H.push(j);u[D++]=p+j.charAt(0);t--;p=j;0==t&&(t=Math.pow(2,F),F++)}}};return e}();
"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString);ig.baked=!0;
ig.module("plugins.packer.packer-image-injector").requires("impact.image","impact.animation").defines(function(){ig.Image.inject({tintCache:{},load:function(b){ig.packer&&ig.packer.isImageInAtlas(this.path)?(this.frameData=ig.packer.getFrameData(this.path),this.width=this.frameData.frame.w,this.height=this.frameData.frame.h,this.loaded=ig.packer.isImageLoadedForPath(this.path),b&&b(this.path,!0)):this.parent(b)},reload:function(){ig.packer.isImageInAtlas(this.path)||this.parent()},resize:function(b){ig.packer.isImageInAtlas(this.path)?
console.warn("PACKER PLUGIN WARNING! : image.scale is not supported, \nImage path:"+this.path):this.parent(b)},draw:function(b,c,d,e,f,g,l,p){if(ig.packer.isImageInAtlas(this.path)){if(!this.atlasImage&&(this.atlasImage=ig.packer.getAtlasImage(this.path),this.frameData=ig.packer.getFrameData(this.path),this.width=this.frameData.frame.w,this.height=this.frameData.frame.h,!this.atlasImage))return;f=f?f:this.width;g=g?g:this.height;ig.system.context.drawImage(this.atlasImage,(d?d:0)+this.frameData.frame.x,
(e?e:0)+this.frameData.frame.y,f,g,ig.system.getDrawPos(b),ig.system.getDrawPos(c),l?l:f,p?p:g)}else d=d?d:0,e=e?e:0,f=f?f:this.width,g=g?g:this.height,l=l?l:f,p=p?p:g,ig.system.context.drawImage(this.data,d,e,f,g,ig.system.getDrawPos(b),ig.system.getDrawPos(c),l,p);ig.Image.drawCount++},drawImage:function(b,c,d,e,f,g,l,p){b=b?b:0;c=c?c:0;2>=arguments.length?this.draw(b,c):4>=arguments.length?(d=d?d:this.width,e=e?e:this.height,this.draw(b,c,0,0,this.width,this.height,d,e)):(d=d?d:this.width,e=e?
e:this.height,l=l?l:this.width,p=p?p:this.height,this.draw(f?f:0,g?g:0,b,c,d,e,l,p))},drawCtx:function(b,c,d,e,f,g,l,p,j){if(ig.packer.isImageInAtlas(this.path)){if(!this.atlasImage&&(this.atlasImage=ig.packer.getAtlasImage(this.path),this.frameData=ig.packer.getFrameData(this.path),this.width=this.frameData.frame.w,this.height=this.frameData.frame.h,!this.atlasImage))return;g=g?g:this.width;l=l?l:this.height;b.drawImage(this.atlasImage,(e?e:0)+this.frameData.frame.x,(f?f:0)+this.frameData.frame.y,
g,l,ig.system.getDrawPos(c),ig.system.getDrawPos(d),p?p:g,j?j:l)}else e=e?e:0,f=f?f:0,g=g?g:this.width,l=l?l:this.height,p=p?p:g,j=j?j:l,b.drawImage(this.data,e,f,g,l,ig.system.getDrawPos(c),ig.system.getDrawPos(d),p,j);ig.Image.drawCount++},drawImageCtx:function(b,c,d,e,f,g,l,p,j){c=c?c:0;d=d?d:0;2>=arguments.length?this.drawCtx(b,c,d):5>=arguments.length?(e=e?e:this.width,f=f?f:this.height,this.drawCtx(b,c,d,0,0,this.width,this.height,e,f)):(e=e?e:this.width,f=f?f:this.height,p=p?p:this.width,j=
j?j:this.height,this.drawCtx(b,g?g:0,l?l:0,c,d,e,f,p,j))},drawTile:function(b,c,d,e,f,g,l){if(ig.packer.isImageInAtlas(this.path)){if(!this.atlasImage&&(this.atlasImage=ig.packer.getAtlasImage(this.path),this.frameData=ig.packer.getFrameData(this.path),this.width=this.frameData.frame.w,this.height=this.frameData.frame.h,!this.atlasImage))return;f=f?f:e;var p=Math.floor(e),j=Math.floor(f),q=g?-1:1,m=l?-1:1;if(g||l)ig.system.context.save(),ig.system.context.scale(q,m);ig.system.context.drawImage(this.atlasImage,
Math.floor(d*e)%this.width+this.frameData.frame.x,Math.floor(d*e/this.width)*f+this.frameData.frame.y,p,j,ig.system.getDrawPos(b)*q-(g?p:0),ig.system.getDrawPos(c)*m-(l?j:0),p,j);(g||l)&&ig.system.context.restore();ig.Image.drawCount++}else this.parent(b,c,d,e,f,g,l)},drawTileTint:function(b,c,d,e,f,g,l,p){if(b=this.getTintedImageCanvas(b))if(g=g?g:f,this.loaded&&!(f>this.width||g>this.height)){var j=ig.system.scale,q=Math.floor(f*j),m=Math.floor(g*j),s=l?-1:1,r=p?-1:1;if(l||p)ig.system.context.save(),
ig.system.context.scale(s,r);ig.system.context.drawImage(b,Math.floor(e*f)%this.width*j,Math.floor(e*f/this.width)*g*j,q,m,ig.system.getDrawPos(c)*s-(l?q:0),ig.system.getDrawPos(d)*r-(p?m:0),q,m);(l||p)&&ig.system.context.restore();ig.Image.drawCount++}},drawTint:function(b,c,d,e,f,g,l,p,j){if(b=this.getTintedImageCanvas(b))g=g?g:this.width,l=l?l:this.height,ig.system.context.drawImage(b,e?e:0,f?f:0,g,l,ig.system.getDrawPos(c),ig.system.getDrawPos(d),p?p:g,j?j:l),ig.Image.drawCount++},getTintedImageCanvas:function(b){if(!this.tintCache[b]){if(ig.packer.isImageInAtlas(this.path)&&
!this.atlasImage&&(this.atlasImage=ig.packer.getAtlasImage(this.path),this.frameData=ig.packer.getFrameData(this.path),this.width=this.frameData.frame.w,this.height=this.frameData.frame.h,!this.atlasImage))return;var c=ig.$new("canvas");c.width=this.width;c.height=this.height;this.atlasImage?c.getContext("2d").drawImage(this.atlasImage,this.frameData.frame.x,this.frameData.frame.y,this.width,this.height,0,0,this.width,this.height):c.getContext("2d").drawImage(this.data,0,0,this.width,this.height,
0,0,this.width,this.height);for(var d=c.getContext("2d"),e=d.getImageData(0,0,this.width,this.height),f=e.data,g,l=f.length,p,j,q,m,s=parseInt(b.substr(1,2),16)/255,r=parseInt(b.substr(3,2),16)/255,u=parseInt(b.substr(5,2),16)/255,t=0;t<l;t+=4)g=f[t+3]/255,m=g+1-1*g,p=f[t]/255*g,j=f[t+1]/255*g,q=f[t+2]/255*g,m=255/m,f[t]=(p*s+s*(1-g))*m,f[t+1]=(j*r+r*(1-g))*m,f[t+2]=(q*u+u*(1-g))*m;d.putImageData(e,0,0);this.tintCache[b]=c}return this.tintCache[b]}})});ig.baked=!0;
ig.module("plugins.packer.packer-animation-injector").requires("impact.image","impact.animation").defines(function(){ig.Animation.inject({tint:null,draw:function(b,c){if(this.tint){var d=Math.max(this.sheet.width,this.sheet.height);b>ig.system.width||(c>ig.system.height||0>b+d||0>c+d)||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTileTint(this.tint,b,c,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(b+
this.pivot.x),ig.system.getDrawPos(c+this.pivot.y)),ig.system.context.rotate(this.angle),this.sheet.image.drawTileTint(this.tint,-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}else this.parent(b,c)}})});ig.baked=!0;
ig.module("plugins.packer.packer-plugin").requires("plugins.packer.packer-image-injector","plugins.packer.packer-animation-injector").defines(function(){ig.AtlasImage=ig.Class.extend({init:function(b){this.path=b},load:function(b){this.loadCallback=b||null;this.data=new Image;this.data.onload=this.onload.bind(this);this.data.onerror=this.onerror.bind(this);this.data.src=ig.prefix+this.path+ig.nocache},onload:function(){this.loaded=!0;ig.packer.refreshImageLoadedStatus();this.loadCallback&&this.loadCallback(this.path,
!0)},onerror:function(){this.error=!0;this.loadCallback&&this.loadCallback(this.path,!1)}});ig.packer={textureJson:[],textureAtlas:[],jsonLoadStatus:[],atlasLoadStatus:[],textureExistStatus:[],pathMap:{},initCallback:null,initPacker:function(b){if(window.packerplugin&&0<packerplugin.textures.length){console.log("Packer Plugin 1.1.6 is enabled, loading "+packerplugin.textures.length+" texture atlases...");ig.packer.initCallback=b;for(b=0;b<packerplugin.textures.length;b++)this.textureExistStatus.push(1);
this.loadAllJson()}else console.log("Packer Plugin 1.1.6 is disabled, loading individual images..."),b()},loadAllJson:function(){for(var b=0;b<ig.packer.textureExistStatus.length;b++)1==ig.packer.textureExistStatus[b]&&(ig.packer.textureJson.push(null),ig.packer.textureAtlas.push(null),ig.packer.jsonLoadStatus.push(1),ig.packer.atlasLoadStatus.push(0),ig.packer.textureJson[b]=JSON.parse(window.packerplugin.json[packerplugin.textures[b]]));ig.packer.onLoadJsonComplete()},onLoadJsonComplete:function(){for(var b=
0;b<ig.packer.textureJson.length;b++){var c=ig.packer.textureJson[b],d;for(d in c.frames)ig.packer.pathMap[d]={path:d,textureIndex:b};c="media/graphics/packed/"+packerplugin.textures[b]+".png";0<=packerplugin.textures[b].indexOf("big-jpg")&&(c="media/graphics/packed/"+packerplugin.textures[b]+".jpg");c=new ig.AtlasImage(c);ig.packer.textureAtlas[b]=c;ig.addResource(c)}ig.packer.initCallback()},isImageInAtlas:function(b){return Object.hasOwnProperty.call(ig.packer.pathMap,b)?!0:!1},refreshImageLoadedStatus:function(){for(var b in ig.Image.cache)if(Object.hasOwnProperty.call(ig.Image.cache,
b)){var c=ig.Image.cache[b];ig.packer.isImageInAtlas(c.path)&&(c.loaded=ig.packer.isImageLoadedForPath(c.path))}},isImageLoadedForPath:function(b){return ig.packer.textureAtlas[ig.packer.pathMap[b].textureIndex].loaded?!0:!1},getAtlasImage:function(b){b=ig.packer.pathMap[b].textureIndex;return!ig.packer.textureAtlas[b].loaded?null:ig.packer.textureAtlas[b].data},getFrameData:function(b){return ig.packer.textureJson[ig.packer.pathMap[b].textureIndex].frames[b]}}});ig.baked=!0;
ig.module("plugins.patches.fps-limit-patch").requires("impact.system","impact.impact").defines(function(){ig.System.inject({fps:60});ig.system&&(ig.system.fps=60);ig.normalizeVendorAttribute(window,"requestAnimationFrame");if(window.requestAnimationFrame){var b=1,c={};window.ig.setAnimation=function(d,e){var f=b++;c[f]=!0;var g=1E3/60,l=60,p=0,j=0,q=0,m=0,s=function(){c[f]&&(timestamp=Date.now(),j=p,p=timestamp,m=p-j,l=0.8*l+0.2*(1E3/m),60<l&&63<=l?(q=Math.min(Math.max(2*g+j-timestamp,0),g),setTimeout(function(){window.requestAnimationFrame(s,
e)},q),d(timestamp)):(window.requestAnimationFrame(s,e),d()))};window.requestAnimationFrame(s,e);return f};window.ig.clearAnimation=function(b){delete c[b]}}else window.ig.setAnimation=function(b){return window.setInterval(b,1E3/60)},window.ig.clearAnimation=function(b){window.clearInterval(b)}});ig.baked=!0;
ig.module("plugins.patches.timer-patch").requires("impact.timer").defines(function(){ig.Timer.step=function(){var b=Date.now(),c=(b-ig.Timer._last)/1E3;0>c&&(c=0);ig.Timer.time+=Math.min(c,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=b}});ig.baked=!0;
ig.module("plugins.patches.user-agent-patch").requires("impact.impact").defines(function(){ig.ua.is_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);ig.ua.is_safari_or_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);ig.ua.iOS6_tag=/OS 6_/i.test(navigator.userAgent);ig.ua.iOS6=(ig.ua.iPhone||ig.ua.iPad)&&ig.ua.iOS6_tag;ig.ua.iOSgt5=ig.ua.iOS&&5<parseInt(navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1]);ig.ua.HTCONE=/HTC_One/i.test(navigator.userAgent);
ig.ua.Kindle=/Silk/i.test(navigator.userAgent);ig.ua.touchDevice="ontouchstart"in window||window.navigator.msMaxTouchPoints||window.navigator.maxTouchPoints;ig.ua.is_mac="MacIntel"===navigator.platform;ig.ua.iOS=ig.ua.touchDevice&&ig.ua.is_mac||ig.ua.iOS;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.iOS6||ig.ua.winPhone||ig.ua.Kindle||/mobile/i.test(navigator.userAgent)});ig.baked=!0;
ig.module("plugins.patches.webkit-image-smoothing-patch").defines(function(){ig.System&&(ig.System.SCALE={CRISP:function(b,c){c.imageSmoothingEnabled=c.msImageSmoothingEnabled=c.mozImageSmoothingEnabled=c.oImageSmoothingEnabled=!1;b.style.imageRendering="-moz-crisp-edges";b.style.imageRendering="-o-crisp-edges";b.style.imageRendering="-webkit-optimize-contrast";b.style.imageRendering="crisp-edges";b.style.msInterpolationMode="nearest-neighbor"},SMOOTH:function(b,c){c.imageSmoothingEnabled=c.msImageSmoothingEnabled=
c.oImageSmoothingEnabled=!0;b.style.imageRendering="";b.style.msInterpolationMode=""}},ig.System.scaleMode=ig.System.SCALE.SMOOTH)});ig.baked=!0;
ig.module("plugins.patches.windowfocus-onMouseDown-patch").requires("impact.input").defines(function(){var b=!1;try{b=window.self!==window.top,!1===b&&(b=0<window.frames.length)}catch(c){b=!0}ig.Input.inject({keydown:function(c){var e=c.target.tagName;if(!("INPUT"==e||"TEXTAREA"==e))if(e="keydown"==c.type?c.keyCode:2==c.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,b&&0>e&&window.focus(),("touchstart"==c.type||"mousedown"==c.type)&&this.mousemove(c),e=this.bindings[e])this.actions[e]=!0,this.locks[e]||(this.presses[e]=
!0,this.locks[e]=!0),c.stopPropagation(),c.preventDefault()}})});ig.baked=!0;
ig.module("plugins.patches.input-patch").requires("impact.input").defines(function(){ig.Input.inject({initMouse:function(){this.parent();ig.system.canvas.addEventListener("mouseleave",this.mouseleave.bind(this),!1)},mousemove:function(b){this.parent(b);try{ig.soundHandler.unlockWebAudio()}catch(c){}},mouseleave:function(){this.clearState("click")},keyup:function(b){this.parent(b);if(ig.visibilityHandler)ig.visibilityHandler.onChange("focus");try{ig.soundHandler.unlockWebAudio()}catch(c){}},clearState:function(b){this.actions[b]=
!1},clearAllState:function(){for(var b in this.actions)this.clearState(b)}})});ig.baked=!0;
ig.module("plugins.data.color-rgb").defines(function(){ColorRGB=function(b,c,d,e){this.r=b||0;this.g=c||0;this.b=d||0;this.a=e||0};ColorRGB.prototype={setRandomColor:function(){this.r=Math.round(255*Math.random());this.g=Math.round(255*Math.random());this.b=Math.round(255*Math.random())},getStyle:function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"},getHex:function(){for(var b=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);2>b.length;)b="0"+b;for(;2>c.length;)c="0"+
c;for(;2>d.length;)d="0"+d;return"#"+b+c+d},getInvertedColor:function(){return new ColorRGB(255-this.r,255-this.g,255-this.b,255-this.a)},clone:function(){return new ColorRGB(this.r,this.g,this.b,this.a)}}});ig.baked=!0;
ig.module("plugins.font.font-info").requires("impact.impact").defines(function(){ig.FontInfo=ig.Class.extend({fonts:[{name:"montserrat",source:"media/fonts/montserrat"}],init:function(){this.registerCssFont()},registerCssFont:function(){var b=[{ext:"woff",format:"woff"},{ext:"ttf",format:"truetype"},{ext:"eot",format:"embedded-opentype"},{ext:"woff2",format:"woff2"},{ext:"svg#svgFontName",format:"svg"}];this.fonts=[];for(var c in fonts){var d={};d.name=fonts[c];d.source="media/fonts/"+fonts[c];this.fonts.push(d)}if(0<
this.fonts.length){c=document.createElement("style");c.type="text/css";for(var d="",e=0;e<this.fonts.length;e++){for(var f=this.fonts[e],d=d+("@font-face {font-family: '"+f.name+"';src:"),g=0;g<b.length;g++){var l=b[g],l="url('"+f.source+"."+l.ext+"') format('"+l.format+"')";g<b.length-1&&(l+=",");d+=l}d+="}"}c.appendChild(document.createTextNode(d));document.head.appendChild(c)}},isValid:function(){for(var b=0;b<this.fonts.length;b++)if(!this._isValidName(this.fonts[b].source))return!1;return!0},
_isValidName:function(b){return-1==b.search(/^[a-z0-9-\/]+$/)?!1:!0}})});ig.baked=!0;
ig.module("plugins.font.font-loader").requires("impact.impact","plugins.font.font-info","plugins.addon.custom-splashloader").defines(function(){ig.FontLoader=ig.Class.extend({fontInfo:new ig.FontInfo,onload:!1,onerror:!1,init:function(b,c){this.onload=b;this.onerror=c},load:function(){this.fontInfo.isValid()?this._loadByLib():console.error("Only lowercased alphanumeric and dash are allowed for font file name!. Please check the font path")},_loadByLib:function(){for(var b=[],c=0;c<this.fontInfo.fonts.length;c++){var d=
new FontFaceObserver(this.fontInfo.fonts[c].name);b.push(d.load())}Promise.all(b).then(this.onload).catch(this.onerror)}});ig.SplashLoader.inject({parentLoad:!1,load:function(){this.parentLoad=this.parent;(new ig.FontLoader(this.onFontLoad.bind(this),this.onFontError.bind(this))).load()},onFontLoad:function(){this.parentLoad()},onFontError:function(){console.error("Font is not loaded");this.parentLoad()}})});ig.baked=!0;
ig.module("plugins.handlers.dom-handler").defines(function(){ig.DomHandler=ig.Class.extend({version:"1.1.2",JQUERYAVAILABLE:!1,init:function(){this.JQUERYAVAILABLE=this._jqueryAvailable()},_jqueryAvailable:function(){return"undefined"!==typeof jQuery},addEvent:function(b,c,d,e){if(this.JQUERYAVAILABLE)b.on(c,d);else b.addEventListener(c,d,e)},create:function(b){return this.JQUERYAVAILABLE?$("<"+b+">"):ig.$new(b)},getElementByClass:function(b){return this.JQUERYAVAILABLE?$("."+b):document.getElementsByClassName(b)},
getElementById:function(b){return this.JQUERYAVAILABLE?0<$(b).length?$(b):null:ig.$(b)},appendChild:function(b,c){this.JQUERYAVAILABLE?b.append(c):b.appendChild(c)},appendToBody:function(b){this.JQUERYAVAILABLE?$("body").append(b):document.body.appendChild(b)},appendToHead:function(b){this.JQUERYAVAILABLE?$("head").append(b):document.head.appendChild(b)},removeChild:function(b,c){this.JQUERYAVAILABLE?b.remove(c):b.removeChild(c)},removeFromBody:function(b){this.JQUERYAVAILABLE?$(b).remove():document.body.removeChild(b)},
removeFromHead:function(b){this.JQUERYAVAILABLE?$(b).remove():document.head.removeChild(b)},text:function(b,c){this.JQUERYAVAILABLE?b.text(c):b.innerText=c},val:function(b,c){this.JQUERYAVAILABLE?b.val(c):b.value=c},getVal:function(b){return this.JQUERYAVAILABLE?b.val():b.value},getAttr:function(b,c){return this.JQUERYAVAILABLE?b.attr(c):b.getAttribute(c)},getText:function(b){return this.JQUERYAVAILABLE?b.text():b.innerText},html:function(b,c){this.JQUERYAVAILABLE?b.html(c):b.innerHTML=c},resize:function(b,
c,d){if(this.JQUERYAVAILABLE)b.width(c.toFixed(2)),b.height(d.toFixed(2));else{var e=b.style.visibility;c="width:"+c.toFixed(2)+"px; height:"+d.toFixed(2)+"px;";this.attr(b,"style",c);b.style.visibility=e}},resizeOffsetLeft:function(b,c,d,e){if(this.JQUERYAVAILABLE)b.width(c.toFixed(2)),b.height(d.toFixed(2)),b.css("left",e);else{var f=b.style.visibility;c="width:"+c.toFixed(2)+"px; height:"+d.toFixed(2)+"px; left: "+e.toFixed(2)+"px;";this.attr(b,"style",c);b.style.visibility=f}},resizeOffset:function(b,
c,d,e,f){if(this.JQUERYAVAILABLE)b.width(c.toFixed(2)),b.height(d.toFixed(2)),b.css("left",e),b.css("top",f);else{var g=b.style.visibility;c="width:"+c.toFixed(2)+"px; height:"+d.toFixed(2)+"px; left: "+e.toFixed(2)+"px; top: "+f.toFixed(2)+"px;";this.attr(b,"style",c);b.style.visibility=g}},css:function(b,c){if(this.JQUERYAVAILABLE)b.css(c);else{var d="",e;for(e in c)d+=e+":"+c[e]+";";this.attr(b,"style",d)}},getOffsets:function(b){return this.JQUERYAVAILABLE?(b=b.offset(),{left:b.left,top:b.top}):
{left:b.offsetLeft,top:b.offsetTop}},attr:function(b,c,d){if("undefined"===typeof d)return this.JQUERYAVAILABLE?b.attr(c):b.getAttribute(c);this.JQUERYAVAILABLE?b.attr(c,d):b.setAttribute(c,d)},show:function(b){b&&"undefined"!==typeof b&&(this.JQUERYAVAILABLE?(b.show(),b.css("visibility","visible")):b&&(b.style?b.style.visibility="visible":b[0]&&(b[0].style.visibility="visible")))},hide:function(b){b&&"undefined"!==typeof b&&(this.JQUERYAVAILABLE?(b.hide(),b.css("visibility","hidden")):b&&(b.style?
b.style.visibility="hidden":b[0]&&(b[0].style.visibility="hidden")))},getQueryVariable:function(b){for(var c=window.location.search.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].match(/([^=]+?)=(.+)/);if(e&&decodeURIComponent(e[1])==b)return decodeURIComponent(e[2])}},forcedDeviceDetection:function(){var b=this.getQueryVariable("device");if(b)switch(b){case "mobile":console.log("serving mobile version ...");ig.ua.mobile=!0;break;case "desktop":console.log("serving desktop version ...");ig.ua.mobile=
!1;break;default:console.log("serving universal version ...")}else console.log("serving universal version ...")},forcedDeviceRotation:function(){var b=this.getQueryVariable("force-rotate");if(b)switch(b){case "portrait":console.log("force rotate to portrait");window.orientation=0;break;case "landscape":console.log("force rotate to horizontal");window.orientation=90;break;default:alert("wrong command/type in param force-rotate. Defaulting value to portrait"),window.orientation=0}},setZIndex:function(b,
c){this.JQUERYAVAILABLE?b.css("zIndex",c):b&&(b.style?b.style.zIndex=c:b[0]&&(b[0].style.zIndex=c))}})});ig.baked=!0;
ig.module("plugins.audio.howler-player").defines(function(){HowlerPlayer=ig.Class.extend({tagName:"HowlerPlayer",isMuted:!1,soundList:{},activeSoundList:{},init:function(b){var c=this,d;for(d in b)this.soundList[d]=new Howl({src:["media/audio/"+b[d].path+".mp3"],loop:!!b[d].loop,onend:function(b){this._loop||c.unregisterActiveSound(this,b)}})},onSystemPause:function(){for(var b in this.activeSoundList)this.pause(this.activeSoundList[b],b)},onSystemResume:function(){for(var b in this.activeSoundList)this.resume(this.activeSoundList[b],
b)},play:function(b){if(!this.isMuted){b="string"===typeof b?this.soundList[b]:b;b.mute(!1);var c=b.play();this.registerActiveSound(b,c)}},pause:function(b,c){var d="string"===typeof b?this.soundList[b]:b;c=parseInt(c);d.playing(c)&&d.pause(c)},resume:function(b,c){if(!this.isMuted){var d="string"===typeof b?this.soundList[b]:b;c=parseInt(c);d.playing(c)||d.play(c)}},stop:function(b,c){var d="string"===typeof b?this.soundList[b]:b;c=parseInt(c);d.playing(c)&&d.stop(c)},seek:function(b){return("string"===
typeof b?this.soundList[b]:b).seek()},mute:function(b){b||(this.isMuted=!0);for(var c in this.soundList)this.soundList[c].mute(!0)},unmute:function(b){b||(this.isMuted=!1);if(!this.isMuted)for(var c in this.soundList)this.soundList[c].mute(!1)},volume:function(b){if("number"!==typeof b)console.warn("Argument needs to be a number!");else{b=b.limit(0,1);for(var c in this.soundList)this.soundList[c].volume(b)}},getVolume:function(b){return("string"===typeof b?this.soundList[b]:b).volume()},registerActiveSound:function(b,
c){if(null===this.activeSoundList||"undefined"===typeof this.activeSoundList)this.activeSoundList={};null===b||"undefined"===typeof b||(this.activeSoundList[c]=b)},unregisterActiveSound:function(b,c){if(null===this.activeSoundList||"undefined"===typeof this.activeSoundList)this.activeSoundList=[];null===b||"undefined"===typeof b||(this.activeSoundList[c]=null,delete this.activeSoundList[c])}})});ig.baked=!0;
ig.module("plugins.audio.sound-info").defines(function(){SoundInfo=ig.Class.extend({sfx:{logosplash1:{path:"opening/logosplash1"},logosplash2:{path:"opening/logosplash2"},click:{path:"sfx/click"},match1:{path:"sfx/match1"},match2:{path:"sfx/match2"},match3:{path:"sfx/match3"},slide:{path:"sfx/slide"},bomb:{path:"sfx/bomb"},effect:{path:"sfx/effect"},samecolor:{path:"sfx/samecolor"},starpop:{path:"sfx/star-pop"}},bgm:{background:{path:"bgm/bgm",loop:!0}}})});ig.baked=!0;
ig.module("plugins.audio.sound-handler").requires("plugins.audio.howler-player","plugins.audio.sound-info").defines(function(){ig.SoundHandler=ig.Class.extend({bgmPlayer:null,sfxPlayer:null,soundInfo:new SoundInfo,init:function(){Howler.autoSuspend=!1;this.sfxPlayer=new HowlerPlayer(this.soundInfo.sfx);this.bgmPlayer=new HowlerPlayer(this.soundInfo.bgm)},unlockWebAudio:function(){Howler&&(Howler.ctx&&"running"!==Howler.ctx.state&&Howler.ctx.resume(),Howler._audioUnlocked||"function"===typeof Howler._unlockAudio&&
Howler._unlockAudio())},onSystemPause:function(){if(this.sfxPlayer)this.sfxPlayer.onSystemPause();if(this.bgmPlayer)this.bgmPlayer.onSystemPause()},onSystemResume:function(){this.unlockWebAudio();if(this.sfxPlayer)this.sfxPlayer.onSystemResume();if(this.bgmPlayer)this.bgmPlayer.onSystemResume()},muteSFX:function(b){this.sfxPlayer&&this.sfxPlayer.mute(b)},muteBGM:function(b){this.bgmPlayer&&this.bgmPlayer.mute(b)},unmuteSFX:function(b){this.sfxPlayer&&this.sfxPlayer.unmute(b)},unmuteBGM:function(b){this.bgmPlayer&&
this.bgmPlayer.unmute(b)},muteAll:function(b){this.muteSFX(b);this.muteBGM(b)},unmuteAll:function(b){this.unlockWebAudio();this.unmuteSFX(b);this.unmuteBGM(b)},forceMuteAll:function(){this.muteAll(!0)},forceUnMuteAll:function(){this.unmuteAll(!0)},forceLoopBGM:function(){}})});ig.baked=!0;
ig.module("plugins.handlers.visibility-handler").requires("plugins.audio.sound-handler").defines(function(){ig.VisibilityHandler=ig.Class.extend({version:"1.2.1",config:{muteOnBlur:!0,pauseOnBlur:!0,clearInputStateOnBlur:!0,allowResumeWithoutFocus:{desktop:!0,mobile:{kaios:!1,"default":!0}},handlerDelay:{desktop:0,mobile:{kaios:0,"default":0}},autoFocusOnResume:{desktop:!0,mobile:{kaios:!1,"default":!0}},autoFocusAfterResume:{desktop:!0,mobile:{kaios:!1,"default":!0}}},browserPrefixes:["o","ms","moz",
"webkit"],activeOverlays:[],browserPrefix:null,hiddenPropertyName:null,visibilityEventName:null,visibilityStateName:null,isShowingOverlay:!1,isFocused:!1,isPaused:!1,init:function(){this.initVisibilityHandler();this.initFocusHandler();this.initPageTransitionHandler();ig.visibilityHandler=this},pauseHandler:function(){!0===this.config.clearInputStateOnBlur&&"undefined"!==typeof ig.input&&null!==ig.input&&"function"===typeof ig.input.clearAllState&&ig.input.clearAllState();!0===this.config.pauseOnBlur&&
("undefined"!==typeof wgl&&null!==wgl&&null!==wgl.system&&"undefined"!==typeof wgl.system&&"function"===typeof wgl.system.stopRender&&wgl.system.stopRender(),"undefined"!==typeof ig.game&&null!==ig.game&&"undefined"!==typeof ig.game.pauseGame&&ig.game.pauseGame());!0===this.config.muteOnBlur&&"undefined"!==typeof ig.soundHandler&&null!==ig.soundHandler&&"function"===typeof ig.soundHandler.forceMuteAll&&ig.soundHandler.forceMuteAll()},resumeHandler:function(){"undefined"!==typeof ig.input&&null!==
ig.input&&"function"===typeof ig.input.clearAllState&&ig.input.clearAllState();"undefined"!==typeof ig.game&&null!==ig.game&&("undefined"!==typeof ig.game.resumeGame&&ig.game.resumeGame(),"undefined"!==typeof wgl&&null!==wgl&&null!==wgl.system&&"undefined"!==typeof wgl.system&&"function"===typeof wgl.system.startRender&&wgl.system.startRender());"undefined"!==typeof ig.soundHandler&&null!==ig.soundHandler&&"function"===typeof ig.soundHandler.forceUnMuteAll&&ig.soundHandler.forceUnMuteAll()},initVisibilityHandler:function(){this.browserPrefix=
this.getBrowserPrefix();this.hiddenPropertyName=this.getHiddenPropertyName(this.browserPrefix);this.visibilityEventName=this.getVisibilityEventName(this.browserPrefix);this.visibilityStateName=this.getVisibilityStateName(this.browserPrefix);this.visibilityEventName&&document.addEventListener(this.visibilityEventName,this.onChange.bind(this),!0)},initFocusHandler:function(){window.addEventListener("blur",this.onChange.bind(this),!0);document.addEventListener("blur",this.onChange.bind(this),!0);document.addEventListener("focusout",
this.onChange.bind(this),!0);window.addEventListener("focus",this.onChange.bind(this),!0);document.addEventListener("focus",this.onChange.bind(this),!0);document.addEventListener("focusin",this.onChange.bind(this),!0)},initPageTransitionHandler:function(){window.addEventListener("pagehide",this.onChange.bind(this),!0);window.addEventListener("pageshow",this.onChange.bind(this),!0)},getBrowserPrefix:function(){var b=null;this.browserPrefixes.forEach(function(c){if(this.getHiddenPropertyName(c)in document)return b=
c}.bind(this));return b},getHiddenPropertyName:function(b){return b?b+"Hidden":"hidden"},getVisibilityEventName:function(b){return(b?b:"")+"visibilitychange"},getVisibilityStateName:function(b){return b?b+"VisibilityState":"visibilityState"},hasView:function(){return!(document[this.hiddenPropertyName]||"visible"!==document[this.visibilityStateName])},hasFocus:function(){return document.hasFocus()||this.isFocused},addActiveOverlay:function(b){if(null===this.activeOverlays||"undefined"===typeof this.activeOverlays)this.activeOverlays=
[];null===b||"undefined"===typeof b||!0!==this.activeOverlays.includes(b)&&this.activeOverlays.push(b)},removeActiveOverlay:function(b){if(null===this.activeOverlays||"undefined"===typeof this.activeOverlays)this.activeOverlays=[];0>=this.activeOverlays.length||null===b||"undefined"===typeof b||!0===this.activeOverlays.includes(b)&&this.activeOverlays.splice(this.activeOverlays.indexOf(b),1)},onOverlayShow:function(b){null!==b&&"undefined"!==typeof b&&this.addActiveOverlay(b);0<this.activeOverlays.length&&
(this.systemPaused(),this.isShowingOverlay=!0)},onOverlayHide:function(b){null!==b&&"undefined"!==typeof b&&this.removeActiveOverlay(b);0>=this.activeOverlays.length&&(this.isShowingOverlay=!1,this.systemResumed())},systemPaused:function(){if(this.isPaused)return!1;this.pauseHandler();return this.isPaused=!0},systemResumed:function(){if(!this.isPaused||!this.hasView()||this.isShowingOverlay)return!1;if(!this.hasFocus())if(ig.ua.mobile)if(this.isKaiOS()){if(!this.config.allowResumeWithoutFocus.mobile.kaios)return!1}else{if(!this.config.allowResumeWithoutFocus.mobile.default)return!1}else if(!this.config.allowResumeWithoutFocus.desktop)return!1;
this.focusOnResume();this.resumeHandler();this.focusAfterResume();this.isPaused=!1;return!0},isKaiOS:function(){return/KAIOS/.test(navigator.userAgent)||!1},focusOnResume:function(){var b=!1;return b=ig.ua.mobile?this.isKaiOS()?this.config.autoFocusOnResume.mobile.kaios:this.config.autoFocusOnResume.mobile.default:this.config.autoFocusOnResume.desktop},focusAfterResume:function(){var b=!1;return b=ig.ua.mobile?this.isKaiOS()?this.config.autoFocusAfterResume.mobile.kaios:this.config.autoFocusAfterResume.mobile.default:
this.config.autoFocusAfterResume.desktop},focus:function(b){window.focus&&b&&(document.activeElement&&"function"===typeof document.activeElement.blur&&document.activeElement.blur(),window.focus())},handleDelayedEvent:function(b){if(!this.hasView()||"pause"===b.type||"pageHide"===b.type||"blur"===b.type||"focusout"===b.type){if("blur"===b.type||"focusout"===b.type){var c=b.path||b.composedPath&&b.composedPath();if(c&&2<c.length||b.srcElement&&("INPUT"===b.srcElement.tagName||"TEXTAREA"===b.srcElement.tagName))return!1;
this.isFocused=!1}return this.systemPaused(b)}if("focus"===b.type||"focusin"===b.type)this.isFocused=!0;return this.systemResumed(b)},startDelayedEventHandler:function(b){ig.ua.mobile?this.isKaiOS()?0<this.config.handlerDelay.mobile.kaios?window.setTimeout(function(b){this.handleDelayedEvent(b)}.bind(this,b),this.config.handlerDelay.mobile):this.handleDelayedEvent(b):0<this.config.handlerDelay.mobile.default?window.setTimeout(function(b){this.handleDelayedEvent(b)}.bind(this,b),this.config.handlerDelay.mobile):
this.handleDelayedEvent(b):0<this.config.handlerDelay.desktop?window.setTimeout(function(b){this.handleDelayedEvent(b)}.bind(this,b),this.config.handlerDelay.desktop):this.handleDelayedEvent(b)},onChange:function(b){this.startDelayedEventHandler(b)}})});ig.baked=!0;
ig.module("plugins.handlers.size-handler").requires("plugins.data.vector","plugins.handlers.visibility-handler").defines(function(){ig.SizeHandler=ig.Class.extend({portraitMode:!0,disableStretchToFitOnMobileFlag:!1,enableStretchToFitOnAntiPortraitModeFlag:!0,enableScalingLimitsOnMobileFlag:!1,minScalingOnMobile:0,maxScalingOnMobile:1,enableStretchToFitOnDesktopFlag:!1,enableScalingLimitsOnDesktopFlag:!1,minScalingOnDesktop:0,maxScalingOnDesktop:1,desktop:{actualSize:new Vector2(window.innerWidth,
window.innerHeight),actualResolution:new Vector2(1080,1920)},mobile:{actualSize:new Vector2(window.innerWidth,window.innerHeight),actualResolution:new Vector2(540,960)},windowSize:new Vector2(window.innerWidth,window.innerHeight),scaleRatioMultiplier:new Vector2(1,1),sizeRatio:new Vector2(1,1),scale:1,domHandler:null,dynamicClickableEntityDivs:{},coreDivsToResize:["#canvas","#play","#orientate"],adsToResize:{MobileAdInGamePreroll:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+
20},MobileAdInGameEnd:{"box-width":_SETTINGS.Ad.Mobile.End.Width+2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20},MobileAdInGamePreroll2:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd2:{"box-width":_SETTINGS.Ad.Mobile.End.Width+2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20},MobileAdInGamePreroll3:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd3:{"box-width":_SETTINGS.Ad.Mobile.End.Width+
2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20}},init:function(b){this.domHandler=b;if("undefined"===typeof b)throw"undefined Dom Handler for Size Handler";this.sizeCalcs();this.eventListenerSetup();this.samsungFix()},sizeCalcs:function(){this.windowSize=new Vector2(window.innerWidth,window.innerHeight);if(ig.ua.mobile){this.mobile.actualSize=new Vector2(window.innerWidth,window.innerHeight);var b=new Vector2(this.mobile.actualResolution.x,this.mobile.actualResolution.y);this.scaleRatioMultiplier=
new Vector2(this.mobile.actualSize.x/b.x,this.mobile.actualSize.y/b.y);if(this.disableStretchToFitOnMobileFlag){var c=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y);this.enableScalingLimitsOnMobileFlag&&(c=c.limit(this.minScalingOnMobile,this.maxScalingOnMobile));this.mobile.actualSize.x=b.x*c;this.mobile.actualSize.y=b.y*c;this.scaleRatioMultiplier.x=c;this.scaleRatioMultiplier.y=c}else this.sizeRatio.x=this.scaleRatioMultiplier.x,this.sizeRatio.y=this.scaleRatioMultiplier.y,this.scaleRatioMultiplier.x=
1,this.scaleRatioMultiplier.y=1}else this.desktop.actualSize=new Vector2(window.innerWidth,window.innerHeight),b=new Vector2(this.desktop.actualResolution.x,this.desktop.actualResolution.y),this.scaleRatioMultiplier=new Vector2(this.desktop.actualSize.x/b.x,this.desktop.actualSize.y/b.y),this.enableStretchToFitOnDesktopFlag?(this.sizeRatio.x=this.scaleRatioMultiplier.x,this.sizeRatio.y=this.scaleRatioMultiplier.y,this.scaleRatioMultiplier.x=1,this.scaleRatioMultiplier.y=1):(c=Math.min(this.scaleRatioMultiplier.x,
this.scaleRatioMultiplier.y),this.enableScalingLimitsOnDesktopFlag&&(c=c.limit(this.minScalingOnDesktop,this.maxScalingOnDesktop)),this.desktop.actualSize.x=b.x*c,this.desktop.actualSize.y=b.y*c,this.scaleRatioMultiplier.x=c,this.scaleRatioMultiplier.y=c)},resizeLayers:function(){for(var b=0;b<this.coreDivsToResize.length;b++){var c=ig.domHandler.getElementById(this.coreDivsToResize[b]);if(ig.ua.mobile)if(this.disableStretchToFitOnMobileFlag){var d=Math.floor(ig.sizeHandler.windowSize.x/2-ig.sizeHandler.mobile.actualSize.x/
2),e=Math.floor(ig.sizeHandler.windowSize.y/2-ig.sizeHandler.mobile.actualSize.y/2);0>d&&(d=0);0>e&&(e=0);ig.domHandler.resizeOffset(c,Math.floor(ig.sizeHandler.mobile.actualSize.x),Math.floor(ig.sizeHandler.mobile.actualSize.y),d,e);var f=!1;if(f=this.portraitMode?window.innerHeight<window.innerWidth:window.innerHeight>window.innerWidth)if(this.enableStretchToFitOnAntiPortraitModeFlag)ig.domHandler.resizeOffset(c,Math.floor(window.innerWidth),Math.floor(window.innerHeight),0,0);else{var f=new Vector2(window.innerWidth/
this.mobile.actualResolution.y,window.innerHeight/this.mobile.actualResolution.x),d=Math.min(f.x,f.y),f=this.mobile.actualResolution.y*d,g=this.mobile.actualResolution.x*d,d=Math.floor(ig.sizeHandler.windowSize.x/2-f/2),e=Math.floor(ig.sizeHandler.windowSize.y/2-g/2);0>d&&(d=0);0>e&&(e=0);ig.domHandler.resizeOffset(c,Math.floor(f),Math.floor(g),d,e)}}else ig.domHandler.resize(c,Math.floor(ig.sizeHandler.mobile.actualSize.x),Math.floor(ig.sizeHandler.mobile.actualSize.y));else this.enableStretchToFitOnDesktopFlag?
ig.domHandler.resize(c,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y)):(d=Math.floor(ig.sizeHandler.windowSize.x/2-ig.sizeHandler.desktop.actualSize.x/2),e=Math.floor(ig.sizeHandler.windowSize.y/2-ig.sizeHandler.desktop.actualSize.y/2),0>d&&(d=0),0>e&&(e=0),ig.domHandler.resizeOffset(c,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y),d,e))}for(var l in this.adsToResize)b=ig.domHandler.getElementById("#"+
l),c=ig.domHandler.getElementById("#"+l+"-Box"),f=(window.innerWidth-this.adsToResize[l]["box-width"])/2+"px",d=(window.innerHeight-this.adsToResize[l]["box-height"])/2+"px",b&&ig.domHandler.css(b,{width:window.innerWidth,height:window.innerHeight}),c&&ig.domHandler.css(c,{left:f,top:d});b=ig.domHandler.getElementById("#canvas");c=ig.domHandler.getOffsets(b);b=c.left;c=c.top;f=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);for(l in this.dynamicClickableEntityDivs){d=
ig.domHandler.getElementById("#"+l);if(ig.ua.mobile){var g=this.dynamicClickableEntityDivs[l].entity_pos_x,p=this.dynamicClickableEntityDivs[l].entity_pos_y,j=this.dynamicClickableEntityDivs[l].width,e=this.dynamicClickableEntityDivs[l].height;this.disableStretchToFitOnMobileFlag?(g=Math.floor(b+g*this.scaleRatioMultiplier.x)+"px",p=Math.floor(c+p*this.scaleRatioMultiplier.y)+"px",j=Math.floor(j*this.scaleRatioMultiplier.x)+"px",e=Math.floor(e*this.scaleRatioMultiplier.y)+"px"):(g=Math.floor(g*this.sizeRatio.x)+
"px",p=Math.floor(p*this.sizeRatio.y)+"px",j=Math.floor(j*this.sizeRatio.x)+"px",e=Math.floor(e*this.sizeRatio.y)+"px")}else g=this.dynamicClickableEntityDivs[l].entity_pos_x,p=this.dynamicClickableEntityDivs[l].entity_pos_y,j=this.dynamicClickableEntityDivs[l].width,e=this.dynamicClickableEntityDivs[l].height,this.enableStretchToFitOnDesktopFlag?(g=Math.floor(g*this.sizeRatio.x)+"px",p=Math.floor(p*this.sizeRatio.y)+"px",j=Math.floor(j*this.sizeRatio.x)+"px",e=Math.floor(e*this.sizeRatio.y)+"px"):
(g=Math.floor(b+g*this.scaleRatioMultiplier.x)+"px",p=Math.floor(c+p*this.scaleRatioMultiplier.y)+"px",j=Math.floor(j*this.scaleRatioMultiplier.x)+"px",e=Math.floor(e*this.scaleRatioMultiplier.y)+"px");ig.domHandler.css(d,{"float":"left",position:"absolute",left:g,top:p,width:j,height:e,"z-index":3});this.dynamicClickableEntityDivs[l]["font-size"]&&ig.domHandler.css(d,{"font-size":this.dynamicClickableEntityDivs[l]["font-size"]*f+"px"})}$("#ajaxbar").width(this.windowSize.x);$("#ajaxbar").height(this.windowSize.y)},
resize:function(){this.sizeCalcs();this.resizeLayers()},reorient:function(){console.log("changing orientation ...");if(ig.ua.mobile){var b=!1,b=this.portraitMode?window.innerHeight<window.innerWidth:window.innerHeight>window.innerWidth,c=this.domHandler.getElementById("#orientate"),d=this.domHandler.getElementById("#game");if(b){if(this.domHandler.show(c),this.domHandler.hide(d),null!==ig.visibilityHandler&&"undefined"!==typeof ig.visibilityHandler&&null!==ig.visibilityHandler.onOverlayShow&&"function"===
typeof ig.visibilityHandler.onOverlayShow)if(1<=c.length)ig.visibilityHandler.onOverlayShow(c[0]);else ig.visibilityHandler.onOverlayShow("orientate")}else if(this.domHandler.show(d),this.domHandler.hide(c),null!==ig.visibilityHandler&&"undefined"!==typeof ig.visibilityHandler&&null!==ig.visibilityHandler.onOverlayHide&&"function"===typeof ig.visibilityHandler.onOverlayHide)if(1<=c.length)ig.visibilityHandler.onOverlayHide(c[0]);else ig.visibilityHandler.onOverlayHide("orientate")}ig.ua.mobile?(this.resize(),
this.resizeAds()):this.resize()},resizeAds:function(){for(var b in this.adsToResize){var c=ig.domHandler.getElementById("#"+b),d=ig.domHandler.getElementById("#"+b+"-Box"),e=(window.innerWidth-this.adsToResize[b]["box-width"])/2+"px",f=(window.innerHeight-this.adsToResize[b]["box-height"])/2+"px";c&&ig.domHandler.css(c,{width:window.innerWidth,height:window.innerHeight});d&&ig.domHandler.css(d,{left:e,top:f})}},samsungFix:function(){ig.ua.android&&(!(4.2>parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+
8,navigator.userAgent.indexOf("Android")+11)))&&!(0>navigator.userAgent.indexOf("GT"))&&!(0<navigator.userAgent.indexOf("Chrome"))&&!(0<navigator.userAgent.indexOf("Firefox")))&&(document.addEventListener("touchstart",function(b){b.preventDefault();return!1},!1),document.addEventListener("touchmove",function(b){b.preventDefault();return!1},!1),document.addEventListener("touchend",function(b){b.preventDefault();return!1},!1))},orientationInterval:null,orientationTimeout:null,orientationHandler:function(){this.reorient();
window.scrollTo(0,1)},orientationDelayHandler:function(){null==this.orientationInterval&&(this.orientationInterval=window.setInterval(this.orientationHandler.bind(this),100));null==this.orientationTimeout&&(this.orientationTimeout=window.setTimeout(function(){this.clearAllIntervals()}.bind(this),2E3))},clearAllIntervals:function(){window.clearInterval(this.orientationInterval);this.orientationInterval=null;window.clearTimeout(this.orientationTimeout);this.orientationTimeout=null},eventListenerSetup:function(){ig.ua.iOS?
(window.addEventListener("orientationchange",this.orientationDelayHandler.bind(this)),window.addEventListener("resize",this.orientationDelayHandler.bind(this))):(window.addEventListener("orientationchange",this.orientationHandler.bind(this)),window.addEventListener("resize",this.orientationHandler.bind(this)));document.addEventListener("touchmove",function(b){window.scrollTo(0,1);b.preventDefault()},{passive:!1});this.chromePullDownRefreshFix()},chromePullDownRefreshFix:function(){var b=window.chrome||
navigator.userAgent.match("CriOS"),c="ontouchstart"in document.documentElement;if(b&&c){var d=b=!1,e=0,f=!1;try{CSS.supports("overscroll-behavior-y","contain")&&(b=!0)}catch(g){}try{if(b)return document.body.style.overscrollBehaviorY="contain"}catch(l){}b=document.head||document.body;c=document.createElement("style");c.type="text/css";c.styleSheet?c.styleSheet.cssText="\n      ::-webkit-scrollbar {\n        width: 500x;\n      }\n      ::-webkit-scrollbar-thumb {\n        border-radius: 500px;\n        background-color: rgba(0, 0, 0, 0.2);\n      }\n      body {\n        -webkit-overflow-scrolling: auto!important;\n      }\n    ":
c.appendChild(document.createTextNode("\n      ::-webkit-scrollbar {\n        width: 500px;\n      }\n      ::-webkit-scrollbar-thumb {\n        border-radius: 500px;\n        background-color: rgba(0, 0, 0, 0.2);\n      }\n      body {\n        -webkit-overflow-scrolling: auto!important;\n      }\n    "));b.appendChild(c);try{addEventListener("test",null,{get passive(){d=!0}})}catch(p){}document.addEventListener("touchstart",function(b){1===b.touches.length&&(e=b.touches[0].clientY,f=0===window.pageYOffset)},
!!d&&{passive:!0});document.addEventListener("touchmove",function(b){var c;if(c=f){f=!1;c=b.touches[0].clientY;var d=c-e;c=(e=c,0<d)}if(c)return b.preventDefault()},!!d&&{passive:!1})}}})});ig.baked=!0;
ig.module("plugins.handlers.api-handler").defines(function(){ig.ApiHandler=ig.Class.extend({apiAvailable:{MJSPreroll:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS&&_SETTINGS.Ad.Mobile.Preroll.Enabled&&MobileAdInGamePreroll.Initialize()},MJSHeader:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Header.Enabled&&MobileAdInGameHeader.Initialize()},MJSFooter:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Footer.Enabled&&MobileAdInGameFooter.Initialize()},
MJSEnd:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.End.Enabled&&MobileAdInGameEnd.Initialize()}},run:function(b,c){if(this.apiAvailable[b])this.apiAvailable[b](c)}})});ig.baked=!0;
ig.module("plugins.tween").requires("impact.entity").defines(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(b){for(var c=0;c<this.length;++c)if(this[c]===b)return c;return-1});ig.Entity.prototype.tweens=[];ig.Entity.prototype._preTweenUpdate=ig.Entity.prototype.update;ig.Entity.prototype.update=function(){this._preTweenUpdate();if(0<this.tweens.length){for(var b=[],c=0;c<this.tweens.length;c++)this.tweens[c].update(),this.tweens[c].complete||b.push(this.tweens[c]);this.tweens=
b}};ig.Entity.prototype.tween=function(b,c,d){b=new ig.Tween(this,b,c,d);this.tweens.push(b);return b};ig.Entity.prototype.pauseTweens=function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].pause()};ig.Entity.prototype.resumeTweens=function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].resume()};ig.Entity.prototype.stopTweens=function(b){for(var c=0;c<this.tweens.length;c++)this.tweens[c].stop(b)};ig.Tween=function(b,c,d,e){var f={},g={},l={},p=0,j=!1,q=!1,m=!1;this.duration=d;this.paused=
this.complete=!1;this.easing=ig.Tween.Easing.Linear.EaseNone;this.onComplete=!1;this.loop=this.delay=0;this.loopCount=-1;ig.merge(this,e);this.loopNum=this.loopCount;this.chain=function(b){m=b};this.initEnd=function(b,c,d){if("object"!==typeof c[b])d[b]=c[b];else for(subprop in c[b])d[b]||(d[b]={}),this.initEnd(subprop,c[b],d[b])};this.initStart=function(b,c,d,e){if("object"!==typeof d[b])"undefined"!==typeof c[b]&&(e[b]=d[b]);else for(subprop in d[b])e[b]||(e[b]={}),"undefined"!==typeof c[b]&&this.initStart(subprop,
c[b],d[b],e[b])};this.start=function(){this.paused=this.complete=!1;this.loopNum=this.loopCount;p=0;-1==b.tweens.indexOf(this)&&b.tweens.push(this);q=!0;j=new ig.Timer;for(var d in c)this.initEnd(d,c,g);for(d in g)this.initStart(d,g,b,f),this.initDelta(d,l,b,g)};this.initDelta=function(b,c,d,e){if("object"!==typeof e[b])c[b]=e[b]-d[b];else for(subprop in e[b])c[b]||(c[b]={}),this.initDelta(subprop,c[b],d[b],e[b])};this.propUpdate=function(b,c,d,e,f){if("object"!==typeof d[b])c[b]="undefined"!=typeof d[b]?
d[b]+e[b]*f:c[b];else for(subprop in d[b])this.propUpdate(subprop,c[b],d[b],e[b],f)};this.propSet=function(b,c,d){if("object"!==typeof c[b])d[b]=c[b];else for(subprop in c[b])d[b]||(d[b]={}),this.propSet(subprop,c[b],d[b])};this.update=function(){if(!q)return!1;if(this.delay){if(j.delta()<this.delay)return;this.delay=0;j.reset()}if(this.paused||this.complete)return!1;var c=(j.delta()+p)/this.duration,c=1<c?1:c,d=this.easing(c);for(property in l)this.propUpdate(property,b,f,l,d);if(1<=c){if(0==this.loopNum||
!this.loop){this.complete=!0;if(this.onComplete)this.onComplete();m&&m.start();return!1}if(this.loop==ig.Tween.Loop.Revert){for(property in f)this.propSet(property,f,b);p=0;j.reset();-1!=this.loopNum&&this.loopNum--}else if(this.loop==ig.Tween.Loop.Reverse){c={};d={};ig.merge(c,g);ig.merge(d,f);ig.merge(f,c);ig.merge(g,d);for(property in g)this.initDelta(property,l,b,g);p=0;j.reset();-1!=this.loopNum&&this.loopNum--}}};this.pause=function(){this.paused=!0;j&&j.delta&&(p+=j.delta())};this.resume=function(){this.paused=
!1;j&&j.reset&&j.reset()};this.stop=function(b){b&&(this.loop=this.complete=this.paused=!1,p+=d,this.update());this.complete=!0}};ig.Tween.Loop={Revert:1,Reverse:2};ig.Tween.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{}};ig.Tween.Easing.Linear.EaseNone=function(b){return b};ig.Tween.Easing.Quadratic.EaseIn=function(b){return b*b};ig.Tween.Easing.Quadratic.EaseOut=function(b){return-b*(b-2)};ig.Tween.Easing.Quadratic.EaseInOut=
function(b){return 1>(b*=2)?0.5*b*b:-0.5*(--b*(b-2)-1)};ig.Tween.Easing.Cubic.EaseIn=function(b){return b*b*b};ig.Tween.Easing.Cubic.EaseOut=function(b){return--b*b*b+1};ig.Tween.Easing.Cubic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b:0.5*((b-=2)*b*b+2)};ig.Tween.Easing.Quartic.EaseIn=function(b){return b*b*b*b};ig.Tween.Easing.Quartic.EaseOut=function(b){return-(--b*b*b*b-1)};ig.Tween.Easing.Quartic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b*b:-0.5*((b-=2)*b*b*b-2)};ig.Tween.Easing.Quintic.EaseIn=
function(b){return b*b*b*b*b};ig.Tween.Easing.Quintic.EaseOut=function(b){return(b-=1)*b*b*b*b+1};ig.Tween.Easing.Quintic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b*b*b:0.5*((b-=2)*b*b*b*b+2)};ig.Tween.Easing.Sinusoidal.EaseIn=function(b){return-Math.cos(b*Math.PI/2)+1};ig.Tween.Easing.Sinusoidal.EaseOut=function(b){return Math.sin(b*Math.PI/2)};ig.Tween.Easing.Sinusoidal.EaseInOut=function(b){return-0.5*(Math.cos(Math.PI*b)-1)};ig.Tween.Easing.Exponential.EaseIn=function(b){return 0==b?0:Math.pow(2,
10*(b-1))};ig.Tween.Easing.Exponential.EaseOut=function(b){return 1==b?1:-Math.pow(2,-10*b)+1};ig.Tween.Easing.Exponential.EaseInOut=function(b){return 0==b?0:1==b?1:1>(b*=2)?0.5*Math.pow(2,10*(b-1)):0.5*(-Math.pow(2,-10*(b-1))+2)};ig.Tween.Easing.Circular.EaseIn=function(b){return-(Math.sqrt(1-b*b)-1)};ig.Tween.Easing.Circular.EaseOut=function(b){return Math.sqrt(1- --b*b)};ig.Tween.Easing.Circular.EaseInOut=function(b){return 1>(b/=0.5)?-0.5*(Math.sqrt(1-b*b)-1):0.5*(Math.sqrt(1-(b-=2)*b)+1)};ig.Tween.Easing.Elastic.EaseIn=
function(b){var c,d=0.1,e=0.4;if(0==b)return 0;if(1==b)return 1;e||(e=0.3);!d||1>d?(d=1,c=e/4):c=e/(2*Math.PI)*Math.asin(1/d);return-(d*Math.pow(2,10*(b-=1))*Math.sin((b-c)*2*Math.PI/e))};ig.Tween.Easing.Elastic.EaseOut=function(b){var c,d=0.1,e=0.4;if(0==b)return 0;if(1==b)return 1;e||(e=0.3);!d||1>d?(d=1,c=e/4):c=e/(2*Math.PI)*Math.asin(1/d);return d*Math.pow(2,-10*b)*Math.sin((b-c)*2*Math.PI/e)+1};ig.Tween.Easing.Elastic.EaseInOut=function(b){var c,d=0.1,e=0.4;if(0==b)return 0;if(1==b)return 1;
e||(e=0.3);!d||1>d?(d=1,c=e/4):c=e/(2*Math.PI)*Math.asin(1/d);return 1>(b*=2)?-0.5*d*Math.pow(2,10*(b-=1))*Math.sin((b-c)*2*Math.PI/e):0.5*d*Math.pow(2,-10*(b-=1))*Math.sin((b-c)*2*Math.PI/e)+1};ig.Tween.Easing.Back.EaseIn=function(b){return b*b*(2.70158*b-1.70158)};ig.Tween.Easing.Back.EaseOut=function(b){return(b-=1)*b*(2.70158*b+1.70158)+1};ig.Tween.Easing.Back.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*(3.5949095*b-2.5949095):0.5*((b-=2)*b*(3.5949095*b+2.5949095)+2)};ig.Tween.Easing.Bounce.EaseIn=
function(b){return 1-ig.Tween.Easing.Bounce.EaseOut(1-b)};ig.Tween.Easing.Bounce.EaseOut=function(b){return(b/=1)<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+0.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+0.9375:7.5625*(b-=2.625/2.75)*b+0.984375};ig.Tween.Easing.Bounce.EaseInOut=function(b){return 0.5>b?0.5*ig.Tween.Easing.Bounce.EaseIn(2*b):0.5*ig.Tween.Easing.Bounce.EaseOut(2*b-1)+0.5};ig.Tween.Interpolation={Linear:function(b,c){var d=b.length-1,e=d*c,f=Math.floor(e),g=ig.Tween.Interpolation.Utils.Linear;
return 0>c?g(b[0],b[1],e):1<c?g(b[d],b[d-1],d-e):g(b[f],b[f+1>d?d:f+1],e-f)}}});ig.baked=!0;
ig.module("plugins.patches.entity-patch").requires("impact.entity").defines(function(){ig.Entity.inject({handleMovementTrace:function(b){this.standing=!1;b.collision.y&&(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0));b.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>this.minBounceVelocity?this.vel.x*-this.bounciness:0);if(b.collision.slope){var c=b.collision.slope;if(0<this.bounciness){var d=
this.vel.x*c.nx+this.vel.y*c.ny;this.vel.x=(this.vel.x-2*c.nx*d)*this.bounciness;this.vel.y=(this.vel.y-2*c.ny*d)*this.bounciness}else d=(this.vel.x*c.x+this.vel.y*c.y)/(c.x*c.x+c.y*c.y),this.vel.x=c.x*d,this.vel.y=c.y*d,c=Math.atan2(c.x,c.y),c>this.slopeStanding.min&&c<this.slopeStanding.max&&(this.standing=!0)}this.pos.x=b.pos.x;this.pos.y=b.pos.y},update:function(){this.parent();null!==this.clickableLayer&&"undefined"!==typeof this.clickableLayer&&null!==this.clickableLayer.update&&"function"===
typeof this.clickableLayer.update&&this.clickableLayer.update(this.pos.x,this.pos.y,this.size.x,this.size.y)}})});ig.baked=!0;
ig.module("plugins.tweens-handler").requires("impact.entity","plugins.tween","plugins.patches.entity-patch").defines(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(b){for(var d=0;d<this.length;++d)if(this[d]===b)return d;return-1});ig.TweensHandler=ig.Class.extend({_tweens:[],_systemPausedTweens:[],init:function(){},getAll:function(){return this._tweens},removeAll:function(){this._tweens=[]},add:function(b){this._tweens.push(b)},remove:function(b){b=this._tweens.indexOf(b);
-1!==b&&this._tweens.splice(b,1)},onSystemPause:function(){if(0===this._tweens.length)return!1;for(var b=0,d=null;b<this._tweens.length;)d=this._tweens[b],d._isPlaying&&(this._systemPausedTweens.push(d),d.pause()),b++;return!0},onSystemResume:function(){if(0===this._systemPausedTweens.length)return!1;for(var b=0;b<this._systemPausedTweens.length;)this._systemPausedTweens[b].resume(),b++;this._systemPausedTweens=[];return!0},update:function(b,d){if(0===this._tweens.length)return!1;var e=0;for(b=void 0!==
b?b:ig.game.tweens.now();e<this._tweens.length;)this._tweens[e].update(b)||d?e++:this._tweens.splice(e,1);return!0},now:function(){return Date.now()}});ig.TweenDef=ig.Class.extend({_ent:null,_valuesStart:{},_valuesEnd:{},_valuesStartRepeat:{},_duration:1E3,_repeat:0,_yoyo:!1,_isPlaying:!1,_reversed:!1,_delayTime:0,_startTime:null,_pauseTime:null,_easingFunction:ig.Tween.Easing.Linear.EaseNone,_interpolationFunction:ig.Tween.Interpolation.Linear,_chainedTweens:[],_onStartCallback:null,_onStartCallbackFired:!1,
_onUpdateCallback:null,_onCompleteCallback:null,_onStopCallback:null,_onPauseCallback:null,_onResumeCallback:null,_currentElapsed:0,init:function(b){this._object=b},to:function(b,d){this._valuesEnd=b;void 0!==d&&(this._duration=d);return this},start:function(b){if(this._isPlaying)return this;ig.game.tweens.add(this);this._isPlaying=!0;this._onStartCallbackFired=!1;this._startTime=void 0!==b?b:ig.game.tweens.now();this._startTime+=this._delayTime;for(var d in this._valuesEnd){if(this._valuesEnd[d]instanceof
Array){if(0===this._valuesEnd[d].length)continue;this._valuesEnd[d]=[this._object[d]].concat(this._valuesEnd[d])}void 0!==this._object[d]&&(this._valuesStart[d]=this._object[d],!1===this._valuesStart[d]instanceof Array&&(this._valuesStart[d]*=1),this._valuesStartRepeat[d]=this._valuesStart[d]||0)}return this},stop:function(){if(!this._isPlaying)return this;ig.game.tweens.remove(this);this._isPlaying=!1;null!==this._onStopCallback&&this._onStopCallback.call(this._object,this._object);this.stopChainedTweens();
return this},pause:function(){if(!this._isPlaying)return this;ig.game.tweens.remove(this);this._isPlaying=!1;this._pauseTime=ig.game.tweens.now();null!==this._onPauseCallback&&this._onPauseCallback.call(this._object,this._object);return this},resume:function(){if(this._isPlaying||!this._pauseTime)return this;var b=ig.game.tweens.now()-this._pauseTime;this._startTime+=b;ig.game.tweens.add(this);this._isPlaying=!0;null!==this._onResumeCallback&&this._onResumeCallback.call(this._object,this._object);
this._pauseTime=null;return this},end:function(){this.update(this._startTime+this._duration);return this},stopChainedTweens:function(){for(var b=0,d=this._chainedTweens.length;b<d;b++)this._chainedTweens[b].stop()},delay:function(b){this._delayTime=b;return this},repeat:function(b){this._repeat=b;return this},repeatDelay:function(b){this._repeatDelayTime=b;return this},yoyo:function(b){this._yoyo=b;return this},easing:function(b){this._easingFunction=b;return this},interpolation:function(b){this._interpolationFunction=
b;return this},chain:function(){this._chainedTweens=arguments;return this},onStart:function(b){this._onStartCallback=b;return this},onUpdate:function(b){this._onUpdateCallback=b;return this},onComplete:function(b){this._onCompleteCallback=b;return this},onStop:function(b){this._onStopCallback=b;return this},onPause:function(b){this._onPauseCallback=b;return this},onResume:function(b){this._onResumeCallback=b;return this},update:function(b){var d,e,f;if(b<this._startTime)return!0;!1===this._onStartCallbackFired&&
(null!==this._onStartCallback&&this._onStartCallback.call(this._object,this._object),this._onStartCallbackFired=!0);e=(b-this._startTime)/this._duration;this._currentElapsed=e=1<e?1:e;f=this._easingFunction(e);for(d in this._valuesEnd)if(void 0!==this._valuesStart[d]){var g=this._valuesStart[d]||0,l=this._valuesEnd[d];l instanceof Array?this._object[d]=this._interpolationFunction(l,f):("string"===typeof l&&(l="+"===l.charAt(0)||"-"===l.charAt(0)?g+parseFloat(l):parseFloat(l)),"number"===typeof l&&
(this._object[d]=g+(l-g)*f))}null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._object,this._object,f);if(1===e)if(0<this._repeat||0>this._repeat){isFinite(this._repeat)&&0<this._repeat&&this._repeat--;for(d in this._valuesStartRepeat)"string"===typeof this._valuesEnd[d]&&(this._valuesStartRepeat[d]=_valuesStartRepeat[d]+parseFloat(_valuesEnd[d])),this._yoyo&&(e=this._valuesStartRepeat[d],this._valuesStartRepeat[d]=this._valuesEnd[d],this._valuesEnd[d]=e),this._valuesStart[d]=this._valuesStartRepeat[d];
this._yoyo&&(this._reversed=!this._reversed);this._startTime=void 0!==this._repeatDelayTime?b+this._repeatDelayTime:b+this._delayTime}else{null!==this._onCompleteCallback&&this._onCompleteCallback.call(this._object,this._object);b=0;for(d=this._chainedTweens.length;b<d;b++)this._chainedTweens[b].start(this._startTime+this._duration);return!1}return!0}});var b=[1];ig.Tween.Interpolation={Linear:function(b,d){var e=b.length-1,f=e*d,g=Math.floor(f),l=ig.Tween.Interpolation.Utils.Linear;return 0>d?l(b[0],
b[1],f):1<d?l(b[e],b[e-1],e-f):l(b[g],b[g+1>e?e:g+1],f-g)},Bezier:function(b,d){for(var e=0,f=b.length-1,g=Math.pow,l=ig.Tween.Interpolation.Utils.Bernstein,p=0;p<=f;p++)e+=g(1-d,f-p)*g(d,p)*b[p]*l(f,p);return e},CatmullRom:function(b,d){var e=b.length-1,f=e*d,g=Math.floor(f),l=ig.Tween.Interpolation.Utils.CatmullRom;return b[0]===b[e]?(0>d&&(g=Math.floor(f=e*(1+d))),l(b[(g-1+e)%e],b[g],b[(g+1)%e],b[(g+2)%e],f-g)):0>d?b[0]-(l(b[0],b[0],b[1],b[1],-f)-b[0]):1<d?b[e]-(l(b[e],b[e],b[e-1],b[e-1],f-e)-
b[e]):l(b[g?g-1:0],b[g],b[e<g+1?e:g+1],b[e<g+2?e:g+2],f-g)},Utils:{Linear:function(b,d,e){return(d-b)*e+b},Bernstein:function(b,d){var e=ig.Tween.Interpolation.Utils.Factorial;return e(b)/e(d)/e(b-d)},Factorial:function(c){var d=1;if(b[c])return b[c];for(var e=c;1<e;e--)d*=e;return b[c]=d},CatmullRom:function(b,d,e,f,g){b=0.5*(e-b);f=0.5*(f-d);var l=g*g;return(2*d-2*e+b+f)*g*l+(-3*d+3*e-2*b-f)*l+b*g+d}}}});ig.baked=!0;
ig.module("plugins.url-parameters").defines(function(){ig.UrlParameters=ig.Class.extend({init:function(){switch(getQueryVariable("iphone")){case "true":ig.ua.iPhone=!0,console.log("iPhone mode")}var b=getQueryVariable("webview");if(b)switch(b){case "true":ig.ua.is_uiwebview=!0,console.log("webview mode")}if(b=getQueryVariable("debug"))switch(b){case "true":ig.game.showDebugMenu(),console.log("debug mode")}switch(getQueryVariable("view")){case "stats":ig.game.resetPlayerStats(),ig.game.endGame()}getQueryVariable("ad")}})});
ig.baked=!0;
ig.module("plugins.director").requires("impact.impact").defines(function(){ig.Director=ig.Class.extend({init:function(b,c){this.game=b;this.levels=[];this.currentLevel=0;this.append(c)},loadLevel:function(b){for(var c in ig.sizeHandler.dynamicClickableEntityDivs){var d=ig.domHandler.getElementById("#"+c);ig.domHandler.hide(d)}this.currentLevel=b;this.game.loadLevel(this.levels[b]);return!0},loadLevelWithoutEntities:function(b){this.currentLevel=b;this.game.loadLevelWithoutEntities(this.levels[b]);return!0},
append:function(b){newLevels=[];return"object"===typeof b?(b.constructor===[].constructor?newLevels=b:newLevels[0]=b,this.levels=this.levels.concat(newLevels),!0):!1},nextLevel:function(){return this.currentLevel+1<this.levels.length?this.loadLevel(this.currentLevel+1):!1},previousLevel:function(){return 0<=this.currentLevel-1?this.loadLevel(this.currentLevel-1):!1},jumpTo:function(b){var c=null;for(i=0;i<this.levels.length;i++)this.levels[i]==b&&(c=i);return 0<=c?this.loadLevel(c):!1},firstLevel:function(){return this.loadLevel(0)},
lastLevel:function(){return this.loadLevel(this.levels.length-1)},reloadLevel:function(){return this.loadLevel(this.currentLevel)}})});ig.baked=!0;
ig.module("plugins.impact-storage").requires("impact.game").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(b){return null!==this.get(b)},initUnset:function(b,c){null===this.get(b)&&this.set(b,c)},get:function(b){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(b))}catch(c){return window.localStorage.getItem(b)}},
getInt:function(b){return~~this.get(b)},getFloat:function(b){return parseFloat(this.get(b))},getBool:function(b){return!!this.get(b)},key:function(b){return this.isCapable()?window.localStorage.key(b):null},set:function(b,c){if(!this.isCapable())return null;try{window.localStorage.setItem(b,JSON.stringify(c))}catch(d){console.log(d)}},setHighest:function(b,c){c>this.getFloat(b)&&this.set(b,c)},remove:function(b){if(!this.isCapable())return null;window.localStorage.removeItem(b)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;
ig.module("plugins.fullscreen").requires("impact.entity","plugins.handlers.size-handler","plugins.director").defines(function(){ig.Fullscreen={version:"1.0.0",enableFullscreenButton:!0,_isEnabled:"notChecked",isEnabled:function(){"notChecked"==this._isEnabled&&(this._isEnabled=document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled?!0:!1);return this._isEnabled},isFullscreen:function(){return ig.Fullscreen.isEnabled()&&(document.fullscreenElement||
document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)?!0:!1},toggleFullscreen:function(){ig.Fullscreen.isFullscreen()?ig.Fullscreen.exitFullscreen():ig.Fullscreen.requestFullscreen();ig.sizeHandler.orientationDelayHandler();if(ig&&ig.visibilityHandler)ig.visibilityHandler.onChange("focus");try{ig.soundHandler.unlockWebAudio()}catch(b){}},requestFullscreen:function(){var b=document.documentElement;b.requestFullscreen?b.requestFullscreen():b.webkitRequestFullscreen?
b.webkitRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.msRequestFullscreen?b.msRequestFullscreen():console.log("no request fullscreen method available")},exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():console.log("no exit fullscreen method available")},divs:{}};ig.Director.inject({loadLevel:function(b){var c=
ig.Fullscreen.divs,d;for(d in c)c=ig.domHandler.getElementById("#"+d),ig.domHandler.hide(c);return this.parent(b)}});ig.SizeHandler.inject({resize:function(){this.parent();var b=ig.Fullscreen.divs,c;for(c in b){var d=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y),e=ig.domHandler.getElementById("#"+c),f=b[c].entity_pos_x,g=b[c].entity_pos_y,l=b[c].width,p=b[c].height,j=ig.domHandler.getElementById("#canvas"),q=ig.domHandler.getOffsets(j);ig.ua.mobile?(j=q.left,
q=q.top,ig.sizeHandler.disableStretchToFitOnMobileFlag?(f=Math.floor(j+f*ig.sizeHandler.scaleRatioMultiplier.x)+"px",g=Math.floor(q+g*ig.sizeHandler.scaleRatioMultiplier.y)+"px",l=Math.floor(l*ig.sizeHandler.scaleRatioMultiplier.x)+"px",p=Math.floor(p*ig.sizeHandler.scaleRatioMultiplier.y)+"px"):(f=Math.floor(f*ig.sizeHandler.sizeRatio.x)+"px",g=Math.floor(g*ig.sizeHandler.sizeRatio.y)+"px",l=Math.floor(l*ig.sizeHandler.sizeRatio.x)+"px",p=Math.floor(p*ig.sizeHandler.sizeRatio.y)+"px")):(j=q.left,
q=q.top,f=Math.floor(j+f*d)+"px",g=Math.floor(q+g*d)+"px",l=Math.floor(l*d)+"px",p=Math.floor(p*d)+"px");ig.domHandler.css(e,{"float":"left",position:"absolute",left:f,top:g,width:l,height:p,"z-index":3});b[c]["font-size"]&&ig.domHandler.css(e,{"font-size":b[c]["font-size"]*d+"px"})}}});ig.FullscreenButton=ig.Entity.extend({enterImage:null,exitImage:null,isReady:!1,zIndex:999999,identifier:null,prevPos:{x:0,y:0},invisImagePath:"media/graphics/misc/invisible.png",init:function(b,c,d){this.parent(b,
c,d);ig.Fullscreen.isEnabled()&&ig.Fullscreen.enableFullscreenButton?this.enterImage.loaded?this.initSize():this.enterImage.loadCallback=function(){this.initSize()}.bind(this):this.kill()},kill:function(){this.parent()},destroy:function(){this.parent();console.log("destroy")},initSize:function(){this.size.x=this.enterImage.width;this.size.y=this.enterImage.height;this.createClickableLayer();this.isReady=!0},createClickableLayer:function(){this.identifier="fullscreen-button-layer";var b=ig.domHandler.getElementById("#"+
this.identifier);b?(ig.domHandler.show(b),ig.domHandler.attr(b,"onclick","ig.Fullscreen.toggleFullscreen()")):this.createClickableOutboundLayer()},update:function(b,c){b=this.pos.x;c=this.pos.y;if(this.isReady&&!(this.prevPos.x===b&&this.prevPos.y===c)){ig.Fullscreen.divs[this.identifier]={};ig.Fullscreen.divs[this.identifier].width=this.size.x;ig.Fullscreen.divs[this.identifier].height=this.size.y;ig.Fullscreen.divs[this.identifier].entity_pos_x=this.pos.x;ig.Fullscreen.divs[this.identifier].entity_pos_y=
this.pos.y;var d=ig.domHandler.getElementById("#"+this.identifier);this.updateCSS(d);this.prevPos.x=b;this.prevPos.y=c}},draw:function(){this.isReady&&(ig.Fullscreen.isFullscreen()?this.exitImage.draw(this.pos.x,this.pos.y):this.enterImage.draw(this.pos.x,this.pos.y))},createClickableOutboundLayer:function(){var b=this.identifier,c=this.invisImagePath,d=ig.domHandler.create("div");ig.domHandler.attr(d,"id",b);ig.domHandler.attr(d,"onclick","ig.Fullscreen.toggleFullscreen()");var e=ig.domHandler.create("a"),
f=ig.domHandler.create("img");ig.domHandler.css(f,{width:"100%",height:"100%"});ig.domHandler.attr(f,"src",c);ig.domHandler.addEvent(d,"mousemove",ig.input.mousemove.bind(ig.input),!1);ig.domHandler.appendChild(e,f);ig.domHandler.appendChild(d,e);ig.domHandler.appendToBody(d);ig.Fullscreen.divs[b]={};ig.Fullscreen.divs[b].width=this.size.x;ig.Fullscreen.divs[b].height=this.size.y;ig.Fullscreen.divs[b].entity_pos_x=this.pos.x;ig.Fullscreen.divs[b].entity_pos_y=this.pos.y;this.updateCSS(d)},updateCSS:function(b){var c=
Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);if(ig.ua.mobile){var d=ig.domHandler.getElementById("#canvas"),d=ig.domHandler.getOffsets(d),e=d.left,f=d.top;console.log(d.left);ig.sizeHandler.disableStretchToFitOnMobileFlag?(d=Math.floor(e+this.pos.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px",f=Math.floor(f+this.pos.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px",e=Math.floor(this.size.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px",c=Math.floor(this.size.y*ig.sizeHandler.scaleRatioMultiplier.y)+
"px"):(d=Math.floor(this.pos.x*ig.sizeHandler.sizeRatio.x)+"px",f=Math.floor(this.pos.y*ig.sizeHandler.sizeRatio.y)+"px",e=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px",c=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px")}else d=ig.domHandler.getElementById("#canvas"),d=ig.domHandler.getOffsets(d),e=d.left,f=d.top,ig.sizeHandler.enableStretchToFitOnDesktopFlag?(d=Math.floor(e+this.pos.x*ig.sizeHandler.sizeRatio.x)+"px",f=Math.floor(f+this.pos.y*ig.sizeHandler.sizeRatio.y)+"px",e=Math.floor(this.size.x*
ig.sizeHandler.sizeRatio.x)+"px",c=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px"):(d=Math.floor(e+this.pos.x*c)+"px",f=Math.floor(f+this.pos.y*c)+"px",e=Math.floor(this.size.x*c)+"px",c=Math.floor(this.size.y*c)+"px");ig.domHandler.css(b,{"float":"left",position:"absolute",left:d,top:f,width:e,height:c,"z-index":3})}})});ig.baked=!0;
ig.module("plugins.responsive.responsive-utils").requires("impact.system").defines(function(){ig.responsive={width:0,height:0,halfWidth:0,halfHeight:0,originalWidth:0,originalHeight:0,fillScale:1,scaleX:1,scaleY:1,toAnchor:function(b,c,d){switch(d){case "top-left":case "left-top":return this.toAnchorTopLeft(b,c);case "top-center":case "center-top":case "top":return this.toAnchorTopCenter(b,c);case "top-right":case "right-top":return this.toAnchorTopRight(b,c);case "left-middle":case "middle-left":case "left":return this.toAnchorLeftMiddle(b,
c);case "center-middle":case "middle-center":case "middle":case "center":return this.toAnchorCenterMiddle(b,c);case "right-middle":case "middle-right":case "right":return this.toAnchorRightMiddle(b,c);case "bottom-left":case "left-bottom":return this.toAnchorBottomLeft(b,c);case "bottom-center":case "center-bottom":case "bottom":return this.toAnchorBottomCenter(b,c);case "bottom-right":case "right-bottom":return this.toAnchorBottomRight(b,c);default:return this.toAnchorDefault(b,c)}},toAnchorDefault:function(b,
c){return{x:b+(this.width-this.originalWidth)/2,y:c+(this.height-this.originalHeight)/2}},toAnchorCenterMiddle:function(b,c){return{x:b+this.halfWidth,y:c+this.halfHeight}},toAnchorLeftMiddle:function(b,c){return{x:b,y:c+this.halfHeight}},toAnchorTopCenter:function(b,c){return{x:b+this.halfWidth,y:c}},toAnchorRightMiddle:function(b,c){return{x:b+this.width,y:c+this.halfHeight}},toAnchorBottomCenter:function(b,c){return{x:b+this.halfWidth,y:c+this.height}},toAnchorTopLeft:function(b,c){return{x:b,
y:c}},toAnchorBottomLeft:function(b,c){return{x:b,y:c+this.height}},toAnchorTopRight:function(b,c){return{x:b+this.width,y:c}},toAnchorBottomRight:function(b,c){return{x:b+this.width,y:c+this.height}},fromPos:function(){},fromPosDefault:function(){},fromPosCenterMiddle:function(){},fromPosLeftMiddle:function(){},fromPosTopCenter:function(){},fromPosRightMiddle:function(){},fromPosBottomCenter:function(){},fromPosTopLeft:function(){},fromPosBottomLeft:function(){},fromPosTopRight:function(){},fromPosBottomRight:function(){},
drawScaledImage:function(b,c,d,e,f,g,l){g||(g=0);l||(l=0);var p=ig.system.context;p.save();p.translate(c,d);(1!=e||1!=f)&&p.scale(e,f);b.draw(-b.width*g,-b.height*l);p.restore()}}});ig.baked=!0;
ig.module("plugins.responsive.responsive-plugin").requires("impact.system","impact.entity","plugins.handlers.size-handler","plugins.responsive.responsive-utils").defines(function(){console.log("Responsive Plugin 1.4");ig.SizeHandler.inject({resize:function(){this.parent()},sizeCalcs:function(){this.originalResolution||(this.originalResolution=new Vector2(this.desktop.actualResolution.x,this.desktop.actualResolution.y),ig.responsive.originalWidth=this.desktop.actualResolution.x,ig.responsive.originalHeight=
this.desktop.actualResolution.y);var b=window.innerWidth,c=window.innerHeight,d=b/c,e=this.originalResolution.x/this.originalResolution.y,f=0,g=0;this.windowSize=new Vector2(b,c);d<e?(f=this.originalResolution.x,g=f/d,ig.responsive.scaleX=1,ig.responsive.scaleY=g/this.originalResolution.y):(g=this.originalResolution.y,f=g*d,ig.responsive.scaleX=f/this.originalResolution.x,ig.responsive.scaleY=1);this.scaleRatioMultiplier=new Vector2(b/f,c/g);this.desktop.actualResolution=new Vector2(f,g);this.mobile.actualResolution=
new Vector2(f,g);this.desktop.actualSize=new Vector2(b,c);this.mobile.actualSize=new Vector2(b,c);ig.responsive.width=f;ig.responsive.height=g;ig.responsive.halfWidth=f/2;ig.responsive.halfHeight=g/2;ig.responsive.fillScale=Math.max(ig.responsive.scaleX,ig.responsive.scaleY)},resizeLayers:function(){ig.system.resize(ig.sizeHandler.desktop.actualResolution.x,ig.sizeHandler.desktop.actualResolution.y);for(var b=0;b<this.coreDivsToResize.length;b++){var c=ig.domHandler.getElementById(this.coreDivsToResize[b]),
d=Math.floor(ig.sizeHandler.windowSize.x/2-ig.sizeHandler.desktop.actualSize.x/2),e=Math.floor(ig.sizeHandler.windowSize.y/2-ig.sizeHandler.desktop.actualSize.y/2);0>d&&(d=0);0>e&&(e=0);ig.domHandler.resizeOffset(c,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y),d,e)}for(var f in this.adsToResize)b=ig.domHandler.getElementById("#"+f),c=ig.domHandler.getElementById("#"+f+"-Box"),d=(window.innerWidth-this.adsToResize[f]["box-width"])/2+"px",e=(window.innerHeight-
this.adsToResize[f]["box-height"])/2+"px",b&&ig.domHandler.css(b,{width:window.innerWidth,height:window.innerHeight}),c&&ig.domHandler.css(c,{left:d,top:e});b=ig.domHandler.getElementById("#canvas");c=ig.domHandler.getOffsets(b);b=c.left;c=c.top;d=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);for(f in this.dynamicClickableEntityDivs)e=ig.domHandler.getElementById("#"+f),ig.domHandler.css(e,{"float":"left",position:"absolute",left:Math.floor(b+this.dynamicClickableEntityDivs[f].entity_pos_x*
this.scaleRatioMultiplier.x)+"px",top:Math.floor(c+this.dynamicClickableEntityDivs[f].entity_pos_y*this.scaleRatioMultiplier.y)+"px",width:Math.floor(this.dynamicClickableEntityDivs[f].width*this.scaleRatioMultiplier.x)+"px",height:Math.floor(this.dynamicClickableEntityDivs[f].height*this.scaleRatioMultiplier.y)+"px","z-index":3}),this.dynamicClickableEntityDivs[f]["font-size"]&&ig.domHandler.css(e,{"font-size":this.dynamicClickableEntityDivs[f]["font-size"]*d+"px"});$("#ajaxbar").width(this.windowSize.x);
$("#ajaxbar").height(this.windowSize.y)},reorient:function(){ig.ua.mobile?(this.resize(),this.resizeAds()):this.resize();("undefined"!==typeof BABYLON||window.BABYLON)&&this.resizeBabylon();ig.game&&(ig.game.update(),ig.game.draw())},resizeBabylon:function(){var b=window.innerWidth,c=window.innerHeight,d=b/c,e=ig.responsive.originalWidth,f=ig.responsive.originalHeight,g=e/f,l=Math.max(e,f);ig.ua.mobile&&(l=640);minSize=Math.min(e,f);d>g?(c>f&&(c=f),b=Math.floor(window.innerWidth/window.innerHeight*
c),b>l&&(b=l),c=Math.floor(window.innerHeight/window.innerWidth*b)):(b>e&&(b=e),c=Math.floor(window.innerHeight/window.innerWidth*b),c>l&&(c=l),b=Math.floor(window.innerWidth/window.innerHeight*c));e=d=1;window.innerWidth>l&&(d=window.innerWidth/l);window.innerHeight>l&&(e=window.innerHeight/l);wgl.system.engine.setSize(b,c);wgl.system.engine.resize();wgl.system.engine.setHardwareScalingLevel(Math.max(d,e));ig.gameScene.zoomFactor=1;ig.ua.mobile&&minSize<l&&(ig.gameScene.zoomFactor=l/minSize);ig.wglW=
b;ig.wglH=c;ig.wglInnerW=window.innerWidth;ig.wglInnerH=window.innerHeight;console.log("babylon renderSize : ",wgl.system.engine.getRenderWidth(),wgl.system.engine.getRenderHeight(),"hwScalingLevel : ",wgl.system.engine.getHardwareScalingLevel())}});ig.Entity.inject({init:function(b,c,d){this.parent(b,c,d);!this.anchorType&&!d.anchorType&&(this.anchorType="none");this.anchoredPositionX=b;this.anchoredPositionY=c},setAnchoredPosition:function(b,c,d){d||(d="default");this.anchorType=d;this.anchoredPositionX=
b;this.anchoredPositionY=c},update:function(){this.parent();if(""!=this.anchorType&&"none"!=this.anchorType){var b=ig.responsive.toAnchor(this.anchoredPositionX,this.anchoredPositionY,this.anchorType);this.pos.x=b.x;this.pos.y=b.y}}})});this.START_BRANDING_SPLASH;ig.baked=!0;
ig.module("plugins.branding.splash").requires("impact.impact","impact.entity").defines(function(){ig.BrandingSplash=ig.Class.extend({init:function(){ig.game.spawnEntity(EntityBranding,0,0);console.log("spawn branding")}});EntityBranding=ig.Entity.extend({autoUpdateScale:!1,gravityFactor:0,size:{x:32,y:32},splash:new ig.Image("branding/splash1.png"),init:function(b,c,d){this.parent(b,c,d);320>=ig.system.width?(this.size.x=320,this.size.y=200):(this.size.x=480,this.size.y=240);this.pos.x=(ig.system.width-
this.size.x)/2;this.pos.y=-this.size.y-200;this.endPosY=(ig.system.height-this.size.y)/2;b=this.tween({pos:{y:this.endPosY}},0.5,{easing:ig.Tween.Easing.Bounce.EaseIn});c=this.tween({},2.5,{onComplete:function(){ig.game.director.loadLevel(ig.game.director.currentLevel)}});b.chain(c);b.start();this.currentAnim=this.anims.idle},createClickableLayer:function(){console.log("Build clickable layer");this.checkClickableLayer("branding-splash",_SETTINGS.Branding.Logo.Link,_SETTINGS.Branding.Logo.NewWindow)},
doesClickableLayerExist:function(b){for(k in dynamicClickableEntityDivs)if(k==b)return!0;return!1},checkClickableLayer:function(b,c,d){"undefined"==typeof wm&&(this.doesClickableLayerExist(b)?(ig.game.showOverlay([b]),$("#"+b).find("[href]").attr("href",c)):this.createClickableOutboundLayer(b,c,"media/graphics/misc/invisible.png",d))},createClickableOutboundLayer:function(b,c,d,e){var f=ig.$new("div");f.id=b;document.body.appendChild(f);f=$("#"+f.id);f.css("float","left");f.css("position","absolute");
if(ig.ua.mobile){var g=window.innerHeight/mobileHeight,l=window.innerWidth/mobileWidth;f.css("left",this.pos.x*l);f.css("top",this.pos.y*g);f.css("width",this.size.x*l);f.css("height",this.size.y*g)}else g=w/2-destW/2,l=h/2-destH/2,console.log(g,l),f.css("left",g+this.pos.x*multiplier),f.css("top",l+this.pos.y*multiplier),f.css("width",this.size.x*multiplier),f.css("height",this.size.y*multiplier);e?f.html("<a target='_blank' href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>"):f.html("<a href='"+
c+"'><img style='width:100%;height:100%' src='"+d+"'></a>");dynamicClickableEntityDivs[b]={};dynamicClickableEntityDivs[b].width=this.size.x*multiplier;dynamicClickableEntityDivs[b].height=this.size.y*multiplier;dynamicClickableEntityDivs[b].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[b].entity_pos_y=this.pos.y},draw:function(){ig.system.context.fillStyle="#ffffff";ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);ig.system.context.fillStyle="#000";ig.system.context.font="12px Arial";
ig.system.context.textAlign="left";320>=ig.system.width?ig.system.context.fillText("powered by MarketJS.com",ig.system.width-150,ig.system.height-15):ig.system.context.fillText("powered by MarketJS.com",ig.system.width-160,ig.system.height-15);this.parent();this.splash&&ig.system.context.drawImage(this.splash.data,0,0,this.splash.data.width,this.splash.data.height,this.pos.x,this.pos.y,this.size.x,this.size.y)}})});this.END_BRANDING_SPLASH;ig.baked=!0;
ig.module("game.entities.buttons.button").requires("impact.entity","plugins.data.vector").defines(function(){EntityButton=ig.Entity.extend({collides:ig.Entity.COLLIDES.NEVER,type:ig.Entity.TYPE.A,size:new Vector2(48,48),fillColor:null,zIndex:95E3,init:function(b,c,d){this.parent(b,c,d);!ig.global.wm&&!isNaN(d.zIndex)&&(this.zIndex=d.zIndex);b=Math.floor(256*Math.random());c=Math.floor(256*Math.random());d=Math.floor(256*Math.random());this.fillColor="rgba("+b+","+d+","+c+",1)"},clicked:function(){console.warn("no implementation on clicked()")},
clicking:function(){console.warn("no implementation on clicking()")},released:function(){console.warn("no implementation on released()")}})});ig.baked=!0;
ig.module("plugins.clickable-div-layer").requires("plugins.data.vector").defines(function(){ClickableDivLayer=ig.Class.extend({version:"1.0.0",pos:new Vector2(0,0),size:new Vector2(0,0),identifier:null,invisImagePath:"media/graphics/misc/invisible.png",init:function(b){this.pos=new Vector2(b.pos.x,b.pos.y);this.size=new Vector2(b.size.x,b.size.y);var c="more-games",d="https://www.marketjs.com",e=!1;b.div_layer_name&&(c=b.div_layer_name);b.link&&(d=b.link);b.newWindow&&(e=b.newWindow);this.createClickableLayer(c,
d,e)},createClickableLayer:function(b,c,d){this.identifier=b;var e=ig.domHandler.getElementById("#"+b);e?(ig.domHandler.show(e),ig.domHandler.attr(e,"href",c)):this.createClickableOutboundLayer(b,c,this.invisImagePath,d)},update:function(b,c,d,e){this.pos.x===b&&this.pos.y===c&&this.size.x===d&&this.size.y===e||(this.pos.x=b,this.pos.y=c,this.size.x=d,this.size.y=e,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier]={},ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].width=this.size.x,
ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].height=this.size.y,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_x=this.pos.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_y=this.pos.y,b=ig.domHandler.getElementById("#"+this.identifier),this.updateCSS(b))},createClickableOutboundLayer:function(b,c,d,e){var f=ig.domHandler.create("div");ig.domHandler.attr(f,"id",b);var g=ig.domHandler.create("a");ig.domHandler.addEvent(f,"mousedown",function(b){b.preventDefault()});
e?(ig.domHandler.attr(g,"href",c),ig.domHandler.attr(g,"target","_blank")):ig.domHandler.attr(g,"href",c);c=ig.domHandler.create("img");ig.domHandler.css(c,{width:"100%",height:"100%"});ig.domHandler.attr(c,"src",d);ig.domHandler.addEvent(f,"mousemove",ig.input.mousemove.bind(ig.input),!1);ig.domHandler.appendChild(g,c);ig.domHandler.appendChild(f,g);ig.domHandler.appendToBody(f);ig.sizeHandler.dynamicClickableEntityDivs[b]={};ig.sizeHandler.dynamicClickableEntityDivs[b].width=this.size.x;ig.sizeHandler.dynamicClickableEntityDivs[b].height=
this.size.y;ig.sizeHandler.dynamicClickableEntityDivs[b].entity_pos_x=this.pos.x;ig.sizeHandler.dynamicClickableEntityDivs[b].entity_pos_y=this.pos.y;this.updateCSS(f)},updateCSS:function(b){var c=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);if(ig.ua.mobile){var d=ig.domHandler.getElementById("#canvas"),e=ig.domHandler.getOffsets(d),d=e.left,e=e.top;if(ig.sizeHandler.disableStretchToFitOnMobileFlag)var d=Math.floor(d+this.pos.x*ig.sizeHandler.scaleRatioMultiplier.x)+
"px",e=Math.floor(e+this.pos.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px",f=Math.floor(this.size.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px",c=Math.floor(this.size.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px";else d=Math.floor(this.pos.x*ig.sizeHandler.sizeRatio.x)+"px",e=Math.floor(this.pos.y*ig.sizeHandler.sizeRatio.y)+"px",f=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px",c=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px"}else d=ig.domHandler.getElementById("#canvas"),e=ig.domHandler.getOffsets(d),
d=e.left,e=e.top,ig.sizeHandler.enableStretchToFitOnDesktopFlag?(d=Math.floor(d+this.pos.x*ig.sizeHandler.sizeRatio.x)+"px",e=Math.floor(e+this.pos.y*ig.sizeHandler.sizeRatio.y)+"px",f=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px",c=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px"):(d=Math.floor(d+this.pos.x*c)+"px",e=Math.floor(e+this.pos.y*c)+"px",f=Math.floor(this.size.x*c)+"px",c=Math.floor(this.size.y*c)+"px");ig.domHandler.css(b,{"float":"left",position:"absolute",left:d,top:e,
width:f,height:c,"z-index":3})}})});ig.baked=!0;
ig.module("game.entities.buttons.button-branding-logo").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonBrandingLogo=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,logo:new ig.AnimationSheet("branding/logo.png",_SETTINGS.Branding.Logo.Width,_SETTINGS.Branding.Logo.Height),zIndex:10001,size:{x:64,y:66},clickableLayer:null,link:null,newWindow:!1,div_layer_name:"branding-logo",name:"brandinglogo",init:function(b,c,d){this.parent(b,c,d);
if(!ig.global.wm){if("undefined"==typeof wm)if(_SETTINGS.Branding.Logo.Enabled)this.size.x=_SETTINGS.Branding.Logo.Width,this.size.y=_SETTINGS.Branding.Logo.Height,this.anims.idle=new ig.Animation(this.logo,0,[0],!0),this.currentAnim=this.anims.idle,d&&d.centralize&&(this.pos.x=ig.system.width/2-this.size.x/2,console.log("centralize true ... centering branded logo ...")),_SETTINGS.Branding.Logo.LinkEnabled&&(this.link=_SETTINGS.Branding.Logo.Link,this.newWindow=_SETTINGS.Branding.Logo.NewWindow,this.clickableLayer=
new ClickableDivLayer(this));else{this.kill();return}this.div_layer_name=d.div_layer_name?d.div_layer_name:"branding-logo"}},show:function(){var b=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(b)},hide:function(){var b=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(b)},clicked:function(){},clicking:function(){},released:function(){}})});ig.baked=!0;
ig.module("game.entities.branding-logo-placeholder").requires("impact.entity","game.entities.buttons.button-branding-logo").defines(function(){EntityBrandingLogoPlaceholder=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32},_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",init:function(b,c,d){this.parent(b,c,d);if(d)switch(console.log("settings found ... using that div layer name"),b=d.div_layer_name,console.log("settings.centralize:",d.centralize),d.centralize){case "true":console.log("centralize true");
centralize=!0;break;case "false":console.log("centralize false");centralize=!1;break;default:console.log("default ... centralize false"),centralize=!1}else b="branding-logo",centralize=!1;if("undefined"==typeof wm){if(_SETTINGS.Branding.Logo.Enabled)try{ig.game.spawnEntity(EntityButtonBrandingLogo,this.pos.x,this.pos.y,{div_layer_name:b,centralize:centralize})}catch(e){console.log(e)}this.kill()}}})});ig.baked=!0;
ig.module("game.entities.pointer").requires("impact.entity").defines(function(){EntityPointer=ig.Entity.extend({checkAgainst:ig.Entity.TYPE.BOTH,size:new Vector2(1,1),isFirstPressed:!1,isPressed:!1,isReleased:!1,isHovering:!1,hoveringItem:null,objectArray:[],clickedObjectList:[],ignorePause:!0,zIndex:5500,check:function(b){this.objectArray.push(b)},clickObject:function(b){this.isFirstPressed&&"function"==typeof b.clicked&&(b.clicked(),this.addToClickedObjectList(b));this.isPressed&&!this.isReleased&&
"function"==typeof b.clicking&&b.clicking();this.isReleased&&"function"==typeof b.released&&(b.released(),this.removeFromClickedObjectList(b))},refreshPos:function(){this.pos=ig.game.io.getClickPos()},update:function(){this.parent();this.refreshPos();var b=null,c=-1;for(a=this.objectArray.length-1;-1<a;a--)this.objectArray[a].zIndex>c&&(c=this.objectArray[a].zIndex,b=this.objectArray[a]);if(null!=b)null!=this.hoveringItem?this.hoveringItem!=b&&("function"==typeof this.hoveringItem.leave&&this.hoveringItem.leave(),
"function"==typeof b.over&&b.over()):"function"==typeof b.over&&b.over(),this.hoveringItem=b,this.clickObject(b),this.objectArray=[];else if(null!=this.hoveringItem&&"function"==typeof this.hoveringItem.leave&&(this.hoveringItem.leave(),this.hoveringItem=null),this.isReleased){for(b=0;b<this.clickedObjectList.length;b++)c=this.clickedObjectList[b],"function"==typeof c.releasedOutside&&c.releasedOutside();this.clickedObjectList=[]}this.isFirstPressed=ig.input.pressed("click");this.isReleased=ig.input.released("click");
this.isPressed=ig.input.state("click")},addToClickedObjectList:function(b){this.clickedObjectList.push(b)},removeFromClickedObjectList:function(b){for(var c=[],d=0;d<this.clickedObjectList.length;d++){var e=this.clickedObjectList[d];e!=b&&c.push(e)}this.clickedObjectList=c}})});ig.baked=!0;
ig.module("game.entities.pointer-selector").requires("game.entities.pointer").defines(function(){EntityPointerSelector=EntityPointer.extend({zIndex:1E3,_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",size:{x:20,y:20},init:function(b,c,d){this.parent(b,c,d)}})});ig.baked=!0;
ig.module("game.entities.select").requires("impact.entity").defines(function(){EntitySelect=ig.Entity.extend({type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,canSelect:!1,canSelectTimerDuration:0.35,zIndex:99999,isHovering:!1,isSelected:!1,init:function(b,c,d){this.parent(b,c,d);this.canSelectTimer=new ig.Timer(this.canSelectTimerDuration)},doesClickableLayerExist:function(b){for(k in dynamicClickableEntityDivs)if(k==b)return!0;return!1},checkClickableLayer:function(b,
c,d){"undefined"==typeof wm&&(this.doesClickableLayerExist(b)?(ig.game.showOverlay([b]),$("#"+b).find("[href]").attr("href",c)):this.createClickableOutboundLayer(b,c,"media/graphics/misc/invisible.png",d))},createClickableOutboundLayer:function(b,c,d,e){var f=ig.$new("div");f.id=b;document.body.appendChild(f);$("#"+f.id).css("float","left");$("#"+f.id).css("width",this.size.x*multiplier);$("#"+f.id).css("height",this.size.y*multiplier);$("#"+f.id).css("position","absolute");var g=w/2-destW/2,l=h/
2-destH/2;w==mobileWidth?($("#"+f.id).css("left",this.pos.x),$("#"+f.id).css("top",this.pos.y)):($("#"+f.id).css("left",g+this.pos.x*multiplier),$("#"+f.id).css("top",l+this.pos.y*multiplier));e?$("#"+f.id).html("<a target='_blank' href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>"):$("#"+f.id).html("<a href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>");dynamicClickableEntityDivs[b]={};dynamicClickableEntityDivs[b].width=$("#"+f.id).width();dynamicClickableEntityDivs[b].height=
$("#"+f.id).height();dynamicClickableEntityDivs[b].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[b].entity_pos_y=this.pos.y},hovered:function(){this.isHovering=!0;this.dehoverOthers()},dehoverOthers:function(){var b=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<b.length;i++)b[i]!=this&&(b[i].isHovering=!1)},deselectOthers:function(){var b=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<b.length;i++)b[i]!=this&&(b[i].isSelected=!1)},update:function(){this.parent();this.canSelectTimer&&0<
this.canSelectTimer.delta()&&(this.canSelect=!0,this.canSelectTimer=null)}})});ig.baked=!0;
ig.module("game.entities.marketjs-splash").requires("impact.entity").defines(function(){EntityMarketJSSplash=ig.Entity.extend({logoImage:new ig.Image("media/graphics/splash/marketjs/logo.png"),letterImage:new ig.Image("media/graphics/splash/marketjs/letter-m.png"),brandingText:new ig.Image("media/graphics/splash/marketjs/branding-text.png"),scale:{x:1,y:1},init:function(){if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.updateScale();this.originX=0;this.logo={scale:0.02,alpha:0,x:-this.logoImage.width/
2,y:-this.logoImage.height/2};var b=this.tween({logo:{scale:1,alpha:1}},0.42,{easing:ig.Tween.Easing.Back.EaseOut,onComplete:function(){ig.soundHandler.sfxPlayer.play("logosplash1")}});this.letterM={scale:0.02,alpha:0,x:-this.letterImage.width/2,y:-this.letterImage.height/2-10};var c=this.tween({letterM:{scale:1,alpha:1}},0.42,{easing:ig.Tween.Easing.Back.EaseOut,onComplete:function(){ig.soundHandler.sfxPlayer.play("logosplash2")}});this.text={alpha:1,x:-this.brandingText.width/2,y:-this.brandingText.height/
2,coverW:2*this.brandingText.width,coverH:2*this.brandingText.height};this.text.originX=-this.brandingText.width/2-270;this.text.cx=-this.text.coverW-260;this.text.cy=-this.brandingText.height;var d=this.tween({originX:-450,logo:{scale:0.82},letterM:{scale:0.82},text:{originX:150}},0.8,{delay:0.45,easing:ig.Tween.Easing.Back.EaseOut}),e=this.tween({logo:{alpha:0},letterM:{alpha:0},text:{alpha:0}},0.9,{delay:0.9,onComplete:function(){this.goToMenu()}.bind(this)});b.chain(c);c.chain(d);d.chain(e);b.start();
ig.soundHandler.sfxPlayer.play("logosplash1")}else this.goToMenu()},goToMenu:function(){ig.soundHandler.sfxPlayer.soundList.logosplash1.mute(!0);ig.soundHandler.sfxPlayer.soundList.logosplash2.mute(!0);ig.soundHandler.bgmPlayer.play("background");ig.game.director.nextLevel();this.kill()},update:function(){if(0<this.tweens.length){for(var b=[],c=0;c<this.tweens.length;c++)this.tweens[c].update(),this.tweens[c].complete||b.push(this.tweens[c]);this.tweens=b}this.updateScale()},draw:function(){var b=
ig.system.context;b.fillStyle="#FFF";b.fillRect(0,0,ig.system.width,ig.system.height);b.save();b.translate(ig.system.width/2,ig.system.height/2);b.scale(this.scale.x,this.scale.y);b.imageSmoothingEnabled=!0;b.globalAlpha=this.text.alpha;this.brandingText.draw(this.text.originX+this.text.x,this.text.y);b.globalAlpha=1;b.fillRect(this.text.cx,this.text.cy,this.originX-this.text.cx,this.text.coverH);b.save();b.globalAlpha=this.logo.alpha;b.scale(this.logo.scale,this.logo.scale);this.logoImage.draw(this.originX+
this.logo.x,this.logo.y);b.restore();b.save();b.globalAlpha=this.letterM.alpha;b.scale(this.letterM.scale,this.letterM.scale);this.letterImage.draw(this.originX+this.letterM.x,this.letterM.y);b.restore();b.restore()},updateScale:function(){if(!this.skipUpdateScale){var b=window.innerWidth/window.innerHeight,c=ig.system.height/1280,d=ig.system.width/1280;if(ig.responsive)this.scale.x=this.scale.y=1<b?c:d;else if(ig.ua.mobile&&!ig.sizeHandler.disableStretchToFitOnMobileFlag){var e=ig.system.width/ig.system.height;
1<b?(this.scale.x=e/b*c,this.scale.y=c):(this.scale.x=d,this.scale.y=b/e*d)}else this.skipUpdateScale=!0,d=ig.system.width/1080,this.scale.x=this.scale.y=c<d?c:d;1<this.scale.x&&(this.scale.x=1);1<this.scale.y&&(this.scale.y=1)}}})});ig.baked=!0;ig.module("game.levels.opening").requires("impact.image","game.entities.marketjs-splash").defines(function(){LevelOpening={entities:[{type:"EntityMarketJSSplash",x:0,y:0}],layer:[]}});ig.baked=!0;
ig.module("game.entities.addon.custom-pointer").requires("game.entities.pointer").defines(function(){EntityCustomPointer=EntityPointer.extend({name:"Pointer",size:{x:1,y:1},check:function(b){b.useCustomEntity?b.exists&&b.inputEnabled&&ig.game.checkVisibility(b)&&!(1>b.size.x||1>b.size.y)&&b.alive&&this.objectArray.push(b):this.parent(b)},kill:function(){this.parent();this.exists=!1},update:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.addon.page-controller").requires("game.entities.addon.group","game.entities.addon.custom-pointer").defines(function(){EntityPageController=EntityGroup.extend({name:"Controller",localState:{},isReady:!1,init:function(b,c,d){this.parent(b,c,d);if(!ig.global.wm){ig.game.tweens.removeAll();this.centerX=ig.game.centerX;this.centerY=ig.game.centerY;this.gw=ig.game.gw;this.gh=ig.game.gh;this.timeEvent=new ig.TimeEvent;ig.game.addOnReady=!0;ig.game.groups=[];this.gBG=ig.game.addGroup(0,
0);this.gCont=ig.game.addGroup(0,0);this.gFront=ig.game.addGroup(0,0);this.gPointer=ig.game.addGroup(0,0);ig.game.groups.push(this.gBG);ig.game.groups.push(this.gCont);ig.game.groups.push(this.gFront);ig.game.groups.push(this.gPointer);ig.game.checkZIndexGroups();this.gPointer.add(this);this.curtainBg=ig.game.spawnEntity(EntityManualDrawEntity,this.centerX,this.centerY);this.curtainBg.anchor.setTo(0.5);this.curtainBg.setShape(ig.system.width,ig.system.height);this.curtainBg.drawShape=function(){var b=
ig.game.geom.rectangle(0,0,this.width,this.height);ig.game.geomDebug.rect(b,"black",this.alpha*ig.system.context.globalAlpha)}.bind(this.curtainBg);this.curtainBg.inputEnabled=!0;this.curtainBg.alpha=0;this.gPointer.add(this.curtainBg);ig.game.controller=this;b=ig.game.getEntitiesByType(EntityPointer);if(0<b.length)for(c=0;c<b.length;c++)b[c].kill();ig.game.pointer=ig.game.spawnEntity(EntityCustomPointer,ig.system.width/2,ig.system.height/2);ig.game.sortEntitiesDeferred();ig.game.fps&&(this.showFps=
ig.game.addText(this.gw-10,10,"",30,fonts.font1),this.showFps.anchor.setTo(1,0),this.showFps.align="right",this.showFps.fill="white",this.gPointer.add(this.showFps))}},createFSBtn:function(b,c){this.fsBtn=ig.game.spawnEntity(ig.FullscreenButton,b,c,{enterImage:new ig.Image("media/graphics/misc/enter-fullscreen-transparent.png"),exitImage:new ig.Image("media/graphics/misc/exit-fullscreen-transparent.png")})},createSenteceTxt:function(b){b=b.split(" ");for(var c=[],d=0;d<b.length;d++){var e=b[d],e=
[e[0],e.slice(1)];c.push(e)}return c},groupTxts:function(b,c,d){for(var e=ig.game.addGroup(0,0),f=[],g=0;g<b.length;g++){for(var l=0;l<b[g].length;l++){var p=c[l],j=ig.game.addText(0,0,b[g][l],p,fonts.font1);j.anchor.setTo(0,1);j.fill=d;e.add(j);if(0<f.length){var q=f[f.length-1];j.x=q.x+q.size.x}f.push(j)}1<b.length&&(j=ig.game.addText(0,0," ",p,fonts.font1),j.anchor.setTo(0,1),j.fill=d,e.add(j),q=f[f.length-1],j.x=q.x+q.size.x,f.push(j))}return e},createGreyBg:function(){this.greyBg=ig.game.spawnEntity(EntityManualDrawEntity,
this.centerX,this.centerY);this.greyBg.anchor.setTo(0.5);this.greyBg.setShape(ig.system.width,ig.system.height);this.greyBg.drawShape=function(){var b=ig.game.geom.rectangle(0,0,this.width,this.height);ig.game.geomDebug.rect(b,"black",0.5*ig.system.context.globalAlpha)}.bind(this.greyBg);this.greyBg.inputEnabled=!0;this.greyBg.visible=!1;this.greyBg.alpha=0;this.gFront.add(this.greyBg)},updateOnOrientationChange:function(){ig.game.useResponsive&&(this.greyBg&&this.greyBg.setShape(ig.system.width,
ig.system.height),this.curtainBg&&this.curtainBg.setShape(ig.system.width,ig.system.height))},update:function(){this.parent();ig.game.fps&&this.showFps.setText(ig.game.fps+" FPS");this.timeEvent.update();this.isReady||(this.isReady=!0,ig.game.transition?ig.game.transition.open():this.curtainBg&&(this.curtainBg.visible=!1));this.fsBtn&&this.fsBtn.update()},draw:function(){this.parent();this.fsBtn&&this.fsBtn.draw()},kill:function(){this.exists=ig.game.addOnReady=!1;this.parent()}})});ig.baked=!0;
ig.module("game.entities.objects.click-btn2").requires("game.entities.addon.sprite").defines(function(){EntityClickBtn2=EntitySprite.extend({init:function(b,c,d){this.parent(b,c,d)},setProperties:function(b){this.parent(b);this.anchor.setTo(0.5);this.inputEnabled=!0;this.isClicked=!1},moreGames:function(){this.setProperty();this.div_layer_name=this.name="more-games";_SETTINGS.MoreGames.Enabled?(_SETTINGS.MoreGames.Link&&(this.link=_SETTINGS.MoreGames.Link),_SETTINGS.MoreGames.NewWindow&&(this.newWindow=
_SETTINGS.MoreGames.NewWindow),this.clickableLayer=new ClickableDivLayer(this)):this.kill()},show:function(){if(this.exists&&"more-games"==this.name){var b=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(b)}},hide:function(){if(this.exists&&"more-games"==this.name){var b=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(b)}},clicked:function(){this.isClicked||(this.isClicked=!0,this.frameName="ingame/buttons/play-btn2")},released:function(){this.isClicked&&
(this.isClicked=!1,this.frameName="ingame/buttons/play-btn1",this.onClick.dispatch())},update:function(){this.parent();this.clickableLayer&&(this.clickableLayer.size=new Vector2(this.size.x,this.size.y),this.clickableLayer.update(this.pos.x,this.pos.y))}})});ig.baked=!0;
ig.module("game.entities.controllers.mainmenu-ctrl").requires("game.entities.addon.page-controller","game.entities.objects.options","game.entities.objects.click-btn2").defines(function(){EntityMainmenuCtrl=EntityPageController.extend({titleAnimated:!1,init:function(b,c,d){this.parent(b,c,d);ig.global.wm||this.create()},create:function(){this.gInGame=ig.game.addGroup();this.bg=ig.CallAsset.addImage(this.centerX,this.centerY,"bg-01");this.bg.anchor.setTo(0.5);this.gBG.add(this.bg);this.createGreyBg();
this.gSetting=ig.game.addGroup(this.centerX,this.centerY,{},EntityOptions);this.gFront.add(this.gSetting);this.title=ig.CallAsset.addFrameImage(this.centerX,0.24*this.gh,"ingame/title");this.title.anchor.setTo(0.5);this.gInGame.add(this.title);this.playBtn=ig.CallAsset.addFrame(this.centerX,0.62*this.gh,"ingame/buttons/play-btn1",{},EntityClickBtn2);this.playBtn.onClick.add(function(){csound.sfxPlay("match3");ig.game.changePage(LevelStage)},this);this.gInGame.add(this.playBtn);this.settingBtn=ig.CallAsset.addFrame(this.gw,
this.gh,"ingame/buttons/setting-btn",{isResponsive:!1},EntityClickBtn);this.settingBtn.x-=0.7*this.settingBtn.size.x;this.settingBtn.y-=0.7*this.settingBtn.size.y;this.settingBtn.onClick.add(this.gSetting.appear,this.gSetting);this.gInGame.add(this.settingBtn);_SETTINGS.MoreGames.Enabled&&(this.moreBtn=ig.CallAsset.addFrame(0,this.settingBtn.y,"ingame/buttons/more-btn",{isResponsive:!1},EntityClickBtn),this.moreBtn.x+=0.7*this.moreBtn.size.x,this.moreBtn.moreGames(),this.gInGame.add(this.moreBtn));
this.gCont.add(this.gInGame);this.reposTitle();this.updateOnOrientationChange();this.startPage();this.createFSBtn(20,20)},updateOnOrientationChange:function(){this.parent();var b=Math.max(ig.system.width/this.bg.width,ig.system.height/this.bg.height);this.bg.scale.setTo(b);b=20;this.fsBtn&&(b=this.fsBtn.pos.x);this.settingBtn.x=ig.system.width-0.5*this.settingBtn.size.x-b;this.settingBtn.y=ig.system.height-0.5*this.settingBtn.size.y-b;_SETTINGS.MoreGames.Enabled&&(this.moreBtn.x=b+0.5*this.moreBtn.size.x,
this.moreBtn.y=this.settingBtn.y);this.titleAnimated&&this.reposTitle()},startPage:function(){this.greyBg.visible=!0;this.playBtn.alpha=0;this.oriSetting=new Vector2(this.settingBtn.x,this.settingBtn.y);this.reposTitle();this.title.y=0.6*-this.title.size.y;this.title.alpha=0;this.settingBtn.y=this.gh+0.6*this.settingBtn.size.y;this.settingBtn.alpha=0;this.playBtn.inputEnabled=!1;this.settingBtn.inputEnabled=!1;_SETTINGS.MoreGames.Enabled&&(this.moreBtn.hide(),this.oriMore=new Vector2(this.moreBtn.x,
this.moreBtn.y),this.moreBtn.y=this.gh+0.6*this.moreBtn.size.y,this.moreBtn.alpha=0)},reposTitle:function(){console.log("reposTitle",ig.game.isPortrait);this.title.y=ig.game.isPortrait?0.1*this.gh+this.title.height/2-(ig.system.height-this.gh)/2:0.24*this.gh;this.oriTitle=new Vector2(this.title.x,this.title.y)},setPage:function(){this.greyBg.visible=!1;(new ig.TweenDef(this.title)).to({x:this.oriTitle.x,y:this.oriTitle.y,alpha:1},300).onComplete(function(){this.titleAnimated=!0}.bind(this)).start();
(new ig.TweenDef(this.settingBtn)).to({y:this.oriSetting.y,alpha:1},300).onComplete(function(){this.settingBtn.inputEnabled=!0}.bind(this)).start();(new ig.TweenDef(this.playBtn)).to({alpha:1},300).onComplete(function(){this.playBtn.inputEnabled=!0}.bind(this)).start();_SETTINGS.MoreGames.Enabled&&(new ig.TweenDef(this.moreBtn)).to({y:this.oriMore.y,alpha:1},300).onComplete(function(){this.moreBtn.show();setTimeout(function(){ig.sizeHandler.resize();ig.game.draw()}.bind(this),150)}.bind(this)).start()},
titleAnimation:function(){this.reposTitle();var b=this.title.y-50;(new ig.TweenDef(this.title)).to({y:b},3E3).repeat(1).yoyo(!0).onComplete(function(){this.titleAnimation()}.bind(this)).start();this.titleAnimated=!0},playAnimation:function(){(new ig.TweenDef(this.playBtn.scale)).to({x:1.1,y:1.1},2E3).yoyo(!0).repeat(-1).onComplete(function(){}.bind(this)).start()},update:function(){this.parent();!ig.game.transition.isClosed&&!this.pageReady&&(this.pageReady=!0,this.setPage());this.fsBtn.update()},
draw:function(){this.parent();this.fsBtn.draw()}})});ig.baked=!0;ig.module("game.levels.mainmenu").requires("impact.image","game.entities.controllers.mainmenu-ctrl").defines(function(){LevelMainmenu={entities:[{type:"EntityMainmenuCtrl",x:948,y:96}],layer:[]}});ig.baked=!0;
ig.module("game.entities.objects.stage-box").requires("game.entities.objects.click-btn").defines(function(){EntityStageBox=EntityClickBtn.extend({init:function(b,c,d){this.parent(b,c,d)},setProperties:function(b){this.parent(b)},create:function(){this.onGoing=!1;this.stageId=this.boxId;this.showStage=ig.game.addText(0,0.1*-this.size.y,this.stageId+"",120,fonts.font1);this.showStage.anchor.setTo(0.5);this.addChild(this.showStage);this.comingSoon=ig.game.addText(0,0,_STRINGS.Game.comingsoon,36,fonts.font1);
this.comingSoon.anchor.setTo(0.5);this.comingSoon.wordWrap=!0;this.comingSoon.wordWrapWidth=0.8*this.width;this.comingSoon.lineSpacing=3;this.comingSoon.align="center";this.addChild(this.comingSoon);this.comingSoon.visible=!1;this.onClick.add(this.activate,this)},setPage:function(){for(var b=ig.game.sessionData.unlockedStages[this.stageId],c=0;c<b;c++)this.stars[c].playAnim("on")},activate:function(){ig.game.disableBtns();ig.GameData.stage=this.stageId;ig.GameData.trialMode=!0;ig.game.changePage(LevelGameplay)}})});
ig.baked=!0;
ig.module("game.entities.controllers.stage-ctrl").requires("game.entities.addon.page-controller","game.entities.objects.stage-box").defines(function(){EntityStageCtrl=EntityPageController.extend({images:[new ig.Image("media/graphics/backgrounds/bg-01.png"),new ig.Image("media/graphics/sprites/ingame.png")],init:function(b,c,d){this.parent(b,c,d);ig.global.wm||this.create()},create:function(){ig.soundHandler.bgmPlayer.volume(ig.game.sessionData.bgmVol);ig.soundHandler.sfxPlayer.volume(ig.game.sessionData.sfxVol);this.pageNow=
0;this.isTweening=this.pageReady=!1;this.gInGame=ig.game.addGroup();this.bg=ig.CallAsset.addImage(this.centerX,this.centerY,"bg-01");this.bg.anchor.setTo(0.5);this.gBG.add(this.bg);this.gStage=ig.game.addGroup(this.centerX,this.centerY);this.gInGame.add(this.gStage);this.stageBg=ig.CallAsset.addFrameImage(0,0,"ingame/big-box");this.stageBg.anchor.setTo(0.5);this.gStage.add(this.stageBg);this.closeBtn=ig.CallAsset.addFrame(this.stageBg.x+0.5*this.stageBg.width,0.5*-this.stageBg.size.y,"ingame/buttons/close",
{},EntityClickBtn);this.closeBtn.x-=0.7*this.closeBtn.size.x;this.closeBtn.y+=0.7*this.closeBtn.size.y;this.closeBtn.onClick.add(function(){ig.game.changePage(LevelMainmenu)},this);this.gStage.add(this.closeBtn);this.showTitle=ig.game.addText(0,this.closeBtn.y+5,_STRINGS.Game.stage,Math.floor(0.8*this.closeBtn.height),fonts.font1);this.showTitle.anchor.setTo(0.5);this.showTitle.fill="#B66200";this.gStage.add(this.showTitle);this.gBoxes=ig.game.addGroup();this.gStage.add(this.gBoxes);this.prevBtn=
ig.CallAsset.addFrame(this.centerX-0.5*this.stageBg.size.x,0.87*this.gh,"ingame/buttons/btn-prev",{},EntityClickBtn);this.prevBtn.x+=0.5*this.prevBtn.size.x;this.prevBtn.onStartClick.add(function(){this.pageNow--},this);this.prevBtn.onClick.add(function(){this.onGoing||this.changePage()},this);this.gInGame.add(this.prevBtn);this.nextBtn=ig.CallAsset.addFrame(this.centerX+0.5*this.stageBg.size.x,this.prevBtn.y,"ingame/buttons/btn-next",{},EntityClickBtn);this.nextBtn.x-=0.5*this.nextBtn.size.x;this.nextBtn.onStartClick.add(function(){this.pageNow++},
this);this.nextBtn.onClick.add(function(){this.onGoing||this.changePage()},this);this.gInGame.add(this.nextBtn);this.gCont.add(this.gInGame);this.onGoing=!1;this.generateBoxes();this.gTags=ig.game.addGroup(this.centerX,this.nextBtn.y);this.gInGame.add(this.gTags);this.pageTags=[];var b=parseInt(ig.GameData.totalStages/this.boxes.length)+1;0==ig.GameData.totalStages%this.boxes.length&&(b-=1);for(var c=0;c<b;c++){var d=ig.CallAsset.addFrameImage(0,0,"ingame/stages/page_tag2");d.anchor.setTo(0.5);this.gTags.add(d);
var e=parseInt(b/2),f=-(1.2*d.width*e);0==b%2&&(f=-(0.6*d.width)-1.2*d.width*(e-1));f+=1.2*d.width*c;d.x=f;this.pageTags.push(d)}this.createFSBtn(20,20);this.updateOnOrientationChange();this.preparePage()},updateOnOrientationChange:function(){this.parent();var b=Math.max(ig.system.width/this.bg.width,ig.system.height/this.bg.height);this.bg.scale.setTo(b);this.prevBtn.y=0.9*this.gh+(ig.system.height-this.gh)/2;this.nextBtn.y=this.prevBtn.y;this.gTags.y=this.nextBtn.y},generateBoxes:function(){this.boxes=
[];for(var b=0;4>b;b++)for(var c=0;4>c;c++){var d=ig.CallAsset.addFrame(0,0,"ingame/stages/stage-box-on-0",{boxId:this.boxes.length},EntityStageBox);d.isTweening=!1;this.gBoxes.add(d);d.x=-(0.51*d.size.x)-1.02*d.size.x+1.02*d.size.x*c;d.y=0.245*-this.stageBg.size.y+1*d.size.y*b;d.create();this.boxes.push(d)}this.gBoxes.scale.x=0;this.pageNow=parseInt(ig.game.sessionData.unlockedStages.length/this.boxes.length);this.pageNow*this.boxes.length>=ig.GameData.totalStages&&this.pageNow--},setPage:function(){for(var b=
0;b<this.boxes.length;b++){var c=this.pageNow*this.boxes.length+b,d=this.boxes[b];d.inputEnabled=!1;this.checkBox(d);c<=ig.game.sessionData.unlockedStages.length&&(d.inputEnabled=!0)}},setTag:function(){for(var b=0;b<this.pageTags.length;b++){var c=this.pageTags[b];c.frameName="ingame/stages/page_tag2";b==this.pageNow&&(c.frameName="ingame/stages/page_tag1")}},changePage:function(){this.isTweening||(this.prevBtn.inputEnabled=!1,this.nextBtn.inputEnabled=!1,this.isTweening=!0,(new ig.TweenDef(this.gBoxes.scale)).to({x:0},
100).easing(ig.Tween.Easing.Quadratic.EaseOut).onComplete(function(){this.isTweening=!1;for(var b=0;b<this.boxes.length;b++)this.checkBox(this.boxes[b]);this.tweenBack()}.bind(this)).start(),this.setTag())},checkBox:function(b){b.frameName="ingame/stages/stage-box-off-nostar";b.visible=!1;var c=this.boxes.indexOf(b),c=this.pageNow*this.boxes.length+c;b.stageId=c;c<ig.GameData.totalStages?(b.visible=!0,b.comingSoon.visible=!1,b.showStage.visible=!0,b.showStage.setText(b.stageId+1+""),c<=ig.game.sessionData.unlockedStages.length&&
(b.frameName="ingame/stages/stage-box-on-0",c<ig.game.sessionData.unlockedStages.length&&(b.frameName="ingame/stages/stage-box-on-"+ig.game.sessionData.unlockedStages[c]))):c==ig.GameData.totalStages?(b.visible=!0,b.frameName="ingame/stages/stage-box-off",b.comingSoon.visible=!0,b.showStage.visible=!1):b.isTweening=!1},tweenBack:function(){this.isTweening||(this.isTweening=!0,(new ig.TweenDef(this.gBoxes.scale)).to({x:1},100).easing(ig.Tween.Easing.Quadratic.EaseOut).onComplete(function(){this.isTweening=
!1;this.setPage();this.prevBtn.inputEnabled=!0;this.nextBtn.inputEnabled=!0}.bind(this)).start())},preparePage:function(){this.prevBtn.setScale(0);this.nextBtn.setScale(0);this.gStage.y=0.6*-this.stageBg.size.y;for(var b=this.gStage.alpha=0;b<this.boxes.length;b++)this.boxes[b].inputEnabled=!1},startPage:function(){(new ig.TweenDef(this.gStage)).to({y:0.49*this.gh,alpha:1},300).easing(ig.Tween.Easing.Quadratic.EaseOut).onComplete(function(){this.changePage();(new ig.TweenDef(this.prevBtn.scale)).to({x:1,
y:1},200).start();(new ig.TweenDef(this.nextBtn.scale)).to({x:1,y:1},200).start()}.bind(this)).start()},checkAllTweening:function(){for(var b=!1,c=0;c<this.boxes.length;c++)this.boxes[c].isTweening&&(b=!0);return b},update:function(){this.parent();!ig.game.transition.isClosed&&!this.pageReady&&(this.pageReady=!0,this.startPage());0<this.pageNow?(this.isTweening||(this.prevBtn.inputEnabled=!0),this.prevBtn.frameName="ingame/buttons/btn-prev"):(this.prevBtn.inputEnabled=!1,this.prevBtn.frameName="ingame/buttons/btn-prev2");
(this.pageNow+1)*this.boxes.length>=ig.GameData.totalStages?(this.nextBtn.inputEnabled=!1,this.nextBtn.frameName="ingame/buttons/btn-next2"):(this.isTweening||(this.nextBtn.inputEnabled=!0),this.nextBtn.frameName="ingame/buttons/btn-next");this.fsBtn.update()},draw:function(){this.parent();this.fsBtn.draw()}})});ig.baked=!0;
ig.module("game.levels.stage").requires("impact.image","game.entities.controllers.stage-ctrl").defines(function(){LevelStage={entities:[{type:"EntityStageCtrl",x:784,y:28}],layer:[]};LevelStageResources=[]});ig.baked=!0;
ig.module("plugins.addon.custom-canvas").defines(function(){ig.CustomCanvas=ig.Class.extend({sourceX:0,sourceY:0,size:{x:0,y:0},renewCanvas:!1,init:function(b,c,d,e){ig.merge(this,e);this.height=d;this.width=c;this.size.x=c;this.size.y=d;this.canvasName=b;c=this.setCanvas(c,d);this.drawEle=hiddenCanvases[b].ele;this.drawCtx=hiddenCanvases[b].ctx;this.drawImageCanvas(c.ctx)},setCanvas:function(b,c){var d=hiddenCanvases[this.canvasName];d?this.renewCanvas&&(hiddenCanvases[this.canvasName]=this.create_canvas_context(b,
c),d=hiddenCanvases[this.canvasName]):(hiddenCanvases[this.canvasName]=this.create_canvas_context(b,c),d=hiddenCanvases[this.canvasName]);return d},create_canvas_context:function(b,c){var d=document.createElement("canvas");d.width=b;d.height=c;var e=d.getContext("2d");return{ele:d,ctx:e}},drawImageCanvas:function(){},draw:function(b,c){ig.system.context.save();ig.system.context.drawImage(this.drawEle,this.sourceX,this.sourceY,this.size.x,this.size.y,ig.system.getDrawPos(b),ig.system.getDrawPos(c),
this.size.x,this.size.y);ig.system.context.restore();ig.Image.drawCount++}})});ig.baked=!0;
ig.module("game.entities.objects.canvas-itemlist").requires("game.entities.addon.manual-draw-entity","plugins.addon.custom-canvas").defines(function(){EntityCanvasItemlist=EntityManualDrawEntity.extend({init:function(b,c,d){this.parent(b,c,d);this.image=new ig.CanvasItemList;this.setShape(this.image.width,this.image.height)},drawShape:function(){this.image.draw(0,0)}});ig.CanvasItemList=ig.CustomCanvas.extend({itemsPos:[],init:function(){this.itemBoxData=ig.CallAsset.searchSpriteData("game/woodplate");
this.gameImg=ig.Image.cache[imgCache.game.path.img];this.pieceTypes=curState().itemLists;this.parent("item-list",this.itemBoxData.frame.w,this.itemBoxData.frame.h,{renewCanvas:!0})},drawImageCanvas:function(b){b.save();b.clearRect(0,0,this.width,this.height);var c=ig.CallAsset.searchSpriteData("game/woodplate");width=c.frame.w;height=c.frame.h;sourceX=c.frame.x;sourceY=c.frame.y;var d=y=x=0,e=y,c=width,f=height;this.gameImg.drawCtx(b,x,y,sourceX,sourceY,width,height);var g=ig.CallAsset.searchSpriteData("game/woodplate-box");
width=g.frame.w;height=g.frame.h;sourceX=g.frame.x;sourceY=g.frame.y;x=d+c-1.02*width;y=e+0.5*f-0.5*height;var g=x,l=y,p=width,j=height;this.gameImg.drawCtx(b,x,y,sourceX,sourceY,width,height);var q="46px "+fonts.font1;x=d+35;y=e+0.5*f+46*0.3;b.fillStyle="white";b.textBaseline="alphabetic";b.font=q;b.textAlign="left";b.fillText(_STRINGS.Game.target,x,y);ig.CallAsset.searchSpriteData("game/tile");for(d=0;d<this.pieceTypes.length;d++)e=ig.CallAsset.searchSpriteData("game/gem"+this.pieceTypes[d]),sourceX=
e.frame.x,sourceY=e.frame.y,width=e.frame.w,height=e.frame.h,e=p/5.5,x=g+0.5*(p-5*e)+0.5*e+e*d,y=l+0.5*j,b.save(),b.translate(ig.system.getDrawPos(x),ig.system.getDrawPos(y)),b.scale(0.5,0.5),this.gameImg.drawCtx(b,-(width/2),-(height/2),sourceX,sourceY,width,height),b.restore(),this.itemsPos[d]={x:x-0.5*c,y:y-0.5*f,scale:0.5};b.restore()}})});ig.baked=!0;
ig.module("game.entities.objects.item-list").requires("game.entities.addon.group","game.entities.objects.canvas-itemlist").defines(function(){EntityItemList=EntityGroup.extend({maxItems:0,itemLists:[],init:function(b,c,d){this.parent(b,c,d);this.create()},create:function(){this.isCompleted=!1;this.listBox=ig.game.spawnEntity(EntityCanvasItemlist,0,0);this.listBox.anchor.setTo(0.5);this.add(this.listBox);ig.CallAsset.searchSpriteData("game/woodplate");var b=ig.CallAsset.searchSpriteData("game/woodplate-box"),
c=ig.CallAsset.searchSpriteData("game/tile");this.items=[];for(var d=this.listBox.image.itemsPos,e=0;e<this.itemLists.length;e++){var f=this.itemLists[e],g=d[e],l=ig.CallAsset.addFrameImage(g.x,g.y,"game/gem"+f);l.anchor.setTo(0.5);l.scale.setTo(g.scale);l.jewelId=f;this.add(l);l.itemLeft=10;f=ig.game.addText(l.x+0.4*c.frame.w*l.scale.x,l.y+0.4*b.frame.h,l.itemLeft+"",32,fonts.font1);f.anchor.setTo(0.5,1);f.align="center";this.add(f);l.showLeft=f;l.visible=!1;this.items.push(l)}},checkId:function(b){for(var c=
!1,d=0;d<this.items.length;d++)b==this.items[d].jewelId&&(c=!0);return c},update:function(){this.parent();for(var b=0,c=0;c<this.items.length;c++){var d=this.items[c];d.showLeft.setText(d.itemLeft);0>=d.itemLeft&&b++}!curState().gBoard.checkAllMovement()&&b==this.items.length&&(this.isCompleted=!0,!curState().gameOver&&!curState().gamePaused&&(curState().gamePaused=!0,curState().pauseBtn.inputEnabled=!1,curState().lastCall()))},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.objects.piece").requires("game.entities.addon.manual-draw-entity").defines(function(){EntityPiece=EntityManualDrawEntity.extend({row:-1,col:-1,_row:-1,_col:-1,pieceId:0,isMoving:!1,isIn:!1,moveAfter:!1,checkTilesCol:[],checkTilesRow:[],powerUpId:0,isBreak:!1,isBreaking:!1,isChangingPlace:!1,speed:10,destPos:{x:0,y:0},isChecking:!1,startClick:{x:0,y:0},init:function(b,c,d){this.parent(b,c,d);b=ig.CallAsset.searchSpriteData("game/tile");this.setShape(b.sourceSize.w,b.sourceSize.h);
this.pieceData=ig.CallAsset.searchSpriteData("game/gem"+this.pieceId);this.pieceImage=ig.Image.cache[imgCache.game.path.img];this.onCompleteMove=new ig.AddSignal(this);this.isClicked=this.onGoing=!1;this.onClick.add(this.checkClick,this);this.onRelease.add(function(){this.releaseClick(ig.game.pointer.pos)},this);this.alpha=0;this.anchor.setTo(0.5)},drawShape:function(){var b=ig.system.context;b.save();var c=this.pieceData.frame.w,d=this.pieceData.frame.h;this.pieceImage.draw((this.width-c)/2,(this.height-
d)/2,this.pieceData.frame.x,this.pieceData.frame.y,c,d);b.restore()},createSparkling:function(){if(!(3<this.powerUpId)){var b=ig.game.rnd.realInRange(-20,20),c=ig.game.rnd.realInRange(-(0.3*this.height),-(0.2*this.height)),d=ig.game.rnd.realInRange(0.15,0.25);this.sparkling=ig.CallAsset.addFrame(b,c,"game/effects/sparkle/1");this.sparkling.anchor.setTo(0.5);var e=ig.GenerateFrameNames("game/effects/sparkle/",1,6,"",1);this.sparkling.addAnim("spark",d,e,!1);this.sparkling.playAnim("spark");this.addChild(this.sparkling);
this.sparkling.offSet={x:b-this.x,y:c-this.y}}},tweenIn:function(){if(!this.isIn){this.isIn=!0;var b=curState().gBoard.tiles[this.row][this.col];curState().gBoard.gPieces.toGlobal(b.x,b.y);var b=b.y,c=ig.Tween.Easing.Quadratic.EaseOut;(new ig.TweenDef(this)).to({alpha:1},100).onComplete(function(){this.isIn=!1;this.moveAfter&&this.moveTo(this.isChecking);this.inputEnabled=!0}.bind(this)).easing(c).start();this.isMoving||(new ig.TweenDef(this)).to({y:b},100).easing(c).start()}},tweenClick:function(){this.scale.setTo(1.1)},
tweenRelease:function(){this.scale.setTo(1)},checkClick:function(){curState().gameStart&&(!curState().gamePaused&&!curState().gameOver)&&(!curState().checkOnGoing&&!curState().pieceClicked&&!curState().gBoard.checkAllMovement())&&(curState().pieceClicked=this,this.startClick.x=ig.game.pointer.pos.x,this.startClick.y=ig.game.pointer.pos.y,this.startClick.clickTime=Date.now(),this.tweenClick(),curState().chain=0,this.checkTilesCol=[],this.checkTilesRow=[])},releaseClick:function(b){if(curState().pieceClicked)if(this.tweenRelease(),
b=this.checkPiece(b),null!=b&&this.pieceId!=b.pieceId){var c=Math.abs(this.col-b.col),d=Math.abs(this.row-b.row);0==c&&1==d||1==c&&0==d?(curState().pieceHover=b,curState().pieceHover&&(curState().pieceHover.checkTilesCol=[],curState().pieceHover.checkTilesRow=[]),curState().gBoard.exchangePieces(this,b)):(this.checkPointer(),curState().pieceHover||(curState().pieceClicked=null))}else this.checkPointer(),curState().pieceHover||(curState().pieceClicked=null)},checkPointer:function(){var b=curState().gBoard.tiles[this.row][this.col],
c=ig.game.pointer.pos.x-this.startClick.x,d=ig.game.pointer.pos.y-this.startClick.y,e=this.col,f=this.row;0<c&&Math.abs(c)>=b.size.x&&Math.abs(d)<0.5*b.size.y?(e+=1,e>=curState().gBoard.pieces[this.row].length&&(e=this.col)):0>c&&Math.abs(c)>=b.size.x&&Math.abs(d)<0.5*b.size.y?(e-=1,0>e&&(e=this.col)):0<d&&Math.abs(d)>=b.size.y&&Math.abs(c)<0.5*b.size.x?(f+=1,f>=curState().gBoard.pieces.length&&(f=this.row)):0>d&&(Math.abs(d)>b.size.y&&Math.abs(c)<0.5*b.size.x)&&(f-=1,0>f&&(f=this.row));if(f!=this.row||
e!=this.col)if((b=curState().gBoard.pieces[f][e])&&!b.isBreak&&5!=b.powerUpId)curState().pieceHover=b,curState().pieceHover&&(curState().pieceHover.checkTilesCol=[],curState().pieceHover.checkTilesRow=[]),curState().gBoard.exchangePieces(this,b)},checkPiece:function(){for(var b=curState().gBoard.pieces,c=ig.game.pointer.hoveringItem,d=null,e=0;e<b.length;e++)for(var f=0;f<b[e].length;f++){var g=b[e][f];if(null!=g&&g!=this&&5!=g.powerUpId&&c==g){d=g;break}}return d},checkMatchAround:function(){this.checkTilesRow=
[this];this.checkTilesCol=[this];this.checkCol(this);this.checkRow(this)},checkCol:function(b){var c=curState().gBoard.pieces,d=curState().gBoard.maps,e=this.row,f=b.col-1,g=b.col+1;0>f&&(f=0);g>=d[e].length&&(g=d[e].length-1);for(d=f;d<=g;d++)if((f=c[e][d])&&!f.isBreak&&!(3<f.powerUpId)&&f!=b&&f.pieceId==b.pieceId&&0>this.checkTilesCol.indexOf(f))this.checkTilesCol.push(f),this.checkCol(f)},checkRow:function(b){var c=curState().gBoard.pieces,d=curState().gBoard.maps,e=this.col,f=b.row-1,g=b.row+
1;0>f&&(f=0);g>=d.length&&(g=d.length-1);for(d=f;d<=g;d++)if((f=c[d][e])&&!f.isBreak&&!(3<f.powerUpId)&&f!=b&&f.pieceId==b.pieceId&&0>this.checkTilesRow.indexOf(f))this.checkTilesRow.push(f),this.checkRow(f)},checkPiecesAround:function(){curState().checkOnGoing=!0;curState();if(curState().gBoard.pieces[this.row][this.col]==this){if(!this.preFuse()){if(3<=this.checkTilesCol.length)for(var b=0;b<this.checkTilesCol.length;b++){var c=this.checkTilesCol[b];c.exists&&!c.isBreak&&(curState().chain+=1,c.onDestroy())}if(3<=
this.checkTilesRow.length)for(b=0;b<this.checkTilesRow.length;b++)c=this.checkTilesRow[b],c.exists&&!c.isBreak&&(curState().chain+=1,c.onDestroy())}if(3<=this.checkTilesRow.length||3<=this.checkTilesCol.length)curState().hint&&(curState().matches=[],curState().hint.kill(),curState().hint=null,curState().hintCD=0),curState().checkAfterTutor(),b=1,10<curState().chain&&20>curState().chain?b=2:20<=curState().chain&&(b=3),csound.sfxPlay("match"+b);this.checkTilesCol=[];this.checkTilesRow=[]}},preFuse:function(){var b=
!0;if(3==this.checkTilesCol.length&&3==this.checkTilesRow.length)if(ig.GameData.stage>=ig.GameData.unlockPowerUp[2])this.fusePieces(this.checkTilesCol,5),this.fusePieces(this.checkTilesRow);else if(ig.GameData.stage>=ig.GameData.unlockPowerUp[0]){var c=ig.game.rnd.integerInRange(1,4);this.fusePieces(this.checkTilesCol,c);this.fusePieces(this.checkTilesRow)}else b=!1;else 4==this.checkTilesCol.length&&3>this.checkTilesRow.length&&ig.GameData.stage>=ig.GameData.unlockPowerUp[0]?(c=ig.game.rnd.integerInRange(1,
3),this.fusePieces(this.checkTilesCol,c)):3>this.checkTilesCol.length&&4==this.checkTilesRow.length&&ig.GameData.stage>=ig.GameData.unlockPowerUp[0]?(c=ig.game.rnd.integerInRange(1,3),this.fusePieces(this.checkTilesRow,c)):5<=this.checkTilesCol.length&&3>this.checkTilesRow.length?ig.GameData.stage>=ig.GameData.unlockPowerUp[1]?this.fusePieces(this.checkTilesCol,4):ig.GameData.stage>=ig.GameData.unlockPowerUp[0]?(c=ig.game.rnd.integerInRange(1,3),this.fusePieces(this.checkTilesCol,c)):b=!1:3>this.checkTilesCol.length&&
5<=this.checkTilesRow.length?ig.GameData.stage>=ig.GameData.unlockPowerUp[1]?this.fusePieces(this.checkTilesRow,4):ig.GameData.stage>=ig.GameData.unlockPowerUp[0]?(c=ig.game.rnd.integerInRange(1,3),this.fusePieces(this.checkTilesRow,c)):b=!1:3<this.checkTilesRow.length&&3<=this.checkTilesCol.length||3<=this.checkTilesRow.length&&3<=this.checkTilesCol.length?ig.GameData.stage>=ig.GameData.unlockPowerUp[1]?(this.fusePieces(this.checkTilesCol,4),this.fusePieces(this.checkTilesRow)):ig.GameData.stage>=
ig.GameData.unlockPowerUp[0]?(c=ig.game.rnd.integerInRange(1,3),this.fusePieces(this.checkTilesCol,c)):b=!1:b=!1;return b},fusePieces:function(b,c){this.groupParent.bringToTop(this);var d=null;this.changeTo=c?c:null;for(var e=0;e<b.length;e++){var f=b[e];if(f&&f.exists&&!f.isBreak)if(f==this)curState().gBoard.pieces[this.row][this.col]==this&&(d=ig.CallAsset.addFrame(this.x,this.y,"effects/match09"),d.anchor.setTo(0.5,0.5*d.width/d.height),d.scale.setTo(0),curState().gBoard.gEffect.add(d),f=(new ig.TweenDef(d)).to({alpha:0},
100).onComplete(function(){this.kill()}.bind(d)),d=(new ig.TweenDef(d.scale)).to({x:1,y:1},200).onComplete(function(){3==this.checkTilesRow.length&&3==this.checkTilesCol&&console.log(this.changeTo);var b=void 0;3>=this.changeTo&&(b=this.pieceId);curState().gBoard.replacePiece(this,this.changeTo,b);0<this.powerUpId&&this.checkPowerUp()}.bind(this)),d.chain(f),d.start(),curState().gBoard.pieces[this.row][this.col]=null);else{f.isBreak=!0;curState().chain+=1;d=this.x;0==d&&(d+=0.001);var g=this.y;0==
g&&(g+=0.001);d=(new ig.TweenDef(f)).to({x:d,y:g},100).easing(ig.Tween.Easing.Quadratic.EaseOut).onComplete(function(){this.onDestroy(!1)}.bind(f)).start()}}},onDestroy:function(b){b=!1==b?b:!0;var c=parseInt(curState().chain/5),c=ig.GameData.defPieceScore+0.1*ig.GameData.defPieceScore*c;curState().plScore+=parseInt(c);this.isBreak=this.isMoving=!0;curState().hintCD=0;b?this.checkItemGoal()?(this.checkIfMatchGoal(),curState().gBoard.pieces[this.row][this.col]=null):curState().gBoard.createMatchEffect(this):
(this.checkIfMatchGoal(),curState().gBoard.pieces[this.row][this.col]=null)},checkIfMatchGoal:function(){var b=this.checkItemGoal();curState();if(b){b.itemLeft--;var c=b.getBounds(),d=this.getBounds(),e=ig.game.math.distance(c.centerX,c.centerY,d.centerX,d.centerY),c=ig.game.math.angleBetween(c.centerX,c.centerY,d.centerX,d.centerY);this.x=b.x+Math.cos(c)*e;this.y=b.y+Math.sin(c)*e;e=b.x;c=b.y;this.groupParent.remove(this);b.groupParent.add(this);this.goToGoal(e,c,b.scale.x,b.scale.y)}else this.kill()},
checkItemGoal:function(){var b=null;if(3<this.powerUpId)return b;for(var c=curState().gList.items,d=0;d<c.length;d++){var e=c[d];if(e.jewelId==this.pieceId&&0<e.itemLeft){b=e;break}}return b},goToGoal:function(b,c,d,e){0==b&&(b+=0.001);0==c&&(c+=0.001);(new ig.TweenDef(this)).to({x:b,y:c},300).onComplete(function(){this.kill()}.bind(this)).start();(new ig.TweenDef(this.scale)).to({x:d,y:e},300).start()},setMapData:function(b,c){curState().gBoard.pieces[this.row][this.col]=null;this.row=b;this.col=
c;curState().gBoard.pieces[this.row][this.col]=this},moveTo:function(b){if(!this.isMoving&&!(this.row==this._row&&this.col==this._col)&&(this.moveAfter=!0,this.isChecking=b,!this.isIn)){this.isMoving=!0;var c=curState().gBoard.tiles[this.row][this.col];b=c.x;c=c.y;0==b&&(b+=0.05);0==c&&(c+=0.05);var d=ig.Tween.Easing.Quadratic.EaseOut;(new ig.TweenDef(this)).to({x:b,y:c},200).easing(d).onComplete(function(){this.moveAfter=this.isMoving=!1}.bind(this)).start()}},update:function(){this.parent();this.inputEnabled&&
!this.isMoving&&!this.isBreak&&1>this.alpha?this.alpha=1:this.isBreak&&curState()}})});ig.baked=!0;
ig.module("game.entities.objects.power-up").requires("game.entities.objects.piece").defines(function(){EntityPowerUp=EntityPiece.extend({isBombed:!1,lineEffects:null,init:function(b,c,d){this.parent(b,c,d);if(3<this.powerUpId)var e="game/powerup"+this.powerUpId;else 0<this.powerUpId&&3>=this.powerUpId&&(e="game/effects/line/gem"+this.pieceId+"-"+this.powerUpId);this.pieceData=ig.CallAsset.searchSpriteData(e);this.setPowerUp()},setPowerUp:function(){0!=this.powerUpId&&(this.powerUpImg=[],4==this.powerUpId?
this.pieceId=-1:5==this.powerUpId&&(this.pieceId=-2))},createPowerUpImg:function(b){var c="",d="";if(1==b||2==b)c="-1",d="-";c=ig.CallAsset.addFrame(0,0,"game/powerup"+b+c);c.anchor.setTo(0.5);this.addChild(c);b=ig.GenerateFrameNames("game/powerup"+b+d,1,2,"",1);c.addAnim("anim",0.2,b,!1);c.playAnim("anim");return c},checkClick:function(){curState().gameStart&&(!curState().gamePaused&&!curState().gameOver)&&(curState().checkOnGoing||curState().pieceClicked||curState().gBoard.checkAllMovement()||this.parent())},
releaseClick:function(b){curState().pieceClicked&&(5==this.powerUpId?(this.isBreak=!0,curState().moveLeft--,1>curState().moveLeft&&(curState().gameOver=!0),curState().checkAfterTutor(),this.tweenExplode()):(this.tweenRelease(),b=this.checkPiece(b),null!=b?4==b.powerUpId&&4==this.powerUpId?this.exchangeThis(b):this.pieceId!=b.pieceId?(this.exchangeThis(b),curState().checkAfterTutor()):(this.checkPointer(),curState().pieceHover||(curState().pieceClicked=null)):(this.checkPointer(),curState().pieceHover||
(curState().pieceClicked=null))))},exchangeThis:function(b){var c=Math.abs(this.col-b.col),d=Math.abs(this.row-b.row);0==c&&1==d||1==c&&0==d?(curState().pieceHover=b,curState().gBoard.exchangePieces(this,b)):(this.checkPointer(),curState().pieceHover||(curState().pieceClicked=null))},onDestroy:function(b){b=!1==b?b:!0;this.parent(b);b||5==this.powerUpId&&(new ig.TweenDef(piece)).to({alpha:0},10).start();this.checkPowerUp()},checkPowerUp:function(){if(!(0==this.powerUpId||curState().gBoard.isDestroyAll)){5==
this.powerUpId?this.explodeAround():4==this.powerUpId&&(this.selectSameId(),csound.sfxPlay("samecolor"));if(3>=this.powerUpId){if(!this.lineEffects){1==this.powerUpId?this.selectVertical():2==this.powerUpId?this.selectHorizontal():3==this.powerUpId&&(this.selectVertical(),this.selectHorizontal());csound.sfxPlay("effect");var b=curState().gBoard.tiles[this.row][this.col];this.lineEffects=ig.game.addGroup(b.x,b.y,{targets:[this]},EntityLineEffects);curState().gBoard.gFrontBoard.add(this.lineEffects)}}else curState().hint&&
(curState().matches=[],curState().hint.kill(),curState().hint=null,curState().hintCD=0);curState().checkAfterTutor()}},selectVertical:function(){this.verPowerUp=[];var b=curState().gBoard.pieces,c=this.row-1;if(0<=c){var d=-1;for(;0<=c;c--){d++;var e=b[c][this.col];if(e&&e.exists&&!e.isBreak){curState().chain++;var f=100*d;setTimeout(function(){}.bind(e),f);e.isMoving=!0}}}c=this.row+1;if(c<b.length){d=-1;for(;c<b.length;c++)e=b[c][this.col],d++,e&&(e.exists&&!e.isBreak)&&(curState().chain++,f=100*
d,setTimeout(function(){}.bind(e),f),e.isMoving=!0)}b=1;10<curState().chain&&20>curState().chain?b=2:20<=curState().chain&&(b=3);csound.sfxPlay("match"+b)},selectHorizontal:function(){this.horPowerUp=[];var b=curState().gBoard.pieces,c=this.col-1;if(0<=c){var d=-1;for(;0<=c;c--){var e=b[this.row][c];d++;if(e&&e.exists&&!e.isBreak){curState().chain++;var f=100*d;setTimeout(function(){}.bind(e),f);e.isMoving=!0}}}c=this.col+1;if(c<b[this.row].length){d=-1;for(;c<b[this.row].length;c++)e=b[this.row][c],
d++,e&&(e.exists&&!e.isBreak)&&(curState().chain++,f=100*d,setTimeout(function(){}.bind(e),f),e.isMoving=!0)}b=1;10<curState().chain&&20>curState().chain?b=2:20<=curState().chain&&(b=3);csound.sfxPlay("match"+b)},selectSameId:function(){var b=[];0>this.pieceId&&(this.pieceId=ig.game.rnd.pick(curState().pieceTypes));for(var c=curState().gBoard.pieces,d=0;d<c.length;d++)for(var e=0;e<c[d].length;e++){var f=c[d][e];f&&(f.exists&&!f.isBreak)&&f.pieceId==this.pieceId&&(curState().chain++,f.isBreak=!0,
b.push(f))}for(d=0;d<b.length;d++)f=b[d],(new ig.TweenDef(f.scale)).to({x:1.3,y:1.3},200).easing(ig.Tween.Easing.Quadratic.EaseOut).onComplete(function(){curState().timeEvent.add(0.3,function(){this.onDestroy()},this)}.bind(f)).start();b=1;10<curState().chain&&20>curState().chain?b=2:20<=curState().chain&&(b=3);csound.sfxPlay("match"+b)},tweenExplode:function(){var b=0.7*this.scale.x,c=0.7*this.scale.y,d=ig.Tween.Easing.Bounce.EaseIn;(new ig.TweenDef(this.scale)).to({x:b,y:c},100).yoyo(!0).repeat(1).easing(d).onComplete(this.onDestroy.bind(this)).start()},
explodeAround:function(){csound.sfxPlay("bomb");var b=curState().gBoard.pieces,c=curState().gBoard.maps,d=this.col-1,e=this.col+1,f=this.row-1,g=this.row+1;0>f&&(f=0);g>=c.length&&(g=this.row);0>d&&(d=0);e>=c[this.row].length&&(e=this.col);for(c=f;c<=g;c++)for(f=d;f<=e;f++){var l=b[c][f];l&&(l.exists&&!l.isBreak)&&l!=this&&(curState().chain++,l.isBreak=!0,curState().timeEvent.add(0.15,l.onDestroy,l))}curState().checkOnGoing=!0;curState().gBoard.isCheckingBoard=!1;curState().gBoard.onGoing=!1},destroyAll:function(){for(var b=
curState().gBoard.pieces,c=0;c<b.length;c++)for(var d=0;d<b[c].length;d++){var e=b[c][d];e&&(e.exists&&!e.isBreak)&&(curState().chain++,e.onDestroy())}curState().gBoard.onGoing=!0;b=curState().gInGame.x+20;(new ig.TweenDef(curState().gInGame)).to({x:b},30).onComplete(function(){this.onGoing=!1}.bind(curState().gBoard)).repeat(3).yoyo(!0).start()}})});ig.baked=!0;
ig.module("game.entities.objects.play-board").requires("game.entities.addon.group","game.entities.objects.piece","game.entities.objects.power-up").defines(function(){EntityPlayBoard=EntityGroup.extend({tileSize:{x:69,y:71},isDestroyAll:!1,checkPiece1:null,checkPiece2:null,isCheckingBoard:!1,checkEmptyTile:[],countTry:0,onGoing:!1,emptyExists:!1,emptyPieceInEmptySpace:[],matches:[],countCheck:0,init:function(b,c,d){this.parent(b,c,d);this.actAfterExchange=new ig.AddSignal(this);this.create()},create:function(){this.boardImg=
ig.game.spawnEntity(EntityCanvasSheet,0,0);this.add(this.boardImg);this.gPieces=ig.game.addGroup();this.add(this.gPieces);var b=curState().mapId,c=ig.GameData.stageMaps[b];this.maps=c;this.tiles=[];this.mapPos=[];for(b=0;b<c.length;b++){this.tiles[b]=[];this.mapPos[b]=[];for(var d=0;d<c[b].length;d++){var e=c[b][d];if(0==e){var f=null,e={row:b,col:d};this.checkEmptyTile.push(e);this.mapPos[b][d]=null}else{f=ig.CallAsset.addFrameImage(0,0,"game/tile");f.anchor.setTo(0.5);f.row=b;f.col=d;var e=c.length,
g=0,l=0,l=(c[b].length-1)/2,g=-f.width*l+f.width*d,l=(e-1)/2,l=-f.height*l+f.height*b;f.x=g;f.y=l;this.mapPos[b][d]={x:g,y:l}}this.tiles[b][d]=f}}this.pieces=[];for(b=0;b<this.tiles.length;b++){this.pieces[b]=[];for(d=0;d<this.tiles[b].length;d++)f=this.tiles[b][d],null==f?this.pieces[b][d]=null:(c=this.createPiece(b,d),c._row=b,c._col=d,c.alpha=1,c.y=f.y,0==f.y&&(c.y+=0.01),c.inputEnabled=!0)}this.gFrontBoard=ig.game.addGroup();this.add(this.gFrontBoard);this.gEffect=ig.game.addGroup();this.add(this.gEffect)},
exchangePieces:function(b,c){curState().checkOnGoing=!0;4==b.powerUpId&&4==c.powerUpId?(this.isDestroyAll=!0,this.actAfterExchange.add(function(){curState().pieceClicked.destroyAll()},this),this.exchangeTween(b,c,!1),curState().checkAfterTutor()):4==b.powerUpId||4==c.powerUpId?(this.exchangeTween(b,c,!1),4==b.powerUpId&&(curState().checkAfterTutor(),this.actAfterExchange.add(function(){curState().pieceClicked.pieceId=curState().pieceHover.pieceId;curState().pieceClicked.onDestroy()},this)),4==c.powerUpId&&
(curState().checkAfterTutor(),this.actAfterExchange.add(function(){curState().pieceHover.pieceId=curState().pieceClicked.pieceId;curState().pieceHover.onDestroy()},this))):1<=b.powerUpId&&3>=b.powerUpId&&1<=c.powerUpId&&3>=c.powerUpId?(curState().checkAfterTutor(),this.exchangeTween(b,c,!1),this.actAfterExchange.add(function(){curState().pieceClicked.onDestroy();curState().pieceHover.onDestroy()},this)):this.exchangeTween(b,c,!0);this.checkSurround(b,c)},exchangeTween:function(b,c,d){if(!this.onGoing){this.onGoing=
!0;this.isChecking=d;d=this.tiles[b.row][b.col];var e=this.tiles[c.row][c.col],f=new Vector2(d.x,d.y),g=new Vector2(e.x,e.y);0==g.x&&(g.x+=0.05);0==g.y&&(g.y+=0.05);0==f.x&&(f.x+=0.05);0==f.y&&(f.y+=0.05);b.isMoving=!0;c.isMoving=!0;(new ig.TweenDef(b)).to({x:g.x,y:g.y},150).onComplete(function(){this.isMoving=!1}.bind(b)).start();(new ig.TweenDef(c)).to({x:f.x,y:f.y},150).onComplete(function(){curState().gBoard.checkAfterExchange();this.isMoving=!1}.bind(c)).start();b.row=e.row;b.col=e.col;b._row=
e.row;b._col=e.col;this.pieces[b.row][b.col]=b;c.row=d.row;c.col=d.col;c._row=d.row;c._col=d.col;this.pieces[c.row][c.col]=c}},checkAfterExchange:function(){this.onGoing=!1;this.isChecking?this.checkSurrounding():curState().pieceClicked?4==curState().pieceClicked.powerUpId&&curState():curState().checkOnGoing=!1;this.actAfterExchange.dispatch();curState().pieceClicked=null;curState().pieceHover=null;this.isChecking=!1;this.actAfterExchange=new ig.AddSignal(this)},checkSurround:function(b,c){this.checkPieceAround(b,
1);this.checkPieceAround(c,2)},checkPieceAround:function(b,c){b&&c&&(this["checkPiece"+c]=b,b.checkMatchAround())},checkSurrounding:function(){var b=this.checkPiece1,c=this.checkPiece2;3>b.checkTilesRow.length&&3>c.checkTilesRow.length&&3>b.checkTilesCol.length&&3>c.checkTilesCol.length?(b.checkTilesCol=[],b.checkTilesRow=[],c.checkTilesCol=[],c.checkTilesRow=[],this.exchangeTween(b,c,!1)):(curState().moveLeft--,1>curState().moveLeft&&(curState().gameOver=!0),b.checkPiecesAround(),c.checkPiecesAround())},
createMatchEffect:function(b){var c="effects/match01",d=ig.GenerateFrameNames("effects/match",1,20,"",2),e=0.02;5==b.powerUpId&&(c="effects/bomb1",d=ig.GenerateFrameNames("effects/bomb",1,9,"",1),e=0.03);c=ig.CallAsset.addFrame(b.x,b.y,c);c.piece=b;c.anchor.setTo(0.5,0.5*c.width/c.height);d=c.addAnim("match",e,d,!0);d.actInFrame=new ig.AddSignal(c);d.actInFrame.add(function(){this.checkIfMatchGoal();curState().gBoard.pieces[this.row][this.col]=null},b);d.onEnterFrame.add(function(){},d);d.onComplete.add(function(){this.currentAnim.actInFrame.dispatch();
this.kill()},c);c.playAnim("match");this.gEffect.add(c);(!b.checkItemGoal()||5==b.powerUpId)&&(new ig.TweenDef(b)).to({alpha:0},160).start()},checkBoard:function(){1E3<=this.countTry||(this.emptyExists=!1,this.countTry++,this.refillRow(),this.checkBlindSpots(),this.emptyExists?this.checkBoard():(this.moveAllPieces(!0),curState().checkOnGoing=!1))},checkBlindSpots:function(){for(var b=1;b<this.maps.length;b++)for(var c=0;c<this.maps[b].length;c++){var d=this.tiles[b][c],e=this.pieces[b][c];if(!(0==
this.maps[b][c]||e)&&0==this.maps[b-1][c])this.trackBlindPath(d,[d]),this.emptyExists=!0}},trackBlindPath:function(b,c){var d=b.col-1,e=b.col+1,f=[],g=[];if(0<=d)for(var l=!0,p=[];l&&0<=d;)if(0==this.maps[b.row][d])l=!1;else{var j=this.tiles[b.row][d];p.push(j);j=this.checkUpperRow(j,f);j.origin?(f=p.concat(j.path),l=!1):d--}if(e<this.maps[b.row].length){l=!0;for(d=[];l&&e<this.maps[b.row].length;)0==this.maps[b.row][e]?l=!1:(p=this.tiles[b.row][e],d.push(p),j=this.checkUpperRow(p,g),j.origin?(g=
d.concat(j.path),l=!1):e++)}if(0==f.length&&0==g.length)b=this.tiles[b.row+1][b.col],c.push(b),this.trackBlindPath(b,c);else{e=-1;l=null;p=c.concat(f);for(f=0;f<p.length;f++){var q=p[f];if(q=this.pieces[q.row][q.col]){e=f;l=q;break}}for(var j=-1,m=null,d=c.concat(g),f=0;f<d.length;f++)if(q=d[f],q=this.pieces[q.row][q.col]){j=f;m=q;break}0<=j&&0<=e?e<j?this.resetPieceMap(p):j<e?this.resetPieceMap(d):ig.game.rnd.pick([m,l])==m?this.resetPieceMap(d):this.resetPieceMap(p):0<=e&&0>j?this.resetPieceMap(p):
0<=j&&0>e&&this.resetPieceMap(d)}},checkUpperRow:function(b,c){var d=!1;if(0==b.row)return!0;for(var e=!0,f=[];!0==e;){var g=b.row-1;0==this.maps[g][b.col]?e=!1:(f.push(this.tiles[g][b.col]),0==g?(d=!0,e=!1,c=c.concat(f)):b=this.tiles[g][b.col])}return{origin:d,path:c}},resetPieceMap:function(b){for(var c=!1,d=1;d<b.length;d++){var e=b[d],f=b[d-1],g=this.pieces[e.row][e.col],l=this.pieces[f.row][f.col];g&&!l?(g.setMapData(f.row,f.col),c=!0):!g&&0==e.row&&(this.createPiece(e.row,e.col),c=!0)}c&&this.resetPieceMap(b)},
refillRow:function(){for(var b=this.maps.length-1,c=0;c<b;c++)for(var d=0;d<this.maps[c].length;d++)if(0!=this.maps[c][d]){var e=this.pieces[c][d];if(null==e)if(0==c)e=this.createPiece(c,d),e.tweenIn();else continue;var f=c+1,g=this.maps[f][d];null==this.pieces[f][d]&&1==g&&(e.setMapData(f,d),this.emptyExists=!0)}},moveAllPieces:function(b){for(var c=0;c<this.pieces.length;c++)for(var d=0;d<this.pieces[c].length;d++){var e=this.pieces[c][d];e&&(1>e.alpha&&e.tweenIn(),e.col==e._col&&e.row==e._row||
e.moveTo(b))}},moveInstanly:function(){for(var b=0;b<this.pieces.length;b++)for(var c=0;c<this.pieces[b].length;c++){var d=this.pieces[b][c];if(d&&(!d.isBreak&&!d.isMoving&&!d.onGoing)&&!(d.col==d._col&&d.row==d._row)){var e=this.tiles[d.row][d.col],f=e.x,e=e.y;0==f&&(f+=0.05);0==e&&(e+=0.05);d.x=f;d.y=e;d._row=d.row;d._col=d.col;d.onGoing=!1;d.isBreak=!1}}},createPiece:function(b,c,d,e){var f=this.tiles[b][c],g=f.x,f=f.y-0.75*f.height,l=ig.game.rnd.realInRange(0,100);void 0==d&&(d=0);var p=EntityPiece;
e=e?e:ig.game.rnd.pick(curState().pieceTypes);if(0<d)p=EntityPowerUp;else if(95<l&&!curState().gList.isCompleted&&curState().pageReady){var l=ig.GameData.stage,p=ig.GameData.unlockPowerUp,j=ig.game.rnd.realInRange(0,100);80>=j&&l>=p[0]?d=ig.game.rnd.integerInRange(1,3):80<j&&l>=p[1]?d=4:80<j&&l>=p[2]&&(d=ig.game.rnd.pick([4,5]));p=EntityPowerUp}d=ig.game.spawnEntity(p,g,f,{pieceId:e,powerUpId:d});d.anchor.setTo(0.5);d.row=b;d.col=c;this.gPieces.add(d);g=ig.game.rnd.realInRange(1,100);f=30;5>=ig.GameData.stage&&
(f=10);g<=f&&d.createSparkling();return this.pieces[b][c]=d},checkAllMovement:function(){this.countCheck++;for(var b=!1,c=0;c<this.pieces.length;c++)for(var d=0;d<this.pieces[c].length;d++){var e=this.pieces[c][d];if(e&&(e.isMoving||e.isBreak||e.isIn))b=!0}0<this.gEffect.children.length&&(b=!0);return b},checkAfterMoving:function(){for(var b=0;b<this.pieces.length;b++)for(var c=0;c<this.pieces[b].length;c++){var d=this.pieces[b][c];d&&(d.exists&&!d.isBreak)&&!(d.row==d._row&&d.col==d._col)&&(d._row=
d.row,d._col=d.col,d.isChecking?d.checkMatchAround():(d.checkTilesCol=[],d.checkTilesRow=[]),d.checkPiecesAround(),d.checkTilesCol=[],d.checkTilesRow=[])}this.isDestroyAll=!1},checkPossibleMove:function(){for(var b=!1,c=[],d=[],e=[],f=0;f<curState().pieceTypes.length;f++)d.push(0);var g=!1,f=0;a:for(;f<this.maps.length;f++){var l=0;for(;l<this.maps[f].length;l++){var c=[],p=this.pieces[f][l];if(0!=this.maps[f][l]&&p){e.push(p);if(3<p.powerUpId&&curState().pageReady){b=!0;c=[];break a}var j=null;0<=
f-1&&this.pieces[f-1][l]&&(j=this.pieces[f-1][l],c=[p,j],b=this.checkPoss(p,j));b||(j=null,f+1<this.pieces.length&&this.pieces[f+1][l]&&(j=this.pieces[f+1][l],c=[p,j],b=this.checkPoss(p,j)));b||(j=null,0<=l-1&&this.pieces[f][l-1]&&(j=this.pieces[f][l-1],c=[p,j],b=this.checkPoss(p,j)));b||(j=null,l+1<this.pieces[f].length&&this.pieces[f][l+1]&&(j=this.pieces[f][l+1],c=[p,j],b=this.checkPoss(p,j)));p=curState().pieceTypes.indexOf(p.pieceId);d[p]+=1;3<=d[p]&&(g=!0);if(b)break a}}}!b&&curState().gList.isCompleted&&
(b=!0);b?(curState().matches=c,curState().pageReady?this.moveAllPieces(!1):this.checkAfterShuffle()?this.reshuffle():this.moveInstanly(!1)):(curState().matches=[],g||(b=ig.game.rnd.pick(e),this.replacePiece(b)),this.reshuffle())},checkPoss:function(b,c){var d=!1;if(!b||!c)return d;var e=b.row,f=b.col,g=c.row,l=c.col;b.row=g;b.col=l;c.row=e;c.col=f;b.checkMatchAround();c.checkMatchAround();if(3<=b.checkTilesRow.length||3<=b.checkTilesCol.length||3<=c.checkTilesRow.length||3<=c.checkTilesCol.length)b.pieceId!=
c.pieceId&&(d=!0);0<b.powerUpId&&0<c.powerUpId&&(d=!0);b.row=e;b.col=f;c.row=g;c.col=l;return d},replacePiece:function(b,c,d){if(b){if(!c||0>=c)c=ig.game.rnd.pick([4,5]);var e=this.tiles[b.row][b.col];c=this.createPiece(b.row,b.col,c,d);c._row=b.row;c._col=b.col;c.y=e.y;0==e.y&&(c.y+=0.01);c.alpha=1;c.inputEnabled=!0;b.kill()}},reshuffle:function(){for(var b=[],c=0;c<this.pieces.length;c++)for(var d=0;d<this.pieces[c].length;d++){var e=this.pieces[c][d];e&&b.push(e)}this.pieces=[];for(c=0;c<this.maps.length;c++){this.pieces[c]=
[];for(d=0;d<this.maps[c].length;d++)if(0==this.maps[c][d])this.pieces[c][d]=null;else{for(e=null;!e;){var f=ig.game.rnd.integerInRange(0,b.length-1),e=b[f];b.splice(f,1)}e.row=c;e.col=d;this.pieces[c][d]=e}}this.checkAfterShuffle()?this.reshuffle():this.checkPossibleMove()},checkAfterShuffle:function(){for(var b=!1,c=0;c<this.pieces.length;c++)for(var d=0;d<this.pieces[c].length;d++){var e=this.pieces[c][d];if(e&&!e.isBreak){e.checkMatchAround();if(3<=e.checkTilesCol.length||3<=e.checkTilesRow.length)b=
!0;e.checkTilesCol=[];e.checkTilesRow=[]}}return b},update:function(){this.parent();!this.checkAllMovement()&&(!this.onGoing&&curState().pageReady)&&(curState().checkOnGoing?this.isCheckingBoard||(this.isCheckingBoard=!0,this.checkBoard(),this.countTry=0):(this.isCheckingBoard?this.isCheckingBoard=!1:curState().gameOver?curState().gameEnd():this.checkPossibleMove(),this.checkAfterMoving()),0<this.countCheck&&(this.countCheck=0))}})});ig.baked=!0;
ig.module("game.entities.objects.result").requires("game.entities.addon.group").defines(function(){EntityResult=EntityGroup.extend({isCompleted:!1,init:function(b,c,d){this.parent(b,c,d);this.create()},create:function(){this.isIn=!1;this.bg=ig.CallAsset.addFrameImage(0,0,"ingame/settings/settings");this.bg.anchor.setTo(0.5);this.bg.setScale(1,1.2);this.add(this.bg);this.bg.setProperty();this.ribbon=ig.CallAsset.addFrameImage(0,0.43*-this.bg.size.y,"game/result-ribbon");this.ribbon.anchor.setTo(0.5);
this.add(this.ribbon);this.stars=[];for(var b=0;3>b;b++){var c=ig.CallAsset.addFrameImage(0,0.28*-this.bg.size.y,"game/result-star-bg");c.anchor.setTo(0.5);this.add(c);c.x=-(1.1*c.size.x)+1.1*c.size.x*b;0==b?(c.angle=-10,c.y+=5):2==b&&(c.angle=10,c.y=this.stars[0].y);var d=ig.CallAsset.addFrameImage(c.x,c.y,"game/result-star");d.anchor.setTo(0.5);d.angle=c.angle;d.scale.setTo(0);this.add(d);c.starOn=d;this.stars.push(c)}this.scoreTxt=ig.game.addText(-(0.3*this.bg.size.x),0.14*-this.bg.size.y,_STRINGS.Game.score,
70,fonts.font1);this.scoreTxt.anchor.setTo(0,0.5);this.scoreTxt.fill="#cc7509";this.add(this.scoreTxt);this.showScore=ig.game.addText(0.3*this.bg.size.x,this.scoreTxt.y,"0000",this.scoreTxt.fontSize,fonts.font1);this.showScore.anchor.setTo(1,0.5);this.showScore.fill="white";this.add(this.showScore);this.highScoreTxt=ig.game.addText(this.scoreTxt.x,this.scoreTxt.y+1.2*this.scoreTxt.size.y,_STRINGS.Game.highscore,this.scoreTxt.fontSize,fonts.font1);this.highScoreTxt.anchor.setTo(0,0.5);this.highScoreTxt.fill=
this.scoreTxt.fill;this.add(this.highScoreTxt);this.showHigh=ig.game.addText(this.showScore.x,this.highScoreTxt.y,"0000",this.highScoreTxt.fontSize,fonts.font1);this.showHigh.anchor.setTo(1,0.5);this.showHigh.fill="white";this.add(this.showHigh);this.goalBox=ig.CallAsset.addFrameImage(0,0.12*this.bg.size.y,"game/result-list");this.goalBox.anchor.setTo(0.5);this.add(this.goalBox);this.homeBtn=ig.CallAsset.addFrame(0.2*-this.bg.size.x,0.31*this.bg.size.y,"ingame/buttons/menu",{},EntityClickBtn);this.homeBtn.onClick.add(function(){ig.game.changePage(LevelMainmenu)},
this);this.add(this.homeBtn);this.replayBtn=ig.CallAsset.addFrame(0,this.homeBtn.y,"ingame/buttons/replay",{},EntityClickBtn);this.replayBtn.onStartClick.add(function(){ig.game.disableBtns()},this);this.replayBtn.onClick.add(function(){ig.game.changePage(LevelGameplay)},this);this.add(this.replayBtn);this.nextBtn=ig.CallAsset.addFrame(0.2*this.bg.size.x,this.homeBtn.y,"ingame/buttons/next-stage",{},EntityClickBtn);this.nextBtn.onClick.add(function(){var b=ig.GameData.stage+1;b<ig.GameData.totalStages?
(ig.GameData.stage=b,ig.game.changePage(LevelGameplay)):ig.game.changePage(LevelMainmenu)},this);this.add(this.nextBtn);this.prepare()},createList:function(){for(var b=curState().gList.items,c=!0,d=0.85*this.goalBox.width/5,e=d*b.length,f=0;f<b.length;f++){var g=b[f],l=ig.CallAsset.addFrameImage(this.goalBox.x,this.goalBox.y,"game/gem"+g.jewelId);l.anchor.setTo(0.5);l.scale.setTo(0.8);this.add(l);l.setProperty();l.x=this.goalBox.x-e/2+d/2+d*f;l=ig.CallAsset.addFrameImage(l.x+0.4*l.width*l.scale.x,
l.y+0.35*l.height*l.scale.y,"game/result-uncomplete");l.anchor.setTo(1);0==g.itemLeft?l.frameName="game/result-complete":c=!1;this.add(l)}c?(b=curState().plScore,this.showScore.setText(ig.game.writeThousands(b)),d=b,ig.GameData.stage<ig.game.sessionData.highScores.length?(d=ig.game.sessionData.highScores[ig.GameData.stage],b>d&&(d=b,ig.game.sessionData.highScores[ig.GameData.stage]=d,ig.game.save("highScores",ig.game.sessionData.highScores))):(ig.game.sessionData.highScores.push(d),ig.game.save("highScores",
ig.game.sessionData.highScores))):(this.showScore.setText("---"),this.nextBtn.inputEnabled=!1,this.nextBtn.frameName="ingame/buttons/next-stage-off",d="---",ig.GameData.stage<ig.game.sessionData.highScores.length&&(d=ig.game.sessionData.highScores[ig.GameData.stage]));this.showHigh.setText(ig.game.writeThousands(d));this.isCompleted=c},prepare:function(){this.alpha=0;this.y=0.6*-this.size.y},tweenIn:function(){this.isIn||(this.isIn=!0,this.createList(),curState().greyBg.alpha=1,curState().greyBg.visible=
!0,(new ig.TweenDef(curState().greyBg)).to({alpha:1},300).onComplete(this.tweenStars.bind(this)).start(),(new ig.TweenDef(this)).to({alpha:1,y:curState().centerY},300).start())},tweenStars:function(){for(var b=0,c=0;c<curState().stars.length;c++){var d=curState().stars[c];"on"==d.inState&&b++}this.isCompleted?ig.GameData.stage<ig.game.sessionData.unlockedStages.length?b>ig.game.sessionData.unlockedStages[ig.GameData.stage]&&(ig.game.sessionData.unlockedStages[ig.GameData.stage]=b,ig.game.save("unlockedStages",
ig.game.sessionData.unlockedStages)):(ig.game.sessionData.unlockedStages.push(b),ig.game.save("unlockedStages",ig.game.sessionData.unlockedStages)):b=0;for(c=0;c<b;c++){var d=this.stars[c].starOn,e=200*c,f=(new ig.TweenDef(d.scale)).to({x:1,y:1},200),d=(new ig.TweenDef(d.scale)).to({x:1.2,y:1.2},200).delay(e).onStart(function(){csound.sfxPlay("starpop")}.bind(this));d.chain(f);d.start()}},update:function(){this.parent();270<=this.showScore.width&&1==this.showScore.scale.x&&this.showScore.scale.setTo(270/
this.showScore.width);270<=this.showHigh.width&&1==this.showHigh.scale.x&&this.showHigh.scale.setTo(270/this.showHigh.width)}})});ig.baked=!0;
ig.module("game.entities.objects.line-effects").requires("game.entities.addon.group").defines(function(){EntityLineEffects=EntityGroup.extend({targets:[],particles:[],particleMax:100,speed:20,typePowerUp:1,init:function(b,c,d){this.parent(b,c,d);this.startBounds=[];this.effects=[];this.startMoving=!1;this.settingLineEffect();this.settingDoughnutCircle();this.tweenLine()},settingDoughnutCircle:function(){this.outerCircle=ig.CallAsset.addFrame(0,0,"effects/match01");this.outerCircle.anchor.setTo(0.5,
0.5*this.outerCircle.width/this.outerCircle.height);this.outerCircle.scale.setTo(0);this.add(this.outerCircle);var b=ig.GenerateFrameNames("effects/match",1,20,"",2);this.outerCircle.addAnim("match",0.02,b,!0).onComplete.add(function(){this.outerCircle.kill()},this)},settingLineEffect:function(){var b=this.targets[0],c=b.powerUpId,d=["left","right"],e=0;1==c&&(e=90,d=["up","down"]);var f=180,g=2;3==c&&(g=4,f=90,d=["left","up","right","down"]);for(c=0;c<g;c++){var l=ig.CallAsset.addFrame(0,0,"effects/1");
l.anchor.setTo(0.25,0.5);var p=ig.GenerateFrameNames("effects/",1,6,"",1);l.addAnim("run",0.15,p,!1);l.playAnim("run");l.angle=e+c*f;l.animSheet.size.x=0;l.onGoing=!0;l.goTo=d[c];l.targetPiece=null;l.targets=[];l.isOut=!1;l.alpha=0;this.add(l);(new ig.TweenDef(l)).to({alpha:1},100).start();this.pieceTargets(l,b.row,b.col);this.effects.push(l)}},pieceTargets:function(b,c,d){var e=curState().gBoard.pieces;if("left"==b.goTo){if(d-=1,0<=d){if((e=e[c][d])&&!e.isBreak&&0>b.targets.indexOf(e))e.isBreak=
!0,e.isMoving=!0,b.targets.push(e);this.pieceTargets(b,c,d)}}else if("right"==b.goTo){if(d+=1,d<e[c].length){if((e=e[c][d])&&!e.isBreak&&0>b.targets.indexOf(e))e.isBreak=!0,e.isMoving=!0,b.targets.push(e);this.pieceTargets(b,c,d)}}else if("up"==b.goTo){if(c-=1,0<=c){if((e=e[c][d])&&!e.isBreak&&0>b.targets.indexOf(e))e.isBreak=!0,e.isMoving=!0,b.targets.push(e);this.pieceTargets(b,c,d)}}else if("down"==b.goTo&&(c+=1,c<e.length)){if((e=e[c][d])&&!e.isBreak&&0>b.targets.indexOf(e))e.isBreak=!0,e.isMoving=
!0,b.targets.push(e);this.pieceTargets(b,c,d)}},moveEffects:function(){if(this.startMoving)for(var b=this.targets[0],c=this.speed*ig.GameData.fps*ig.system.tick,d=0;d<this.effects.length;d++){var e=this.effects[d];if(e.onGoing){var f=e.getBounds(),b=null;if(0<e.targets.length&&(b=e.targets[0]))var g=b.getBounds(),l=ig.game.math.distance(this.pos.x,this.pos.y,g.centerX,g.centerY),p=ig.game.math.angleBetween(this.pos.x,this.pos.y,g.centerX,g.centerY),g=Math.cos(p)*l,l=Math.sin(p)*l,l=new Vector2(g,
l);"left"==e.goTo?(e.x-=c,0<e.targets.length&&b&&(g=ig.game.math.distance(e.x,e.y,l.x,e.y),g<=c&&(e.x=l.x,this.destroyTarget(e,b))),Math.abs(e.x)):"right"==e.goTo?(e.x+=c,0<e.targets.length&&b&&(g=ig.game.math.distance(e.x,e.y,l.x,e.y),g<=c&&(e.x=l.x,this.destroyTarget(e,b))),Math.abs(e.x)):"up"==e.goTo?(e.y-=c,0<e.targets.length&&b&&(g=ig.game.math.distance(e.x,e.y,e.x,l.y),g<=c&&(e.y=l.y,this.destroyTarget(e,b))),Math.abs(e.y)):"down"==e.goTo&&(e.y+=c,0<e.targets.length&&b&&(g=ig.game.math.distance(e.x,
e.y,e.x,l.y),g<=c&&(e.y=l.y,this.destroyTarget(e,b))),Math.abs(e.y));if(!e.isOut)if(0>=e.targets.length)e.isOut=!0,this.hideEffect(e);else if(curState(),b=ig.game.gh,f.x>ig.game.gw||0>f.right||f.y>b||0>f.bottom)e.isOut=!0,this.hideEffect(e)}}},destroyTarget:function(b,c){c.onDestroy();var d=b.targets.indexOf(c);b.targets.splice(d,1);0==b.targets.length&&this.hideEffect(b)},hideEffect:function(b){b.isOut&&(b.isOut=!0,(new ig.TweenDef(b)).to({alpha:0},300).onComplete(function(){this.onGoing=!1}.bind(b)).start())},
checkLeftOver:function(){for(var b=0;b<this.effects.length;b++)for(var c=this.effects[b].targets,d=0;d<c.length;d++)c[d].onDestroy()},update:function(){this.parent();this.moveEffects();var b=!1;if(0!=this.effects.length){for(var c=0;c<this.effects.length;c++)this.effects[c].onGoing&&(b=!0);b||(this.checkLeftOver(),this.kill())}},tweenLine:function(){var b=new ig.TweenDef(this.outerCircle.scale);b.to({x:1,y:1},100);b.onComplete(function(){this.startMoving=!0;this.outerCircle.playAnim("match")}.bind(this));
b.start()},tweenAlphaOuter:function(){var b=new ig.TweenDef(this.outerCircle);b.to({alpha:0},100);b.start()},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.objects.samecolor-effect").requires("game.entities.addon.group").defines(function(){EntitySamecolorEffect=EntityGroup.extend({targets:[],breakPieces:!1,sourceTarget:{},onCompletes:[],speed:10,isMoving:!0,init:function(b,c,d){this.parent(b,c,d);this.effects=[];this.createEffects()},createEffects:function(){for(var b=0;b<this.targets.length;b++){var c=this.targets[b];c.isMoving=!0;c.isBreak=!0;var d=this.onCompletes[b]?this.onCompletes[b]:this.tweenOnComplete.bind(this),e=ig.game.math.angleBetween(this.x,
this.y,c.x,c.y),e=ig.game.math.radToDeg(e)+180,e=ig.game.math.degToRad(e),f=ig.CallAsset.addFrame(0,0,"effects/match01");f.anchor.setTo(0.5,0.5*f.width/f.height);var g=ig.GenerateFrameNames("effects/match",6,8,"",2);f.addAnim("run",0.02,g,!0);f.playAnim("run");f.rotation=e;f.onGoing=!0;f.isMoving=!0;f.targetPiece=c;f.breakPieces=this.breakPieces;f.onComplete=d;this.add(f);this.effects.push(f)}},tweenEffect:function(b,c){var d=c.getBounds(),e=ig.game.math.distance(this.pos.x,this.pos.y,d.centerX,d.centerY),
f=ig.game.math.angleBetween(this.pos.x,this.pos.y,d.centerX,d.centerY),d=this.x+Math.cos(f)*e,e=this.y+Math.sin(f)*e,d=new Vector2(d,e),e=d.x,d=d.y;(new ig.TweenDef(b)).to({x:e,y:d},300).onComplete(function(){if(this.breakPieces){if(this.onComplete)this.onComplete(this.targetPiece,this)}else if(this.onComplete&&"function"==typeof this.onComplete.dispatch)this.onComplete.dispatch();else if(this.onComplete)this.onComplete(this.targetPiece,this);(new ig.TweenDef(this)).to({alpha:0},200).onComplete(function(){this.onGoing=
!1}.bind(this)).start()}.bind(b)).start()},tweenOnComplete:function(b){(new ig.TweenDef(b.scale)).to({x:1.2,y:1.2},200).easing(ig.Tween.Easing.Quadratic.EaseOut).onComplete(function(){curState().timeEvent.add(0.2,function(){this.onDestroy()},this)}.bind(b)).start()},moveEffects:function(){for(var b=0;b<this.effects.length;b++){var c=this.effects[b];if(c.onGoing&&c.isMoving){var d=c.targetPiece;d.getBounds();var e=ig.game.math.distance(this.x,this.y,d.x,d.y),f=ig.game.math.angleBetween(this.x,this.y,
d.x,d.y),d=Math.cos(f)*e,g=Math.sin(f)*e,d=new Vector2(d,g),e=e/this.speed,e=e*ig.system.tick*ig.GameData.fps,g=e*Math.cos(f),f=e*Math.sin(f),g=c.x+g,f=c.y+f;ig.game.math.distance(c.x,c.y,d.x,d.y)<=e&&(g=d.x,f=d.y,c.isMoving=!1);c.x=g;c.y=f}}},doOnCOmplete:function(){for(var b=0;b<this.effects.length;b++){var c=this.effects[b];if(!c.isMoving){if(this.breakPieces){if(c.onComplete)c.onComplete(c.targetPiece,c)}else if(c.onComplete&&"function"==typeof c.onComplete.dispatch)c.onComplete.dispatch();else if(c.onComplete)c.onComplete(c.targetPiece,
c);(new ig.TweenDef(c)).to({alpha:0},200).onComplete(function(){this.onGoing=!1}.bind(c)).start()}}},update:function(){this.parent();if(0!=this.effects.length){this.moveEffects();for(var b=!1,c=!1,d=0;d<this.effects.length;d++){var e=this.effects[d];e.onGoing&&(b=!0);e.isMoving&&(c=!0)}!c&&this.isMoving&&(this.isMoving=!1,this.doOnCOmplete());b||this.kill()}},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.objects.canvas-sheet").requires("game.entities.addon.manual-draw-entity","plugins.addon.custom-canvas").defines(function(){EntityCanvasSheet=EntityManualDrawEntity.extend({init:function(b,c,d){this.parent(b,c,d);this.canvasImg=new ig.ImageCanvas;this.setShape(this.canvasImg.width,this.canvasImg.height);this.anchor.setTo(0.5)},drawShape:function(){var b=ig.system.context;b.save();this.canvasImg.draw(0,0);b.restore()}});ig.ImageCanvas=ig.CustomCanvas.extend({drawEle:null,exists:!0,
init:function(b,c){this.tileRaw=ig.Image.cache[imgCache.game.path.img];this.tileImgData=ig.CallAsset.searchSpriteData("game/tile");this.x=b?b:0;this.y=c?c:0;var d=ig.GameData.stageMaps[curState().mapId];this.parent("gameBg",this.tileImgData.frame.w*d[0].length,this.tileImgData.frame.h*d.length)},drawImageCanvas:function(b){var c=b.canvas;b.save();b.clearRect(0,0,c.width,c.height);for(var c=curState().mapId,c=ig.GameData.stageMaps[c],d=0;d<c.length;d++)for(var e=0;e<c[d].length;e++)if(1==c[d][e]){var f=
this.tileImgData,g=0,l=0,g=f.frame.w*e,l=f.frame.h*d;this.tileRaw.drawCtx(b,g,l,f.frame.x,f.frame.y,f.frame.w,f.frame.h)}b.restore()}})});ig.baked=!0;
ig.module("game.entities.objects.canvas-upbar").requires("game.entities.addon.manual-draw-entity","plugins.addon.custom-canvas").defines(function(){CanvasUpbar=ig.CustomCanvas.extend({exists:!0,pieceTypes:[],init:function(b){this.gameImg=ig.Image.cache[imgCache.game.path.img];this.headerData=ig.CallAsset.searchSpriteData("game/header");this.parent("upperBar",this.headerData.frame.w,this.headerData.frame.h,b)},drawImageCanvas:function(b){var c=b.canvas;b.save();b.clearRect(0,0,c.width,c.height);var d,
e,f=this.headerData.frame.w,g=this.headerData.frame.h,l=this.headerData.frame.x,p=this.headerData.frame.y,c=f,j=g;this.gameImg.drawCtx(b,0,0,l,p,f,g);d=ig.CallAsset.searchSpriteData("game/btn-bg");f=d.frame.w;g=d.frame.h;l=d.frame.x;p=d.frame.y;this.gameImg.drawCtx(b,c-f-5,5,l,p,f,g);d=ig.CallAsset.searchSpriteData("game/small-box");f=d.frame.w;g=d.frame.h;l=d.frame.x;p=d.frame.y;d=0.5*c+0.33*c-0.5*f;e=0.5*j-0.5*g;this.gameImg.drawCtx(b,d,e,l,p,f,g);g="50px "+fonts.font1;b.fillStyle="white";b.textBaseline=
"alphabetic";b.font=g;b.textAlign="center";d+=0.5*f;b.fillText(_STRINGS.Game.score,d,e-15);f=_t(_STRINGS.Game.level,ig.GameData.stage+1);g="70px "+fonts.font1;b.fillStyle="white";b.textBaseline="alphabetic";b.font=g;b.textAlign="center";b.fillText(f,0.17*c,0.5*j+36);g="40px "+fonts.font1;b.fillStyle="#ffc328";b.textBaseline="alphabetic";b.font=g;b.textAlign="center";b.fillText(_STRINGS.Game.move,0.5*c,0.4*j+16);b.restore()}});EntityCanvasUpbar=EntityManualDrawEntity.extend({init:function(b,c,d){this.parent(b,
c,d);this.image=new CanvasUpbar(d);this.setShape(this.image.width,this.image.height);this.anchor.setTo(0.5,0)},drawShape:function(){var b=ig.system.context;b.save();this.image.draw(0,0);b.restore()}})});ig.baked=!0;
ig.module("game.entities.objects.test-powerup").requires("game.entities.objects.play-board","game.entities.objects.piece").defines(function(){EntityPiece.inject({setImage:function(){if(3<this.powerUpId)var b="game/powerup"+this.powerUpId;else 0<this.powerUpId&&3>=this.powerUpId?b="game/effects/line/gem"+this.pieceId+"-"+this.powerUpId:(b=this.pieceId,0>=this.pieceId&&(b=1),b="game/gem"+b);this.frameName=b}});EntityPlayBoard.inject({testPowerUp4:function(b){for(var c=[],d=[],e=0;e<this.pieces.length;e++)for(var f=
0;f<this.pieces[e].length;f++){var g=this.pieces[e][f];if(g=this.tiles[e][f])isNaN(c[f])&&(c[f]=0),isNaN(d[e])&&(d[e]=0),c[f]++,d[e]++}f=null;if("row"==b.toChange)for(e=0;e<c.length;e++){if(!("left"==b.fromSide&&0==e)&&!("right"==b.fromSide&&e==this.maps[0].length-1)&&(g=c[e],g==this.maps.length))for(var l=0;5>l;l++){var d=e-1,p=e+1;if(0<=d&&(g=this.tiles[l][d])&&"left"==b.fromSide){f={};f.toSlide={row:l,col:d};f.toChange={row:null,col:e};break}if(0<=p&&(g=this.tiles[l][p])&&"right"==b.fromSide){f=
{};f.toSlide={row:l,col:d};f.toChange={row:null,col:e};break}}}else if("col"==b.toChange)for(l=0;l<d.length;l++)if(!("up"==b.fromSide&&0==l)&&!("down"==b.fromSide&&l==this.maps.length-1)&&(g=d[l],g==this.maps[l].length))for(c=0;5>c;c++){e=l-1;p=l+1;if(0<=e&&(g=this.tiles[e][c])&&"up"==b.fromSide){f={};f.toSlide={row:e,col:c};f.toChange={row:l,col:null};break}if(0<=p&&(g=this.tiles[p][c])&&"down"==b.fromSide){f={};f.toSlide={row:e,col:c};f.toChange={row:l,col:null};break}}if(f){d=curState().pieceTypes[0];
e=curState().pieceTypes[1];if("row"==b.toChange)for(l=0;5>l;l++)g=this.pieces[l][f.toChange.col],g.pieceId=l==f.toSlide.row?e:d,g.powerUpId=0,g.setImage();else if("col"==b.toChange)for(c=0;5>c;c++)g=this.pieces[f.toChange.row][c],g.pieceId=c==f.toSlide.col?e:d,g.powerUpId=0,g.setImage();b=this.pieces[f.toSlide.row][f.toSlide.col];b.pieceId=d;b.powerUpId=0;b.setImage()}}})});ig.baked=!0;
ig.module("game.entities.controllers.gameplay-ctrl").requires("game.entities.addon.page-controller","game.entities.objects.item-list","game.entities.objects.play-board","game.entities.objects.result","game.entities.objects.line-effects","game.entities.objects.samecolor-effect","game.entities.objects.canvas-sheet","game.entities.objects.canvas-upbar","game.entities.objects.test-powerup").defines(function(){EntityGameplayCtrl=EntityPageController.extend({init:function(b,c,d){this.parent(b,c,d);ig.global.wm||
this.create()},create:function(){ig.soundHandler.bgmPlayer.volume(ig.game.sessionData.bgmVol);ig.soundHandler.sfxPlayer.volume(ig.game.sessionData.sfxVol);this.gInGame=ig.game.addGroup(0.001,0.001);this.gInFront=ig.game.addGroup();this.gamePaused=this.gameOver=!1;this.gameStart=!0;var b=ig.GameData.stage,c=parseInt(ig.GameData.stage/5);c>=ig.GameData.stageMaps.length&&(c=ig.game.rnd.integerInRange(0,ig.GameData.stageMaps.length-1));this.mapId=c;this.pieceTypes=[];var d=5+parseInt(ig.GameData.stage/
2);6<d&&(d=6);for(c=0;c<d;c++){for(var e=null;!e;){var f=ig.game.rnd.integerInRange(2,9);0>this.pieceTypes.indexOf(f)&&(e=f)}this.pieceTypes.push(e)}var d=[],g=2+ig.GameData.stage;g>this.pieceTypes.length&&(g=this.pieceTypes.length);5<g&&(g=5);for(c=0;c<g;c++){for(e=null;!e;)f=ig.game.rnd.pick(this.pieceTypes),0>d.indexOf(f)&&(e=f);d.push(e)}this.itemLists=d;this.plScore=0;this.moveLeft=ig.GameData.defaultMoves+(parseInt(2*(b/5))+10);parseInt(ig.GameData.stage/5);this.stageScore=ig.GameData.defaultScore+
b*1.2*ig.GameData.defaultScore;this.stageScore=parseInt(this.stageScore);this.pieceHover=this.pieceClicked=null;this.checkOnGoing=!1;this.hintCD=0;this.maxHint=10;this.matches=[];this.handTutor=this.hintSign=null;this.createGreyBg();this.bg=ig.CallAsset.addImage(this.centerX,this.centerY,"bg-01");this.bg.anchor.setTo(0.5);this.gBG.add(this.bg);this.gHeader=ig.game.addGroup(this.centerX,0);this.gInFront.add(this.gHeader);this.upHeader=ig.game.addGroup(0,0,{pieceTypes:this.itemLists},EntityCanvasUpbar);
this.gHeader.add(this.upHeader);this.gList=ig.game.addGroup(0,0.2*this.gh,{itemLists:this.itemLists},EntityItemList);this.gHeader.add(this.gList);this.pauseG=ig.game.addGroup();this.gFront.add(this.pauseG);c=ig.CallAsset.searchSpriteData("game/btn-bg");this.pauseBtn=ig.CallAsset.addFrame(this.upHeader.x+0.5*this.upHeader.width-0.5*c.frame.w-5,this.upHeader.y+0.5*c.frame.h+2,"ingame/buttons/pause-btn",{},EntityClickBtn);this.pauseBtn.onStartClick.add(this.startPause,this);this.pauseBtn.onClick.add(this.createPause,
this);this.gHeader.add(this.pauseBtn);this.greyBg.alpha=0;c=ig.CallAsset.searchSpriteData("game/small-box");this.showScore=ig.game.addText(0.33*this.upHeader.size.x,0.5*this.upHeader.size.y+2,this.plScore+"",Math.floor(0.6*c.frame.h),fonts.font1);this.showScore.anchor.setTo(0.5);this.gHeader.add(this.showScore);this.showMoves=ig.game.addText(0,0.7*this.upHeader.size.y,this.moveLeft+"",120,fonts.font1);this.showMoves.anchor.setTo(0.5);this.gHeader.add(this.showMoves);this.gBoard=ig.game.addGroup(this.centerX,
0.55*this.gh,{},EntityPlayBoard);this.gBoard.scale.setTo(0.88);this.gInGame.add(this.gBoard);this.gStars=ig.game.addGroup(this.centerX,0.91*this.gh);this.gInFront.add(this.gStars);this.starBarBg=ig.CallAsset.addFrameImage(0,0,"game/star-bar-bg");this.starBarBg.anchor.setTo(0.5);this.gStars.add(this.starBarBg);this.starBar=ig.CallAsset.addFrameImage(-1,-6,"game/star-bar");this.starBar.anchor.setTo(0.5);this.gStars.add(this.starBar);this.stars=[];this.borderStars=b=[0.5,0.75,0.95];for(c=0;3>c;c++)e=
ig.CallAsset.addFrameImage(0,this.starBarBg.y+0.5*this.starBarBg.size.y-10,"game/star-tag-off"),e.anchor.setTo(0.5,1),e.inState="off",this.gStars.add(e),e.x=this.starBar.x-0.5*this.starBar.width+this.starBar.width*b[c],this.stars.push(e);this.resultGroup=ig.game.addGroup();this.gFront.add(this.resultGroup);this.gCont.add(this.gInGame);this.gCont.add(this.gInFront);this.pageReady=!1;this.chain=0;this.showFps&&(this.showFps.x=10,this.showFps.anchor.setTo(0));this.updateOnOrientationChange();this.startGame()},
updateOnOrientationChange:function(){this.parent();var b=Math.max(ig.system.width/this.bg.width,ig.system.height/this.bg.height);this.bg.scale.setTo(b);b=(ig.system.height-this.gh)/2;this.gHeader.y=-b+0.01;this.gStars.y=0.9*this.gh+b},startGame:function(){this.gBoard.checkPossibleMove();this.checkTutor()},createPause:function(){this.gPause=ig.game.addGroup(this.centerX,this.centerY,{},EntityOptions);this.gPause.pauseFunction();this.gPause.onResume.add(this.resumeGame,this);this.gPause.appear();this.pauseG.add(this.gPause)},
checkTutor:function(){console.log("read tutor");this.tutorMatches=[];for(var b=0;b<this.matches.length;b++)this.tutorMatches.push(this.matches[b]);var b=ig.GameData.stage,c=ig.GameData.unlockPowerUp;if(0==b)this.createHand(),this.timeEvent.add(0.2,this.tweenHand,this),this.hintCD=this.maxHint;else if(b==c[0]){this.gBoard.checkPoss(this.matches[0],this.matches[1]);var b=3<=this.matches[0].checkTilesCol.length||3<=this.matches[0].checkTilesRow.length?this.matches[0]:this.matches[1],c=this.matches.indexOf(b),
d=ig.game.rnd.integerInRange(1,3);this.gBoard.replacePiece(b,d,b.pieceId);this.matches[c]=this.gBoard.pieces[b.row][b.col];this.tutorMatches[c]=this.gBoard.pieces[b.row][b.col];this.createHand();this.timeEvent.add(0.2,this.tweenHand,this);this.createHint()}else if(b==c[1])c=0,b=this.matches[c],this.gBoard.replacePiece(b,4),this.matches[c]=this.gBoard.pieces[b.row][b.col],this.tutorMatches=this.matches,this.createHint(),this.createHand(),this.timeEvent.add(0.2,this.tweenHand,this);else if(b==c[2])c=
0,b=this.matches[c],this.gBoard.replacePiece(b,5),this.tutorMatches[c]=this.gBoard.pieces[b.row][b.col],this.matches[c]=this.gBoard.pieces[b.row][b.col],this.createHand(),this.timeEvent.add(0.2,function(){(new ig.TweenDef(this.handTutor.scale)).to({x:1.1,y:1.1},1E3).yoyo(!0).repeat(-1).start()},this);else if(b==c[2]+1){for(b=0;b<this.matches.length;b++)c=this.matches[b],this.gBoard.replacePiece(c,4),this.matches[b]=this.gBoard.pieces[c.row][c.col],this.tutorMatches[b]=this.gBoard.pieces[c.row][c.col];
this.createHand();this.timeEvent.add(0.2,this.tweenHand,this);this.createHint()}else if(b==c[3]){for(b=0;b<this.matches.length;b++)c=this.matches[b],d=ig.game.rnd.integerInRange(1,3),this.gBoard.replacePiece(c,d,c.pieceId),this.matches[b]=this.gBoard.pieces[c.row][c.col],this.tutorMatches[b]=this.matches[b];this.createHand();this.timeEvent.add(0.2,this.tweenHand,this);this.createHint()}},checkAfterTutor:function(){this.handTutor&&(this.handTutor.kill(),this.handTutor=null);this.hint&&(this.hint.kill(),
this.hint=null);ig.GameData.trialMode&&(ig.GameData.trialMode=!1)},createHand:function(){var b=this.tutorMatches[0];0==b.x&&(b.x+=0.001);0==b.y&&(b.y+=0.001);this.handTutor=ig.CallAsset.addFrame(b.x,b.y,"game/finger");this.gBoard.gFrontBoard.add(this.handTutor)},tweenHand:function(){var b=this.tutorMatches[0],c=this.tutorMatches[1];this.handTutor.x=b.x;this.handTutor.y=b.y;b=c.x;c=c.y;0==b&&(b+=0.05);0==c&&(c+=0.05);var d=new ig.TweenDef(this.handTutor);d.to({x:b,y:c},500);d.delay(0.5);d.onComplete(function(){this.timeEvent.add(0.5,
function(){this.handTutor&&this.tweenHand()},this)}.bind(this));d.start()},createHint:function(){if(!(2>this.matches.length)&&!this.hint){var b=this.matches[0],c=this.matches[1];if(b.row==c.row)var d=(b.x+c.x)/2,b=b.y,c=0;else d=b.x,b=(b.y+c.y)/2,c=90;this.hint=ig.CallAsset.addFrame(d,b,"game/hint1");this.hint.anchor.setTo(0.5);this.hint.angle=c;d=ig.GenerateFrameNames("game/hint",1,2,"",1);this.hint.addAnim("hint",0.2,d,!1);this.hint.playAnim("hint");this.gBoard.gPieces.add(this.hint)}},startPause:function(){this.gamePaused=
!0;this.greyBg.visible=!0},resumeGame:function(){this.gamePaused=!1;this.greyBg.visible=!1;this.gPause.kill()},lastCall:function(){if(0>=this.moveLeft&&!this.gameOver)this.checkAllPowerUp();else{var b=30,c=3;5>ig.GameData.stage&&(b=10,c=5);this.chain+=b;var d=this.moveLeft;d>c&&(d=c);for(var e=[],f=0;f<this.gBoard.pieces.length;f++)for(c=0;c<this.gBoard.pieces[f].length;c++)(b=this.gBoard.pieces[f][c])&&e.push(b);c=[];b=[];for(f=0;f<d;f++){for(var g=null;!g;){var l=ig.game.rnd.pick(e);0==l.powerUpId&&
0>c.indexOf(l)&&(g=l)}l=new ig.AddSignal(this.gBoard);l.add(function(){var b=curState().gBoard,c=ig.game.rnd.integerInRange(1,5),d=-1;3>=c&&(d=this.pieceId);b.replacePiece(this,c,d);curState().gBoard.pieces[this.row][this.col].isBreak=!0;curState().timeEvent.add(0.4,function(){var b=curState().gBoard.pieces[this.row][this.col];if(b)b.onDestroy()},this)},g);c.push(g);b.push(l)}this.moveLeft-=d;g=this.showMoves.getBounds();d=curState().gBoard;e=d.gFrontBoard;e.getBounds();var l=e.pos.x,p=e.pos.y,f=
ig.game.math.distance(l,p,g.centerX,g.centerY),l=ig.game.math.angleBetween(l,p,g.centerX,g.centerY),g=e.x+Math.cos(l)*(f/d.scale.x),d=e.y+Math.sin(l)*(f/d.scale.y),d=new Vector2(g,d),c=ig.game.addGroup(d.x,d.y,{targets:c,onCompletes:b,speed:8},EntitySamecolorEffect);this.gBoard.gFrontBoard.add(c);this.gamePaused=!1}},checkAllPowerUp:function(){for(var b=!1,c=0;c<this.gBoard.pieces.length;c++)for(var d=0;d<this.gBoard.pieces[c].length;d++){var e=this.gBoard.pieces[c][d];e&&0<e.powerUpId&&(4==e.powerUpId&&
(e.pieceId=ig.game.rnd.pick(this.pieceTypes)),e.onDestroy(),b=!0)}b?this.gamePaused=!1:this.gameOver=!0},gameEnd:function(){this.gameOver=!0;this.gResult||(this.gResult=ig.game.addGroup(this.centerX,this.centerY,{},EntityResult),this.resultGroup.add(this.gResult),this.gResult.tweenIn())},update:function(){this.isReady||(this.isReady=!0,this.curtainBg&&(this.curtainBg.visible=!1),ig.game.transition&&this.timeEvent.add(0.5,function(){ig.game.transition.open()},this));if(ig.game.transition.isClosed)this.timeEvent.update(),
this.starBar.drawSize.x=0;else{this.parent();!ig.game.transition.isClosed&&!this.pageReady&&!this.gBoard.checkAllMovement()&&(this.pageReady=!0);this.showMoves.setText(this.moveLeft);var b=this.plScore/this.stageScore*this.starBar.width;b>this.starBar.width&&(b=this.starBar.width);this.starBar.drawSize.x=b;for(b=0;b<this.stars.length;b++){var c=this.stars[b];this.plScore>=this.borderStars[b]*this.stageScore&&"off"==c.inState&&(c.frameName="game/star-tag-on",c.inState="on")}this.showScore.setText(ig.game.writeThousands(this.plScore));
b=0.85*ig.CallAsset.searchSpriteData("game/small-box").frame.w;this.showScore.width>=b?this.showScore.size.x>=b&&this.showScore.scale.setTo(b/this.showScore.width):1>this.showScore.scale.x&&this.showScore.scale.setTo(1);if(!this.gameOver||!this.gamePaused)this.hintCD+=0.001*ig.game.customTime.physicsElapsedMS,this.hintCD>=this.maxHint&&(this.hintCD=0,this.createHint())}},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.levels.gameplay").requires("impact.image","game.entities.controllers.gameplay-ctrl").defines(function(){LevelGameplay={entities:[{type:"EntityGameplayCtrl",x:780,y:40}],layer:[]};LevelGameplayResources=[]});ig.baked=!0;
ig.module("game.main").requires("impact.game","plugins.addon.state-addon","plugins.packer.packer-plugin","plugins.patches.fps-limit-patch","plugins.patches.timer-patch","plugins.patches.user-agent-patch","plugins.patches.webkit-image-smoothing-patch","plugins.patches.windowfocus-onMouseDown-patch","plugins.patches.input-patch","plugins.data.vector","plugins.data.color-rgb","plugins.font.font-loader","plugins.handlers.dom-handler","plugins.handlers.size-handler","plugins.handlers.api-handler","plugins.handlers.visibility-handler",
"plugins.audio.sound-handler","plugins.io.io-manager","plugins.io.storage-manager","plugins.splash-loader","plugins.tween","plugins.tweens-handler","plugins.url-parameters","plugins.director","plugins.impact-storage","plugins.fullscreen","plugins.responsive.responsive-plugin","plugins.branding.splash","game.entities.branding-logo-placeholder","game.entities.pointer","game.entities.pointer-selector","game.entities.select","game.levels.opening","game.levels.mainmenu","game.levels.stage","game.levels.gameplay").defines(function(){this.START_OBFUSCATION;
this.FRAMEBREAKER;MyGame=ig.Game.extend({name:"MJS-JewelCrushResponsiveHD",version:"1.0.1",frameworkVersion:"2.0.2",sessionData:{},io:null,paused:!1,tweens:null,init:function(){this.prepareGame();this.tweens=new ig.TweensHandler;this.setupMarketJsGameCenter();this.io=new IoManager;this.setupStorageManager();this.setupUrlParams=new ig.UrlParameters;this.removeLoadingWheel();this.finalize()},initData:function(){return this.sessionData={unlockedStages:[],highScores:[],bgmVol:0.5,sfxVol:0.8,bgmOn:!0,
sfxOn:!0}},setupMarketJsGameCenter:function(){if(_SETTINGS)if(_SETTINGS.MarketJSGameCenter){var b=ig.domHandler.getElementByClass("gamecenter-activator");_SETTINGS.MarketJSGameCenter.Activator.Enabled&&_SETTINGS.MarketJSGameCenter.Activator.Position&&(console.log("MarketJSGameCenter activator settings present ...."),ig.domHandler.css(b,{position:"absolute",left:_SETTINGS.MarketJSGameCenter.Activator.Position.Left,top:_SETTINGS.MarketJSGameCenter.Activator.Position.Top,"z-index":3}));ig.domHandler.show(b)}else console.log("MarketJSGameCenter settings not defined in game settings")},
finalize:function(){this.start();ig.sizeHandler.reorient()},removeLoadingWheel:function(){try{$("#ajaxbar").css("background","none")}catch(b){console.log(b)}},showDebugMenu:function(){console.log("showing debug menu ...");ig.Entity._debugShowBoxes=!0;$(".ig_debug").show()},start:function(){this.checkSound();this.director=new ig.Director(this,[LevelOpening,LevelMainmenu,LevelStage,LevelGameplay]);if(_SETTINGS.Branding.Splash.Enabled)try{this.branding=new ig.BrandingSplash}catch(b){console.log(b),console.log("Loading original levels ..."),
this.director.loadLevel(this.director.currentLevel)}else this.director.loadLevel(this.director.currentLevel);(_SETTINGS.Branding.Splash.Enabled||_SETTINGS.DeveloperBranding.Splash.Enabled)&&this.spawnEntity(EntityPointerSelector,50,50)},checkSound:function(){ig.soundHandler.bgmPlayer.volume(ig.game.sessionData.bgmVol);ig.soundHandler.sfxPlayer.volume(ig.game.sessionData.sfxVol);ig.game.sessionData.bgmOn?ig.soundHandler.bgmPlayer.unmute():ig.soundHandler.bgmPlayer.mute();ig.game.sessionData.sfxOn?
ig.soundHandler.sfxPlayer.unmute():ig.soundHandler.sfxPlayer.mute()},fpsCount:function(){this.fpsTimer||(this.fpsTimer=new ig.Timer(1));this.fpsTimer&&0>this.fpsTimer.delta()&&(null!=this.fpsCounter?this.fpsCounter++:(ig.game.fps=this.fpsCounter,this.fpsCounter=0,this.fpsTimer.reset()))},endGame:function(){console.log("End game");ig.soundHandler.bgmPlayer.stop();ig.apiHandler.run("MJSEnd")},pauseGame:function(){ig.system.stopRunLoop.call(ig.system);ig.game.tweens.onSystemPause();ig.soundHandler.onSystemPause();
console.log("Game Paused")},resumeGame:function(){ig.system.startRunLoop.call(ig.system);ig.game.tweens.onSystemResume();ig.soundHandler.onSystemResume();console.log("Game Resumed")},showOverlay:function(b){for(i=0;i<b.length;i++)$("#"+b[i])&&$("#"+b[i]).show(),document.getElementById(b[i])&&(document.getElementById(b[i]).style.visibility="visible")},hideOverlay:function(b){for(i=0;i<b.length;i++)$("#"+b[i])&&$("#"+b[i]).hide(),document.getElementById(b[i])&&(document.getElementById(b[i]).style.visibility=
"hidden")},currentBGMVolume:1,addition:0.1,update:function(){this.paused?(this.updateWhilePaused(),this.checkWhilePaused()):(this.parent(),this.tweens.update(this.tweens.now()))},updateWhilePaused:function(){for(var b=0;b<this.entities.length;b++)this.entities[b].ignorePause&&this.entities[b].update()},checkWhilePaused:function(){for(var b={},c=0;c<this.entities.length;c++){var d=this.entities[c];if(d.ignorePause&&!(d.type==ig.Entity.TYPE.NONE&&d.checkAgainst==ig.Entity.TYPE.NONE&&d.collides==ig.Entity.COLLIDES.NEVER))for(var e=
{},f=Math.floor(d.pos.y/this.cellSize),g=Math.floor((d.pos.x+d.size.x)/this.cellSize)+1,l=Math.floor((d.pos.y+d.size.y)/this.cellSize)+1,p=Math.floor(d.pos.x/this.cellSize);p<g;p++)for(var j=f;j<l;j++)if(b[p])if(b[p][j]){for(var q=b[p][j],m=0;m<q.length;m++)d.touches(q[m])&&!e[q[m].id]&&(e[q[m].id]=!0,ig.Entity.checkPair(d,q[m]));q.push(d)}else b[p][j]=[d];else b[p]={},b[p][j]=[d]}},draw:function(){this.parent();this.dctf()},dctf:function(){this.COPYRIGHT},clearCanvas:function(b,c,d){var e=b.canvas;
b.clearRect(0,0,c,d);e.style.display="none";e.offsetHeight;e.style.display="inherit"},drawDebug:function(){if(!ig.global.wm&&(this.debugEnable(),this.viewDebug&&(ig.system.context.fillStyle="#000000",ig.system.context.globalAlpha=0.35,ig.system.context.fillRect(0,0,ig.system.width/4,ig.system.height),ig.system.context.globalAlpha=1,this.debug&&0<this.debug.length)))for(i=0;i<this.debug.length;i++)ig.system.context.font="10px Arial",ig.system.context.fillStyle="#ffffff",ig.system.context.fillText(this.debugLine-
this.debug.length+i+": "+this.debug[i],10,50+10*i)},debugCL:function(b){this.debug?(50>this.debug.length||this.debug.splice(0,1),this.debug.push(b),this.debugLine++):(this.debug=[],this.debugLine=1,this.debug.push(b));console.log(b)},debugEnable:function(){ig.input.pressed("click")&&(this.debugEnableTimer=new ig.Timer(2));this.debugEnableTimer&&0>this.debugEnableTimer.delta()?ig.input.released("click")&&(this.debugEnableTimer=null):this.debugEnableTimer&&0<this.debugEnableTimer.delta()&&(this.debugEnableTimer=
null,this.viewDebug=this.viewDebug?!1:!0)},drawVersion:function(){if("undefined"!==typeof _SETTINGS.Versioning&&null!==_SETTINGS.Versioning&&_SETTINGS.Versioning.DrawVersion){var b=ig.system.context;fontSize=_SETTINGS.Versioning.FontSize;fontFamily=_SETTINGS.Versioning.FontFamily;fillStyle=_SETTINGS.Versioning.FillStyle;b.save();b.textBaseline="bottom";b.textAlign="left";b.font=fontSize+" "+fontFamily||"10px Arial";b.fillStyle=fillStyle||"#ffffff";b.fillText("v"+_SETTINGS.Versioning.Version+"+build."+
_SETTINGS.Versioning.Build,10,ig.system.height-10);b.restore()}}});ig.packer.initPacker(function(){ig.domHandler=null;ig.domHandler=new ig.DomHandler;ig.domHandler.forcedDeviceDetection();ig.domHandler.forcedDeviceRotation();ig.apiHandler=new ig.ApiHandler;ig.sizeHandler=new ig.SizeHandler(ig.domHandler);ig.ua.mobile?(ig.Sound.enabled=!1,ig.main("#canvas",MyGame,60,ig.sizeHandler.mobile.actualResolution.x,ig.sizeHandler.mobile.actualResolution.y,ig.sizeHandler.scale,ig.SplashLoader),ig.sizeHandler.resize()):
ig.main("#canvas",MyGame,60,ig.sizeHandler.desktop.actualResolution.x,ig.sizeHandler.desktop.actualResolution.y,ig.sizeHandler.scale,ig.SplashLoader);ig.visibilityHandler=new ig.VisibilityHandler;ig.soundHandler=null;ig.soundHandler=new ig.SoundHandler;ig.sizeHandler.reorient()}.bind(this));this.DOMAINLOCK_BREAKOUT_ATTEMPT;this.END_OBFUSCATION});
